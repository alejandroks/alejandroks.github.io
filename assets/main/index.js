window.__require=function e(t,i,n){function a(r,s){if(!i[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var u=i[r]={exports:{}};t[r][0].call(u.exports,function(e){return a(t[r][1][e]||e)},u,u.exports,e,t,i,n)}return i[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<n.length;r++)a(n[r]);return a}({AimStick:[function(e,t){"use strict";cc._RF.push(t,"ea8f1o+BUNCZYjWSou/36W0","AimStick");var i=a(e("GameEvent")),n=a(e("UiElement"));function a(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:n.default,properties:{stickBound:0,inputNode:{default:null,type:cc.Node},_startTapPosition:{default:cc.Vec2.ZERO,serializable:!1},_startStickPosition:{default:cc.Vec2.ZERO,serializable:!1}},onLoad:function(){this.isActiveElement=!0,this.inputNode&&(this._startStickPosition=this.inputNode.getPosition()),cc.systemEvent.on(i.default.TOGGLE_PLAYER,this.onTogglePlayer,this)},onEnable:function(){this.hide(0)},onDisable:function(){this._subscribeEvents(!1)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.STICK_DOWN,this.onStickDown,this),cc.systemEvent[t](i.default.STICK_MOVE,this.onStickMove,this),cc.systemEvent[t](i.default.STICK_UP,this.onStickUp,this)},onStickDown:function(e){var t=this.node.parent.convertToNodeSpaceAR(e.worldPosition),i=cc.Vec2.ZERO;this.node.setPosition(t),this.inputNode&&(i=this.node.convertToNodeSpaceAR(e.worldPosition)),this._startTapPosition=i,this.show(.1)},onStickMove:function(e){var t=cc.Vec2.ZERO;this.inputNode&&(t=this.inputNode.parent.convertToNodeSpaceAR(e.worldPosition));var n=t.sub(this._startTapPosition),a=n.clone(),o=Math.atan2(a.y,a.x);o=o/Math.PI*180;var r=my.utilities.clamp(n.mag()/this.stickBound,0,1);n.mag()>this.stickBound&&n.normalizeSelf().mulSelf(this.stickBound),this.inputNode&&this.inputNode.setPosition(n),cc.systemEvent.emit(i.default.PLAYER_CONTROL_MOVE,{angle:o,speed:r})},onStickUp:function(){cc.systemEvent.emit(i.default.PLAYER_CONTROL_STOP_MOVE),this.hide(.1)},onHideCallBack:function(){this.inputNode&&this.inputNode.setPosition(this._startStickPosition)},onTogglePlayer:function(e){this.inputNode&&this.inputNode.setPosition(this._startStickPosition),this._subscribeEvents(e),this.node.active=e}}),cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement"}],AimType:[function(e,t,i){"use strict";cc._RF.push(t,"cb29apavzJOioJaOgRAQGTE","AimType"),i.__esModule=!0,i.default=void 0;var n=cc.Enum({None:0,All:1,AWP:2,Pistol:3});i.default=n,t.exports=i.default,cc._RF.pop()},{}],AnimationConfig:[function(e,t,i){"use strict";var n;cc._RF.push(t,"02396MZE51LsJsTOmTYXUml","AnimationConfig"),i.__esModule=!0,i.default=void 0;var a=(0,cc._decorator.ccclass)("AnimationConfig")(n=function(){this.Hero={animation:{idle:"hero_idle",run:"hero_run",chopTree:"hero_chop_tree",chopRock:"hero_chop_rock"},event:{idleEnd:"idle_end",runEnd:"run_end",chopTree:"chop_tree_end",chopRock:"chop_rock_end"},bone:{},skins:{default:"default"}},this.NPC={animation:{idle:"idle"},event:{},bone:{},skins:{default:"default"}}})||n;i.default=a,t.exports=i.default,cc._RF.pop()},{}],AnnouncerScore:[function(e,t,i){"use strict";cc._RF.push(t,"c5d47x9ratEarBV3AcneL9l","AnnouncerScore"),i.__esModule=!0,i.default=void 0,a(e("GameEvent"));var n=a(e("UiElement"));function a(e){return e&&e.__esModule?e:{default:e}}var o=cc.Class({extends:n.default,properties:{numberNode:{default:null,type:cc.Node},numbers:{default:[],type:cc.SpriteFrame},_animation:{default:null,serializable:!1}},onLoad:function(){this._animation=this.node.getComponent(cc.Animation)},toggleAnnouncerScore:function(e,t,i){this.callBackAnimation=i,this._animation&&(this._animation.play(),this._animation.setCurrentTime(0),e||this._animation.stop()),t&&this._setNumber(t)},_setNumber:function(e){this.numbers[e]&&this.numberNode&&(this.numberNode.getComponent(cc.Sprite).spriteFrame=this.numbers[e])},onAnimationEvent:function(){this.callBackAnimation instanceof Function&&(this.callBackAnimation(this),this.callBackAnimation=null)},callBackAnimation:null});i.default=o,t.exports=i.default,cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement"}],Announcer:[function(e,t){"use strict";cc._RF.push(t,"77c54V15mlDT69yU6J2jJQg","Announcer");var i=a(e("UiElement")),n=a(e("GameEvent"));function a(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:i.default,properties:{holder:{default:null,type:cc.Node},eventToToggle:{default:n.default.None,type:n.default},_animation:{default:null,serializable:!1}},onLoad:function(){this._animation=this.node.getComponent(cc.Animation),cc.systemEvent.on(this.eventToToggle,this.onToggleAnnouncer,this),this.holder&&(this.holder.scale=0)},onToggleAnnouncer:function(e){this.isActiveElement!==e&&(this.isActiveElement=e)},onSwitchActiveCallback:function(){var e=this.isActiveElement?"announcer_show":"announcer_hide";this._animation&&(this._animation.play(e),this._animation.setCurrentTime(0))}}),cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement"}],AnyInputCommand:[function(e,t,i){"use strict";cc._RF.push(t,"4d221Hj7udMM7LloXGOeQg0","AnyInputCommand"),i.__esModule=!0,i.default=void 0,a(e("GameEvent"));var n=a(e("IInputCommand"));function a(e){return e&&e.__esModule?e:{default:e}}a(e("Direction"));var o=function(e){var t,i;function n(t){var i;return(i=e.call(this,t)||this)._currentTouch=null,i._lastInputLocation=cc.Vec2.ZERO,i}i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var a=n.prototype;return a.onDown=function(e,t){-1===this._currentTouchID&&(this._currentTouch=this.createTouch(e,t),this._currentTouchID=e._id,this.getTouchInfo(e,t))},a.onMove=function(e,t){this._currentTouchID===e._id&&this.getTouchInfo(e,t)},a.onUp=function(e,t){this._currentTouchID===e._id&&(this.getTouchInfo(e,t),this._currentTouch=null,this._currentTouchID=-1,this.destroyTouch(e))},n}(n.default);i.default=o,t.exports=i.default,cc._RF.pop()},{Direction:"Direction",GameEvent:"GameEvent",IInputCommand:"IInputCommand"}],AudioManager:[function(e,t){"use strict";cc._RF.push(t,"52782riHtlMXbpIQ0JFEuiV","AudioManager");var i,n=(i=e("GameEvent"))&&i.__esModule?i:{default:i};cc.Class({extends:cc.Component,properties:{audioClips:{default:[],type:cc.AudioClip}},onLoad:function(){this._map=[],window.SOUND_ON&&this._subscribeEvents(!0)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](n.default.AUDIO_PLAY,this.play,this),cc.systemEvent[t](n.default.AUDIO_STOP,this.stop,this)},play:function(e,t,i){for(var n in void 0===t&&(t=!1),void 0===i&&(i=1),this.audioClips)if(this.audioClips[n].name===e)return void(this._map[e]=cc.audioEngine.play(this.audioClips[n],t,i))},stop:function(e){cc.audioEngine.stop(this._map[e])}}),cc._RF.pop()},{GameEvent:"GameEvent"}],Background:[function(e,t){"use strict";cc._RF.push(t,"5344bzggb9GTrSe9Ha6gM4u","Background"),cc.Class({extends:cc.Component,properties:{}}),cc._RF.pop()},{}],Blackout:[function(e,t){"use strict";cc._RF.push(t,"ba501zTJmhOZKOO7CpWqYj+","Blackout");var i,n=(i=e("GameEvent"))&&i.__esModule?i:{default:i};cc.Class({extends:cc.Component,properties:{opacityShow:145,opacityHide:0},onEnable:function(){cc.systemEvent.on(n.default.TOGGLE_BLACKOUT,this.onToggleBlackout,this)},onDisable:function(){cc.systemEvent.on(n.default.TOGGLE_BLACKOUT,this.onToggleBlackout,this)},onToggleBlackout:function(e){void 0===e&&(e=!1);var t=e?this.opacityShow:this.opacityHide;my.tweenManager.add(this.node,{opacity:t},.5,"linear",!0)}}),cc._RF.pop()},{GameEvent:"GameEvent"}],Bullet:[function(e,t){"use strict";cc._RF.push(t,"480321y+y1MmJrPwx2KxFY1","Bullet");var i,n,a,o,r,s,c,l,u,h,d,f=p(e("GameEvent")),_=p(e("GameObject"));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,i,n,a){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var E=cc._decorator,T=E.ccclass,g=E.property;i=g({type:cc.RigidBody3D}),n=g({type:cc.Collider3D}),a=g({type:cc.String}),T((d=function(e){var t,i;function n(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return m(t=e.call.apply(e,[this].concat(n))||this,"rigidBody",r,v(t)),m(t,"collider",s,v(t)),m(t,"lifetime",c,v(t)),m(t,"speed",l,v(t)),m(t,"weaponDamage",u,v(t)),m(t,"targetGroups",h,v(t)),t}i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var a=n.prototype;return a.onLoad=function(){this.collider.on("trigger-enter",this.onTriggerEnter,this)},a.run=function(e){var t=this;this.node.active=!1,this.node.active=!0;var i=e.mul(this.speed);this.rigidBody.setLinearVelocity(i),this.scheduleOnce(function(){cc.systemEvent.emit(f.default.RETURN_TO_POOL,t.node)},this.lifetime)},a.onTriggerEnter=function(e){var t=this,i=e.otherCollider.node.group;this.targetGroups.find(function(e){return e===i})&&(this.unscheduleAllCallbacks(),my.tweenManager.add(this.node,{scaleY:0},.08,"linear",!0).onComplete=function(){cc.systemEvent.emit(f.default.RETURN_TO_POOL,t.node)})},n}(_.default),r=y((o=d).prototype,"rigidBody",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=y(o.prototype,"collider",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=y(o.prototype,"lifetime",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=y(o.prototype,"speed",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=y(o.prototype,"weaponDamage",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),h=y(o.prototype,"targetGroups",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o)),cc._RF.pop()},{GameEvent:"GameEvent",GameObject:"GameObject"}],ButtonInputCommand:[function(e,t,i){"use strict";cc._RF.push(t,"09072/oS2lFlL5755VivJBO","ButtonInputCommand"),i.__esModule=!0,i.default=void 0;var n=a(e("GameEvent"));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t,i;function a(t){return e.call(this,t)||this}return i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i,a.prototype.onUp=function(){cc.systemEvent.emit(n.default.REDIRECT_PROCESSING)},a}(a(e("IInputCommand")).default);i.default=o,t.exports=i.default,cc._RF.pop()},{GameEvent:"GameEvent",IInputCommand:"IInputCommand"}],ButtonItem:[function(e,t,i){"use strict";cc._RF.push(t,"aa32fbFdv9MD4Kkf42+CMp3","ButtonItem"),i.__esModule=!0,i.default=void 0;var n=o(e("GameEvent")),a=o(e("UiElement"));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=s(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}function s(e,t){if(e){if("string"==typeof e)return c(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var l=cc.Class({extends:a.default,properties:{spriteItem:{default:null,type:cc.Node},_currentEventsArray:{default:null,serializable:!1},_currentItemEventArray:{default:null,serializable:!1},_animation:{default:null,serializable:!1},_isPressed:{default:!1,serializable:!1},_currentTimeAnimation:{default:0,serializable:!1},_state:{default:null,serializable:!1},_currentItemToggle:{default:!1,serializable:!1},_currentDragItem:{default:null,serializable:!1},isButtonBlock:{default:!1,serializable:!1,visible:!1},itemType:{default:null,visible:!1,serializable:!1},itemPositions:{default:null,visible:!1,serializable:!1},tag:{default:0,visible:!1,serializable:!1}},onLoad:function(){this._animation=this.node.getComponent(cc.Animation),cc.systemEvent.on(n.default.TOGGLE_PLAYER,this.onTogglePlayer,this)},setCurrentParameters:function(e){var t=this;cc.systemEvent.emit(n.default.RETURN_TO_POOL,this._currentDragItem),cc.systemEvent.emit(n.default.GET_ITEM_DATA,e,function(e){e&&(t.spriteItem&&(t.spriteItem.getComponent(cc.Sprite).spriteFrame=e.spriteConfig.spriteFrame,t.spriteItem.setPosition(e.spriteConfig.position),t.spriteItem.width=e.spriteConfig.spriteFrame._originalSize.width,t.spriteItem.height=e.spriteConfig.spriteFrame._originalSize.height,t.spriteItem.setScale(e.spriteConfig.scale),t.spriteItem.angle=e.spriteConfig.rotation),t._createDragItemItem(e.dragElement,e.dragElementScale),t._currentEventsArray=e.eventsToSend,t.isButtonBlock=!1,t.tag=e.tag)})},playChangeItemAnimation:function(e){var t=this,i=my.tweenManager.add(this.node,{scale:0},1,"linear",!0),n=my.tweenManager.add(this.node,{scale:1},.8,"linear",!1);i.onComplete=function(){n.start(),t.toggleAnimation(!1),t._itemChoseToggle(!1,"item_button_chose"),t._itemChoseToggle(!1,"item_button_apply"),e instanceof Function&&e()},n.onComplete=function(){t.isActivePlayer=!0}},toggleAnimation:function(e){if(this._currentItemToggle!==e){this._currentItemToggle=e;var t=e?cc.WrapMode.Normal:cc.WrapMode.Reverse;this._state&&(this._currentTimeAnimation=this._state.time>=this._state.duration?0:this._state.duration-this._state.time),this._animation&&(this._state=this._animation.play("item_button_toggle"),this._state.wrapMode=t,this._state.time=this._currentTimeAnimation,this._state._process())}},toggleTutorAnimation:function(){this._itemChoseToggle(!0,"item_tutorial_toggle")},_subscribeLocalEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](n.default.DOWN_ITEM,this.onDownItem,this),cc.systemEvent[t](n.default.MOVE_ITEM,this.onMoveItem,this),cc.systemEvent[t](n.default.UP_ITEM,this.onUpItem,this)},_itemChoseToggle:function(e,t){if(this._animation){var i=this._animation.playAdditive(t);i.time=0,i._process(),e||this._animation.stop(t)}},_createDragItemItem:function(e,t){var i=this,a=null;cc.systemEvent.emit(n.default.GET_UI_MANGER_NODE,function(e){a=e}),cc.systemEvent.emit(n.default.CREATE_GAME_OBJECT,e,function(e){e instanceof cc.Node&&a instanceof cc.Node&&(e.setParent(a),e.setPosition(cc.Vec2.ZERO),e.zIndex=50,e.setScale(t),i._currentDragItem=e)},function(e){e&&(e.active=!1)})},_moveCurrentItem:function(e){this._currentDragItem&&(this._currentDragItem.active=!0,this._currentDragItem.setPosition(e))},_sendPositionTo:function(){var e=this;if(this._currentDragItem){var t=cc.Camera.findCamera(this._currentDragItem),i=this._currentDragItem.convertToWorldSpaceAR(cc.Vec2.ZERO),a=t.getWorldToScreenPoint(i),o=!1;this._currentDragItem.active=!1,cc.systemEvent.emit(n.default.ITEM_DROPPED,this.itemType,a,function(t){o=!0,t?(e.isButtonBlock=!0,e._isPressed=!1,e._itemChoseToggle(!0,"item_button_chose"),e._itemChoseToggle(!0,"item_button_apply"),cc.systemEvent.emit(n.default.OBJECTIVE_COMPLETE,e)):e.toggleAnimation(!1)}),o||this.toggleAnimation(!1)}},onDownItem:function(e,t){this.isButtonBlock||t.node!==this.node||(this._isPressed=!0,this._moveCurrentItem(e.worldPosition),this.toggleAnimation(!0))},onMoveItem:function(e,t){t.node===this.node&&!this.isButtonBlock&&this._isPressed&&this._moveCurrentItem(e.worldPosition)},onUpItem:function(e){if(this._isPressed){if(this._isPressed=!1,this._moveCurrentItem(e.worldPosition),this.node.getBoundingBoxToWorld().contains(e.worldPosition))return this.toggleAnimation(!1),void(this._currentDragItem&&(this._currentDragItem.active=!1));for(var t,i=r(this._currentEventsArray);!(t=i()).done;){var n=t.value;cc.systemEvent.emit(n)}this._sendPositionTo()}},onTogglePlayer:function(e){void 0===e&&(e=!0),this._subscribeLocalEvents(e),this._currentDragItem&&(this._currentDragItem.active=!1)}});i.default=l,t.exports=i.default,cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement"}],ButtonManager:[function(e,t){"use strict";cc._RF.push(t,"a2dd9ulZYFADYmbqlzH7/N1","ButtonManager");var i=r(e("ItemType")),n=r(e("ButtonItem")),a=r(e("GameEvent")),o=r(e("UiElement"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=c(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var u=cc.Class({properties:{itemType:[i.default],isHidedButton:!1,positionHiddenElement:{default:cc.Vec2.ZERO,visible:function(){return this.isHidedButton}}},name:"ButtonsItemConfig"});cc.Class({extends:o.default,properties:{prefabButton:{default:null,type:cc.Prefab},holder:{default:null,type:cc.Node},distanceBetween:80,buttons:[u],_currentItemsIndex:0,_createdButtonsArray:[],_hidedButtonsArray:[]},onLoad:function(){this._subscribeEvents(!0)},start:function(){this._createButtons()},_createButtons:function(){for(var e,t=s(this.buttons);!(e=t()).done;){var a=e.value;if(this.prefabButton){var o=cc.instantiate(this.prefabButton),r=o.getComponent(n.default);r&&(r.itemType=i.default[a.itemType],r.setCurrentParameters(a.itemType[this._currentItemsIndex]),a.isHidedButton?(this._hidedButtonsArray.push(r),r.node.setPosition(a.positionHiddenElement)):this._createdButtonsArray.push(r)),o.parent=this.holder||this.node}}this._setButtonItemPosition()},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](a.default.OBJECTIVE_COMPLETE,this.onObjectiveComplete,this)},_changeButtonItems:function(){var e=this;this._currentItemsIndex++;for(var t,i=function(){var i=t.value;i.playChangeItemAnimation(function(){i.setCurrentParameters(i.data[e._currentItemsIndex])})},n=s(this._createdButtonsArray);!(t=n()).done;)i()},_setButtonItemPosition:function(e){if(void 0===e&&(e=!1),this.holder&&!(this._createdButtonsArray.length<=0)){var t=this.holder.width,i=(t/this._createdButtonsArray.length+this.distanceBetween)*Math.abs(this._createdButtonsArray.length-1);e?my.tweenManager.add(this.holder,{x:.5*-i,y:0},.5,"linear",!0):this.holder.setPosition(.5*-i,0);for(var n=0;n<this._createdButtonsArray.length;n++){var a=this._createdButtonsArray[n],o=(t/this._createdButtonsArray.length+this.distanceBetween)*n;e?my.tweenManager.add(a.node,{x:o,y:0},.5,"linear",!0):a.node.setPosition(o,0)}}},_deleteItem:function(e){var t=this._createdButtonsArray.indexOf(e);my.tweenManager.add(e.node,{scale:0},.5,"linear",!0).onComplete=function(){e.node.active=!1},-1!=t&&this._createdButtonsArray.splice(t,1)},_setDisableItem:function(){if(this._hidedButtonsArray.length>0){var e=this._hidedButtonsArray[0];this._createdButtonsArray.push(e),this._hidedButtonsArray.splice(0,1)}},onSwitchActiveCallback:function(){var e=this;this.isActiveElement||(my.tweenManager.add(this.node,{scale:0},.5,"linear",1,!0).onComplete=function(){e.node.active=!1})},onObjectiveComplete:function(e){this._deleteItem(e),this._setDisableItem(),this._setButtonItemPosition(!0)}}),cc._RF.pop()},{ButtonItem:"ButtonItem",GameEvent:"GameEvent",ItemType:"ItemType",UiElement:"UiElement"}],ButtonsShow:[function(e,t){"use strict";cc._RF.push(t,"7b340IYhClG3IDXcQ3geyCn","ButtonsShow");var i=a(e("UiElement")),n=a(e("GameEvent"));function a(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:i.default,properties:{showDelay:1},onLoad:function(){cc.systemEvent.on(n.default.BUTTONS_SHOW,this.onButtonsShow,this)},_showButtons:function(){var e=this;this.scheduleOnce(function(){e.show(),cc.systemEvent.emit(n.default.TOGGLE_TUTOR_BUTTONS)},this.showDelay)},onButtonsShow:function(){this._showButtons()}}),cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement"}],CameraBoxes:[function(e,t,i){"use strict";cc._RF.push(t,"51cd6f1BH1MpIQZrL2YOEgE","CameraBoxes"),i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Component,properties:{defaultBox:{type:cc.Node,get:function(){return this._defaultBox},set:function(e){e instanceof cc.Node&&(this._defaultBox=e)}},_defaultBox:{default:null,type:cc.Node}}});i.default=n,t.exports=i.default,cc._RF.pop()},{}],CameraController3D:[function(e,t){"use strict";cc._RF.push(t,"593bcF0NyZAd7jb2DzgKb4F","CameraController3D");var i,n=(i=e("GameEvent"))&&i.__esModule?i:{default:i};cc.Class({name:"CameraRectResizeHelper",properties:{landscape:new cc.Rect(0,0,1,1),portrait:new cc.Rect(0,0,1,1)}});var a=cc.Class({name:"CameraZoomHelper",properties:{landscape:1,portrait:1}}),o=cc.Class({name:"CameraSetupHelper",properties:{target:{default:null,type:cc.Node,notify:function(){this._isFollow=this._target instanceof cc.Node}},followOffset:new cc.Vec3,followRotation:new cc.Vec3,zoom:{default:null,type:a}}});cc.Class({extends:cc.Component,properties:{currentCameraSetupIndex:{default:0},cameraSetups:{default:[],type:o},cameraShakeBounds:{default:cc.v3()},_camera:{default:null,type:cc.Camera,serializable:!1},_target:{default:null,type:cc.Node,serializable:!1},_isFollow:{default:!1,serializable:!1},_currentCameraRect:{default:new cc.Rect(0,0,1,1),serializable:!1},_followRotation:{default:new cc.Vec3,serializable:!1},_followOffset:{default:new cc.Vec3,serializable:!1},_zoomTween:{default:null,serializable:!1},_followOffsetTween:{default:null,serializable:!1},_followRotationTween:{default:null,serializable:!1},_currentShakeOffset:{default:cc.v3(),serializable:!1},_shakeTween:{default:null,serializable:!1}},onLoad:function(){this._camera=this.getComponent(cc.Camera)},start:function(){this._resize()},onEnable:function(){this._resize(),this._isFollow=this._target instanceof cc.Node,this._subscriptionEvents(!0)},onDisable:function(){this._isFollow=!1,this._subscriptionEvents(!1)},update:function(){this._isFollow&&this._follow()},_follow:function(){var e=this._target.convertToWorldSpaceAR(new cc.Vec3),t=this.node.parent.convertToNodeSpaceAR(e);this.node.setPosition(t);var i=this.node.convertToWorldSpaceAR(this._followOffset),n=this.node.parent.convertToNodeSpaceAR(i);n.addSelf(this._currentShakeOffset),this.node.setPosition(n),this.node.setRotation(cc.quat().fromEuler(this._followRotation))},_subscriptionEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](my.Events.SIZE_CHANGE,this.onSizeChange,this),cc.systemEvent[t](n.default.CAMERA_3D_START_SHAKE,this.onCameraStartShake,this),cc.systemEvent[t](n.default.CAMERA_3D_STOP_SHAKE,this.onCameraStopShake,this),cc.systemEvent[t](n.default.CAMERA_3D_ROTATE,this.onCameraRotate,this),cc.systemEvent[t](n.default.CAMERA_3D_SET_TARGET,this.onCameraSetTarget,this),cc.systemEvent[t](n.default.GET_CAMERA_NODE,this.onGetCameraNode,this),cc.systemEvent[t](n.default.SET_CAMERA_3D_OFFSET,this.onSetCameraOffset,this)},_resize:function(){if(this.cameraSetups[this.currentCameraSetupIndex]){var e=my.settings.IS_LANDSCAPE?"landscape":"portrait",t=this.cameraSetups[this.currentCameraSetupIndex];this._target=t.target,this._camera.zoomRatio=t.zoom[e],this._followOffset=t.followOffset.clone(),this._followRotation=t.followRotation.clone(),this._zoomTween&&this._zoomTween.stop(),this._followOffsetTween&&this._followOffsetTween.stop(),this._followRotationTween&&this._followRotationTween.stop()}},_cameraTransit:function(e,t){if(void 0===t&&(t=.5),this.cameraSetups[e]){var i=this.cameraSetups[e],n=my.settings.IS_LANDSCAPE?"landscape":"portrait";this._target=i.target,this._zoomTween&&this._zoomTween.stop(),this._zoomTween=my.tweenManager.add(this._camera,{zoomRatio:i.zoom[n]},t),this._followOffsetTween&&this._followOffsetTween.stop(),this._followOffsetTween=my.tweenManager.add(this._followOffset,{x:i.followOffset.x,y:i.followOffset.y,z:i.followOffset.z},t),this._followRotationTween&&this._followRotationTween.stop(),this._followRotationTween=my.tweenManager.add(this._followRotation,{x:i.followRotation.x,y:i.followRotation.y,z:i.followRotation.z},t),this.currentCameraSetupIndex=e}},onSizeChange:function(){this._resize()},onCameraStartShake:function(e){var t=this,i=0;this._shakeTween=my.tweenManager.add(this._currentShakeOffset,{x:this.cameraShakeBounds.x,y:this.cameraShakeBounds.y,z:this.cameraShakeBounds.z},.05),this._shakeTween.pingPong(),this._shakeTween.onComplete=function(){e<=++i&&t._shakeTween&&(t._shakeTween.stop(),t._currentShakeOffset=cc.Vec3.ZERO)}},onCameraStopShake:function(){this._shakeTween&&this._shakeTween.stop(),this._currentShakeOffset=cc.v3()},onCameraRotate:function(e,t){this._followRotation.x=e,this._followRotation.y=t},onCameraSetTarget:function(e){e instanceof cc.Node&&(this.cameraSetups[this.currentCameraSetupIndex].target=e,this._target=e)},onSetCameraOffset:function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=.5),e&&this.cameraSetups[this.currentCameraSetupIndex]&&(this.cameraSetups[t].target=e,this._target=e),this._cameraTransit(t,i)},onGetCameraNode:function(e){e instanceof Function&&e(this.node)}}),cc._RF.pop()},{GameEvent:"GameEvent"}],CameraController:[function(e,t){"use strict";cc._RF.push(t,"2a62bSfTktI/qH2ZrEM5f1n","CameraController");var i=a(e("GameEvent")),n=a(e("CameraBoxes"));function a(e){return e&&e.__esModule?e:{default:e}}var o=cc.Enum({None:0,Top:1,Bot:2,Right:3,Left:4}),r=cc.Class({properties:{stickMode:{default:o.None,type:o},defaultBox:{type:cc.Node,get:function(){return this._defaultBox},set:function(e){e instanceof cc.Node&&(this._defaultBox=e)}},_defaultBox:{default:null,type:cc.Node},_oldDefaultBox:{default:null,type:cc.Node,serializable:!1},_transitionDefaultBox:{default:null,type:cc.Node,serializable:!1},_transitionTween:{default:null,serializable:!1},_transitionCoef:{default:0,serializable:!1}},lerpBox:function(e,t,i,n){n||(n=new cc.Node("TransitionBox"));var a=e.getBoundingBoxToWorld(),o=t.getBoundingBoxToWorld();return n.x=a.center.x+(o.center.x-a.center.x)*i,n.y=a.center.y+(o.center.y-a.center.y)*i,n.width=a.width+(o.width-a.width)*i,n.height=a.height+(o.height-a.height)*i,n},name:"CaptureBoxHelper"});cc.Class({extends:cc.Component,properties:{focus:{default:cc.v2(.5,.5),visible:function(){return!this.isUsingCameraBoxes}},isUsingCameraBoxes:!1,zoom:1,cameraBoxes:{default:function(){return new r},visible:function(){return this.isUsingCameraBoxes},type:r},deltaShake:{default:cc.Vec2.ZERO,visible:!1},_camera:{default:null,serializable:!1},_settings:{default:null,serializable:!1},_animation:{default:null,serializable:!1},_defaultZoomRatio:{default:1,serializable:!1},_currentZoomRatio:{default:1,serializable:!1},_isPendingToResizeCamera:{default:!1,serializable:!1}},onLoad:function(){this._camera||(this._camera=this.node.getComponent(cc.Camera)),this._animation=this.node.getComponent(cc.Animation),this.cameraBoxes._transitionDefaultBox=new cc.Node("TransitionDefaultBox"),this.cameraBoxes._transitionDefaultBox.setParent(cc.director.getScene()),this._subscribeEvents()},update:function(){this._isPendingToResizeCamera&&(this._isPendingToResizeCamera=!1,this.captureTarget()),this._updatePosition(),this.captureTarget()},captureTarget:function(e,t,i){var a=1;if(e instanceof n.default&&this._setTransitionToBoxes(e,t,i),this.cameraBoxes.defaultBox){var o=this.cameraBoxes.defaultBox.width,r=this.cameraBoxes.defaultBox.height,s=my.settings.GAME_WIDTH/o,c=my.settings.GAME_HEIGHT/r;a=s<c?s:c}this._setZoomRatio(a)},_subscribeEvents:function(){cc.systemEvent.on(i.default.CAMERA_CAPTURE_TARGET,this.captureTarget,this),cc.systemEvent.on(i.default.SIZE_CHANGE,this.onSizeChange,this),cc.systemEvent.on(i.default.ZOOM_CAMERA,this.onZoomCamera,this),cc.systemEvent.on(i.default.SET_DEFAULT_BOX,this.onSetDefaultBox,this)},_updatePosition:function(){if(this.cameraBoxes.defaultBox){var e=this.cameraBoxes.defaultBox.convertToWorldSpaceAR(cc.Vec2.ZERO),t=cc.v2(this._camera.width*(this.cameraBoxes.defaultBox.anchorX-this.focus.x),this._camera.height*(this.cameraBoxes.defaultBox.anchorX-this.focus.y)),i=e.add(t);this._checkStickPosition(i);var n=this.node.parent.convertToNodeSpaceAR(i);this.node.setPosition(n.add(this.deltaShake))}},_checkStickPosition:function(e){switch(cc.view.getVisibleSize(),this.cameraBoxes.stickMode){case o.Top:e.y=e.y-.5*(this._camera.height-this.cameraBoxes.defaultBox.height);break;case o.Bot:e.y=e.y+.5*(this._camera.height-this.cameraBoxes.defaultBox.height);break;case o.Right:e.x=e.x-.5*(this._camera.width-this.cameraBoxes.defaultBox.width);break;case o.Left:e.x=e.x+.5*(this._camera.width-this.cameraBoxes.defaultBox.width)}},_setTransitionToBoxes:function(e,t,i){var n=this;void 0===t&&(t=0),void 0===i&&(i="linear"),this.cameraBoxes._transitionTween&&(this.cameraBoxes._transitionTween.stop(),this.cameraBoxes._transitionTween=null),t>0?(this.cameraBoxes._transitionCoef=0,this.cameraBoxes._oldDefaultBox=this.cameraBoxes.defaultBox,this.cameraBoxes._transitionTween=my.tweenManager.add(this.cameraBoxes,{_transitionCoef:1},t,"linear"),this.cameraBoxes._transitionTween.addCompleteCallback(function(){n.cameraBoxes._transitionTween=null,n._setNewBox(e)}),this.cameraBoxes._transitionTween.onUpdate=function(){e&&(n.cameraBoxes.lerpBox(n.cameraBoxes._oldDefaultBox,e,n.cameraBoxes._transitionCoef,n.cameraBoxes._transitionDefaultBox),n.cameraBoxes.defaultBox=n.cameraBoxes._transitionDefaultBox)}):this._setNewBox(e)},_setNewBox:function(e){this.cameraBoxes.defaultBox=e},_setZoomRatio:function(e){this._defaultZoomRatio=e,this._currentZoomRatio=this.zoom?e*this.zoom:e,this._camera.zoomRatio=this._currentZoomRatio,this._camera.width=my.settings.GAME_WIDTH/this._camera.zoomRatio,this._camera.height=my.settings.GAME_HEIGHT/this._camera.zoomRatio},onZoomCamera:function(e,t,i,n){var a=this;void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n="linear");var o="number"==typeof e,r="string"==typeof e;cc.Node,this.scheduleOnce(function(){a._zoomTween&&(a._zoomTween.stop(),a._zoomTween=null),a._animation&&a._animation.stop(),o?0===t?a.zoom=e:(a._zoomTween=my.tweenManager.add(a,{zoom:e},t,n),a._zoomTween.start(),a._zoomTween.addCompleteCallback(function(){a._zoomTween=null})):r&&a._animation&&a._animation.play(e)},i)},onSetDefaultBox:function(e,t){var i=this.cameraBoxes.defaultBox?t:-1;this._setTransitionToBoxes(e,i)},onSizeChange:function(){this._isPendingToResizeCamera=!0}}),cc._RF.pop()},{CameraBoxes:"CameraBoxes",GameEvent:"GameEvent"}],CameraManager:[function(e,t){"use strict";cc._RF.push(t,"ebbf8KleyNFE56iwifU5Zqk","CameraManager");var i=o(e("GameEvent")),n=o(e("ShakeType")),a=o(e("CameraController"));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=s(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}function s(e,t){if(e){if("string"==typeof e)return c(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var l=cc.Class({name:"ShakeClip",properties:{clip:{default:null,type:cc.AnimationClip},shakeType:{default:n.default.None,type:n.default}}});cc.Class({extends:cc.Component,properties:{shakedCameras:{default:[],type:[a.default]},shakeClips:{default:[],type:[l]},_animation:{default:null,serializable:!1,type:cc.Animation},_isShaking:{default:!1,serializable:!1}},onLoad:function(){this._animation=this.node.getComponent(cc.Animation)||this.node.addComponent(cc.Animation),this.node.setPosition(cc.Vec2.ZERO),cc.systemEvent.on(i.default.CAMERA_SHAKE,this.onCameraShake,this)},update:function(){this._isShaking&&this._updateCamerasDelta(cc.v2(this.node.position))},_searchClip:function(e){for(var t,i=null,n=r(this.shakeClips);!(t=n()).done;){var a=t.value;if(a.shakeType===e){i=a.clip;break}}return i},_updateCamerasDelta:function(e){if(e instanceof cc.Vec2)for(var t,i=r(this.shakedCameras);!(t=i()).done;){var n=t.value;n&&(n.deltaShake=e)}},onCameraShake:function(e){if(!this._isShaking){var t=this._searchClip(e);this._animation&&t&&(this._isShaking=!0,this._animation.addClip(t),this._animation.play(t.name))}},onShakeComplete:function(){this._isShaking=!1,this.node.setPosition(cc.Vec2.ZERO),this._updateCamerasDelta(cc.Vec2.ZERO)}}),cc._RF.pop()},{CameraController:"CameraController",GameEvent:"GameEvent",ShakeType:"ShakeType"}],Canvas:[function(e,t){"use strict";cc._RF.push(t,"7abc9GD8e5P3qylyTYy4pGW","Canvas");var i=s(e("GameEvent")),n=s(e("LineDrawBuffer")),a=s(e("UiElement")),o=s(e("EffectType")),r=s(e("ValueType"));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=l(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}function l(e,t){if(e){if("string"==typeof e)return u(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var h=cc.Enum({Linear:0}),d=cc.Enum({CompleteContour:0,CompleteContourClear:1,NewLineToUch:2});cc.Class({extends:a.default,editor:{menu:"Draw/Canvas"},properties:{lineWidth:1,lineCap:{default:cc.Graphics.LineCap.SQUARE,type:cc.Graphics.LineCap},lineJoin:{default:cc.Graphics.LineJoin.ROUND,type:cc.Graphics.LineJoin},drawType:{default:d.CompleteContour,type:d},color:cc.Color.BLACK,lineRounding:{default:h.Linear,type:h},render:{default:null,type:cc.Node},input:{default:null,type:cc.Node},positionOnHide:cc.Vec2.ZERO,isHideOnStart:!0,_pictureHolder:{default:null,type:cc.Node,serializable:!1},_graphics:{default:null,type:cc.Graphics,serializable:!1},_drawBuffer:{default:null,serializable:!1},_isDrawing:{default:!1,serializable:!1},_recolorTween:{default:null,type:my.Tween,serializable:!1},_recolorValue:{default:0,serializable:!1},_recolorTime:{default:.4,serializable:!1},_isGlobalDisable:{default:!1,serializable:!1}},onLoad:function(){this._createGraphics(),this._createLineHelper(),this._init()},onEnable:function(){this._toggleEventSubscription(!0)},onDisable:function(){this._toggleEventSubscription(!1)},_init:function(){this.render&&this.input&&(this.isHideOnStart?(this.hide(0),this.render.setPosition(this.positionOnHide),this.input.active=!1,this._toggleInput(!1)):(this.input.active=!0,this._toggleInput(!0)))},_toggleEventSubscription:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.DISABLE_INPUT_CANVAS,this.onDisableInputCanvas,this),cc.systemEvent[t](i.default.CLEAR_CANVAS,this.onClearCanvas,this)},_toggleInput:function(e){if(!this._isGlobalDisable){var t=e?"on":"off";cc.systemEvent[t](i.default.DRAW_CANVAS_DOWN,this.onDown,this),cc.systemEvent[t](i.default.DRAW_CANVAS_MOVE,this.onMove,this),cc.systemEvent[t](i.default.DRAW_CANVAS_UP,this.onUp,this)}},_createGraphics:function(){this._pictureHolder=new cc.Node("PictureHolder"),this._pictureHolder.setParent(this.node),this.contourShakeClip&&(this._holderAnimation=this._pictureHolder.addComponent(cc.Animation),this._holderAnimation.addClip(this.contourShakeClip)),this._graphics=this._pictureHolder.addComponent(cc.Graphics),this._setGraphicsSettingsForDraw()},_setGraphicsSettingsForDraw:function(){var e=this._pictureHolder.getWorldMatrix(cc.mat4()).getScale().y;this._graphics.lineWidth=this.lineWidth/e,this._graphics.lineCap=this.lineCap,this._graphics.lineJoin=this.lineJoin,this._graphics.strokeColor=this.color},_createLineHelper:function(){switch(this.lineRounding){case h.Linear:default:this._drawBuffer=new n.default.Linear}},_startLine:function(e){if(!this._isDrawing){this._isDrawing=!0;var t=this._pictureHolder.convertToNodeSpaceAR(e);switch(this.drawType){case d.CompleteContourClear:this._graphics.clear(),this._graphics.moveTo(t.x,t.y);break;case d.NewLineToUch:this._graphics.moveTo(t.x,t.y),this._graphics.close();break;case d.CompleteContour:default:this._graphics.moveTo(t.x,t.y)}this._drawBuffer&&this._drawBuffer.move(e)}},_continueLine:function(e){this._isDrawing&&(this._drawBuffer&&this._drawBuffer.move(e),this._drawLine())},_endLine:function(){if(this._isDrawing)switch(this.drawType){case d.CompleteContourClear:this._drawLine(),this._completeContour(),this._isDrawing=!1;break;case d.CompleteContour:break;case d.NewLineToUch:this._isDrawing=!1}},_completeContour:function(){if(this._drawBuffer){this._graphics.clear();var e=[].concat(this._drawBuffer.buffer),t=this._convertPoints(e);this._getPictureSize(t),this.lineWidth,this.lineJoin,this.lineCap,this.color}},_convertPoints:function(e){for(var t,i=this._getCentroid2(e),n=c(e);!(t=n()).done;)t.value.subSelf(i);return e},_getPictureSize:function(e){for(var t,i=1e8,n=1e8,a=-1e8,o=-1e8,r=c(e);!(t=r()).done;){var s=t.value;s&&(i=Math.min(i,s.x),n=Math.min(n,s.y),a=Math.max(a,s.x),o=Math.max(o,s.y))}var l=cc.size(a-i,o-n);return l.width=0===l.width?10:l.width,l.height=0===l.height?10:l.height,l},_getCentroid2:function(e){for(var t,i=cc.Vec2.ZERO,n=c(e);!(t=n()).done;){var a=t.value;i.addSelf(a)}return i.divSelf(e.length),i},_drawLine:function(){for(var e,t=[],i=c(this._drawBuffer.points);!(e=i()).done;){var n=e.value;n&&t.push(this._pictureHolder.convertToNodeSpaceAR(n))}switch(this.lineRounding){case h.Linear:default:this._drawLinear.apply(this,t)}},_drawLinear:function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),e&&t&&(this._graphics.moveTo(e.x,e.y),this._graphics.lineTo(t.x,t.y),this._graphics.stroke())},_clear:function(){this._drawBuffer&&this._drawBuffer.clear(),this._graphics.clear()},_recolor:function(e){if(this._drawBuffer){this._graphics.clear();for(var t,i=!1,n=c(this._drawBuffer.buffer);!(t=n()).done;){var a=t.value;if(a){var o=this._pictureHolder.convertToNodeSpaceAR(a);i?this._graphics.lineTo(o.x,o.y):(i=!0,this._graphics.moveTo(o.x,o.y))}else i=!1}this._graphics.strokeColor=e,this._graphics.stroke()}},_smoothRecolor:function(e,t,i){var n=this;void 0===i&&(i=0),e&&t&&(0!==i?(this._recolorTween&&this._recolorTween.stop(),this._recolorValue=0,this._recolorTween=my.tweenManager.add(this,{_recolorValue:1},i),this._recolorTween.onUpdate=function(){n._recolor(e.lerp(t,n._recolorValue))},this._recolorTween.onComplete=function(){n._recolorTween=null,n._recolor(t)}):this._recolor(t))},onDown:function(e,t){t.node.getBoundingBoxToWorld().contains(e.worldPosition)&&this._startLine(e.worldPosition)},onMove:function(e,t){t.node.getBoundingBoxToWorld().contains(e.worldPosition)&&this._continueLine(e.worldPosition)},onUp:function(e){this._endLine(e.worldPosition)},onToggleCanvas:function(e){this.isActiveElement=e},onDisableInputCanvas:function(e){var t=this;this._toggleInput(!1),cc.systemEvent.emit(i.default.SPAWN_EFFECT,{type:o.default.FxLoad,parent:this.node,zIndex:1,position:cc.Vec2.ZERO,scale:cc.Vec2.ONE,addedTime:1.5}),my.tweenManager.add(this._pictureHolder,{scaleY:0},2,"linear",!0).onComplete=function(){t._clear(),t._isGlobalDisable=!0,t._pictureHolder.setScale(cc.Vec2.ONE),e instanceof Function&&e(),cc.systemEvent.emit(i.default.CHANGE_VALUE,r.default.DrawComplete,{addition:-1})}},onClearCanvas:function(){var e=this;this._isGlobalDisable=!0,my.tweenManager.add(this._pictureHolder,{scaleY:0},2,"linear",!0).onComplete=function(){e._clear()}},onSwitchActiveCallback:function(e){var t=e?cc.Vec2.ZERO:this.positionOnHide,i=e?cc.Vec2.ONE:cc.Vec2.ZERO;e?this.show(.7):this.hide(.5),this._toggleInput(e),(this.input||this.render)&&(my.tweenManager.add(this.render,{x:t.x,y:t.y},.3,"linear",!0),my.tweenManager.add(this.render,{scaleX:i.x},.5,"linear",!0),my.tweenManager.add(this.render,{scaleY:i.y},.3,"linear",!0),this.input.active=e)}}),cc._RF.pop()},{EffectType:"EffectType",GameEvent:"GameEvent",LineDrawBuffer:"LineDrawBuffer",UiElement:"UiElement",ValueType:"ValueType"}],Character:[function(e,t,i){"use strict";cc._RF.push(t,"9f0f7pAeSNAsaJULR7Hrk1P","Character"),i.__esModule=!0,i.DelayAnim=i.Character=void 0;var n=s(e("AnimationConfig")),a=s(e("PersonaType")),o=s(e("GameObject")),r=s(e("GameObjectType"));function s(e){return e&&e.__esModule?e:{default:e}}s(e("GameEvent"));var c=cc.Class({properties:{prefab:{default:r.default.None,type:r.default},offset:cc.Vec3.ZERO,rotation:cc.Vec3.ZERO,nodeToSet:cc.Node},name:"SettingsHelper"}),l=cc.Class({properties:{weapon:{default:function(){return new c},type:c},hat:{default:function(){return new c},type:c}},name:"Persona3DHelper"}),u=cc.Class({properties:{isUseSpine:!0,personaType:{default:0,type:a.default},spinePersona:{default:null,type:cc.Node,visible:function(){return this.isUseSpine}},isUse3DMesh:!1,skeleton3DAnimation:{default:null,type:cc.SkeletonAnimation,visible:function(){return this.isUse3DMesh}},meshHelper:{default:function(){return new l},type:l,visible:function(){return this.isUse3DMesh}}},name:"Persona"}),h=cc.Class({properties:{min:0,max:0},name:"DelayAnim"});i.DelayAnim=h;var d=cc.Class({extends:o.default,properties:{persona:{default:function(){return new u},type:u},isControlBaitAnimation:!1,delayAnimation:{default:function(){return new h},type:h,visible:function(){return this.isControlBaitAnimation}},isAlive:{default:!0,notify:function(e){e!==this.isAlive&&this.onAliveCallback()},visible:!1},_config:{default:function(){return new n.default},type:n.default},_currentCharacter:{default:null,serializable:!1},_animationDelay:{default:0,serializable:!1},_canPlayBaitAnimation:{default:!0,serializable:!1},_delayAnimationTime:{default:0,serializable:!1},_currentAnimation:{default:null,serializable:!1},_isStartCounter:{default:!0,serializable:!1},_currentSpineSkeleton:{default:null,serializable:!1},_rotationTween:{default:null,serializable:!1,override:!0},_quat:{default:null,serializable:!1,override:!0}},onLoad:function(){var e=this;this._quat=cc.quat(),this._currentCharacter=this._config[a.default[this.persona.personaType]],this.persona.spinePersona&&(this._currentSpineSkeleton=this.persona.spinePersona.getComponent(sp.Skeleton)),this._currentSpineSkeleton&&(this._currentCharacter&&this._currentCharacter.animation.idle&&this.switchAnimationCharacter(this._currentCharacter.animation.idle,"set",!0),this._currentSpineSkeleton.setEventListener(function(t,i){e.animationEventController(t,i)}))},start:function(){this._getRandomTimeDelayAnimation()},update:function(){this._baitAnimationUpdate()},animationEventController:function(e,t){cc.log(t)},switchAnimationCharacter:function(e,t,i,n){void 0===t&&(t="set"),void 0===i&&(i=!1),void 0===n&&(n=0);var a="set"===t?"setAnimation":"addAnimation";if(this._currentAnimation=e,this._currentSpineSkeleton)return this._currentSpineSkeleton[a](n,e,i)},rotateToPosition:function(e,t,i){var n=this;void 0===t&&(t=.35),this._rotationTween&&this._rotationTween.stop();var a=this.node.eulerAngles.clone();this.node.lookAt(e.getPosition(),cc.Vec3.UP);var o=new cc.Vec3(0,this.node.eulerAngles.y-180,0),r={_interpolation:0},s=cc.quat().fromEuler(a),c=cc.quat().fromEuler(o);this.node.eulerAngles=a,this._rotationTween=my.tweenManager.add(r,{_interpolation:1},t,"linear",!0),this._rotationTween.addUpdateCallback(function(){cc.Quat.slerp(n._quat,s,c,r._interpolation),n.node.setRotation(n._quat)}),this._rotationTween.onComplete=function(){i instanceof Function&&i(),n._quat=cc.quat()}},rotateTo:function(e,t,i){var n=this;void 0===t&&(t=.3),this._rotationTween&&this._rotationTween.stop();var a={_interpolation:0};this._startQuat=this.node.quat,this._targetQuat=cc.quat().fromEuler(e),this._rotationTween=my.tweenManager.add(a,{_interpolation:1},t,"sineInOut",!1),this._rotationTween.addUpdateCallback(function(){cc.Quat.slerp(n._quat,n._startQuat,n._targetQuat,a._interpolation),n.node.setRotation(n._quat)}),this._rotationTween.start(),this._rotationTween.onComplete=function(){i instanceof Function&&i()}},_baitAnimationUpdate:function(e){this._isStartCounter&&this._currentCharacter&&this._currentAnimation===this._currentCharacter.animation.idle&&this.isControlBaitAnimation&&(this._animationDelay<this._delayAnimationTime&&this._animationDelay+e>=this._delayAnimationTime&&this._canPlayBaitAnimation&&this._playBaitAnimation(),this._animationDelay+=e)},_getBone:function(e){if(this._currentSpineSkeleton)return this._currentSpineSkeleton.findBone(e)},_rechargeUpdateAnimations:function(){this._canPlayBaitAnimation=!0,this._animationDelay=0},_playBaitAnimation:function(){this._canPlayBaitAnimation=!1,this._getRandomTimeDelayAnimation(),this._currentCharacter.animation.bait&&this.switchAnimationCharacter(this._currentCharacter.animation.bait)},_getRandomTimeDelayAnimation:function(){this._delayAnimationTime=my.utilities.randomRange(this.delayAnimation.min,this.delayAnimation.max)},_getArraySkins:function(){if(this._currentCharacter){var e=[];for(var t in this._currentCharacter.skin)e.push(this._currentCharacter.skin[t]);return e}},_upGradeCharacter:function(e){this._currentSpineSkeleton&&e&&(this._currentSpineSkeleton.setSkin(e),this._currentSpineSkeleton.setSlotsToSetupPose())},onAliveCallback:function(){}});i.Character=d,cc._RF.pop()},{AnimationConfig:"AnimationConfig",GameEvent:"GameEvent",GameObject:"GameObject",GameObjectType:"GameObjectType",PersonaType:"PersonaType"}],CloseButtonInputCommand:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}cc._RF.push(t,"c206aT/LbhNvrtiKo6Tq2Fb","CloseButtonInputCommand"),i.__esModule=!0,i.default=void 0,n(e("GameEvent"));var a=function(e){var t,i;function n(t){return e.call(this,t)||this}return i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i,n.prototype.onDown=function(){try{closeTab()}catch(e){cc.log("Close Button")}},n}(n(e("IInputCommand")).default);i.default=a,t.exports=i.default,cc._RF.pop()},{GameEvent:"GameEvent",IInputCommand:"IInputCommand"}],DataDictionary:[function(e,t){"use strict";cc._RF.push(t,"8bacaIc0xxD7L2RC2wQamct","DataDictionary");var i=a(e("DataType")),n=a(e("GameEvent"));function a(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{PREVIEW:{default:!1,editorOnly:!0},dataType:{default:i.default.None,type:i.default,notify:function(){-1===this._convertDataType.indexOf(this.dataType)&&(this._convertDataType.push(this.dataType),this._data.push(null)),this.data=this._data[this._convertDataType.indexOf(this.dataType)]}},data:{default:null,type:cc.JsonAsset,notify:function(){this.dataType===i.default.None||null!==this.data&&!this.data||(this._data[this._convertDataType.indexOf(this.dataType)]=this.data)},visible:function(){return this.dataType!==i.default.None}},convertDataType:{get:function(){return this._convertDataType},type:[i.default],visible:function(){return this.PREVIEW}},_convertDataType:{default:function(){return[i.default.None]},type:[i.default]},_data:{default:function(){return[null]},type:[cc.JsonAsset]}},onLoad:function(){this._subscribeEvents(!0)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](n.default.GET_DATA,this.onGetData,this)},_getData:function(e){var t=this._convertDataType.indexOf(e);return-1!==t?this._data[t]:null},onGetData:function(e,t){var i=this._getData(e);t instanceof Function&&t(i)}}),cc._RF.pop()},{DataType:"DataType",GameEvent:"GameEvent"}],DataType:[function(e,t){"use strict";cc._RF.push(t,"1a8f4Kc8wxOE7veGVvJCjLp","DataType");var i=cc.Enum({None:0,LevelPink:153,LevelGreen:154,Keyboard:156});t.exports=i,cc._RF.pop()},{}],DeleteKey:[function(e,t){"use strict";cc._RF.push(t,"879efYzKxBBopWxJCXtKtxQ","DeleteKey");var i,n=(i=e("KeyPressAbstract"))&&i.__esModule?i:{default:i};cc.Class({extends:n.default,properties:{},start:function(){},onDown:function(e){this._super(e)},onUp:function(e){this._super(e),this.node.getBoundingBoxToWorld().contains(e.worldPosition)&&this.keyBoardGlobal&&this.keyBoardGlobal.keySend instanceof Function&&this.keyBoardGlobal.deleteKey()}}),cc._RF.pop()},{KeyPressAbstract:"KeyPressAbstract"}],DictionaryValue:[function(e,t,i){"use strict";cc._RF.push(t,"7283emJ2UxKubn1UbXdTYyw","DictionaryValue"),i.__esModule=!0,i.default=void 0;var n=o(e("GameEvent")),a=o(e("ValueType"));function o(e){return e&&e.__esModule?e:{default:e}}var r=cc.Class({name:"ValueHelper",properties:{value:{default:0,notify:function(e){e!==this.value&&this.changeEvent!==n.default.None&&cc.systemEvent.emit(this.changeEvent,this.value)}},changeEvent:{default:n.default.None,type:n.default}}}),s=cc.Class({extends:cc.Component,properties:{PREVIEW:{default:!1,editorOnly:!0},valueType:{default:a.default.None,type:a.default,notify:function(){-1===this._convertValueType.indexOf(this.valueType)&&(this._convertValueType.push(this.valueType),this._values.push(null)),this.value=this._values[this._convertValueType.indexOf(this.valueType)]},serializable:!1},value:{default:null,type:r,notify:function(){this.valueType!==a.default.None&&this.value instanceof r&&(this._values[this._convertValueType.indexOf(this.valueType)]=this.value)},visible:function(){return this.valueType!==a.default.None},serializable:!1},values:{get:function(){return this._values},type:[r],visible:function(){return this.PREVIEW}},convertValueType:{get:function(){return this._convertValueType},type:[a.default],visible:function(){return this.PREVIEW}},_values:{default:[],type:[r]},_convertValueType:{default:[],type:[a.default]}},onLoad:function(){cc.systemEvent.on(n.default.GET_VALUE,this.onGetValue,this),cc.systemEvent.on(n.default.CHANGE_VALUE,this.onChangeValue,this)},getValueHelper:function(e){var t=this.convertValueType.indexOf(e);return-1===t?null:this.values[t]},onGetValue:function(e,t){var i=this.getValueHelper(e);t instanceof Function&&i instanceof r&&t(i.value)},onChangeValue:function(e,t){var i=this.getValueHelper(e);i instanceof r&&(t instanceof Object?("number"==typeof t.value&&(i.value=t.value),"number"==typeof t.addition&&(i.value+=t.addition)):"number"==typeof t&&(i.value=t))}});i.default=s,t.exports=i.default,cc._RF.pop()},{GameEvent:"GameEvent",ValueType:"ValueType"}],Direction:[function(e,t,i){"use strict";cc._RF.push(t,"575446sGxlDzIJpQhKurAq9","Direction"),i.__esModule=!0,i.default=void 0;var n=cc.Enum({None:0,Right:1e3,Left:1001,Up:1002,Down:1003});i.default=n,t.exports=i.default,cc._RF.pop()},{}],DrawAreaInputCommand:[function(e,t,i){"use strict";cc._RF.push(t,"13560xwFglPXa5qFZ+7LQ/u","DrawAreaInputCommand"),i.__esModule=!0,i.default=void 0;var n=a(e("GameEvent"));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t,i;function a(t){return e.call(this,t)||this}i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var o=a.prototype;return o.onDown=function(e,t){if(-1===this._currentTouchID){this.createTouch(e,t);var i=this.getTouchInfo(e,t);this._currentTouchID=e._id,cc.systemEvent.emit(n.default.DRAW_CANVAS_DOWN,i,t)}},o.onMove=function(e,t){if(this._currentTouchID===e._id){var i=this.getTouchInfo(e,t);cc.systemEvent.emit(n.default.DRAW_CANVAS_MOVE,i,t)}},o.onUp=function(e,t){if(this._currentTouchID===e._id){this._currentTouchID=-1;var i=this.getTouchInfo(e,t);cc.systemEvent.emit(n.default.DRAW_CANVAS_UP,i,t),this.destroyTouch(e)}},a}(a(e("IInputCommand")).default);i.default=o,t.exports=i.default,cc._RF.pop()},{GameEvent:"GameEvent",IInputCommand:"IInputCommand"}],DrawButtonInputCommand:[function(e,t,i){"use strict";cc._RF.push(t,"deb438xXCdJs6gl3mwvC8se","DrawButtonInputCommand"),i.__esModule=!0,i.default=void 0;var n=a(e("GameEvent"));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t,i;function a(t){var i;return(i=e.call(this,t)||this)._isPress=!1,i}return i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i,a.prototype.onDown=function(){this._isPress||(this._isPress=!0,cc.systemEvent.emit(n.default.DISABLE_INPUT_CANVAS))},a}(a(e("IInputCommand")).default);i.default=o,t.exports=i.default,cc._RF.pop()},{GameEvent:"GameEvent",IInputCommand:"IInputCommand"}],DrawInputCommand:[function(e,t,i){"use strict";cc._RF.push(t,"c9911r4zaNFd7jtAC7SPen8","DrawInputCommand"),i.__esModule=!0,i.default=void 0;var n=a(e("GameEvent"));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t,i;function a(t){var i;return(i=e.call(this,t)||this)._currentTouch=null,i}i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var o=a.prototype;return o.onDown=function(e,t){if(-1===this._currentTouchID){this._currentTouch=this.createTouch(e,t),this._currentTouchID=e._id;var i=this.getTouchInfo(e,t);cc.systemEvent.emit(n.default.DRAW_CANVAS_DOWN,i,t)}},o.onMove=function(e,t){if(-1===this._currentTouchID){var i=this.getTouchInfo(e,t);cc.systemEvent.emit(n.default.DRAW_CANVAS_MOVE,i,t)}},o.onUp=function(e,t){if(this._currentTouchID===e._id){var i=this.getTouchInfo(e,t);cc.systemEvent.emit(n.default.DRAW_CANVAS_UP,i,t),this._currentTouch=null,this._currentTouchID=-1,this.destroyTouch(e)}},a}(a(e("IInputCommand")).default);i.default=o,t.exports=i.default,cc._RF.pop()},{GameEvent:"GameEvent",IInputCommand:"IInputCommand"}],DrawWeapon:[function(e,t){"use strict";cc._RF.push(t,"27877akyNRMvbsGzDZXJg6p","DrawWeapon");var i=r(e("GameEvent")),n=r(e("EffectType")),a=r(e("GameObject")),o=r(e("PhysicsHelper"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=c(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}cc.Class({extends:a.default,properties:{velocity:{default:1500,visible:!1},gravityScale:{default:1,visible:!1},density:{default:1,visible:!1},minSize:{default:cc.size(10,10),visible:!1},maxSize:{default:cc.size(150,150),visible:!1},graphics:{default:null,type:cc.Graphics},trailBlue:{default:null,type:cc.MotionStreak},trailWhite:{default:null,type:cc.MotionStreak},_physicsHelper:{default:null,serializable:!1},_rigidBody:{default:null,type:cc.RigidBody,serializable:!1},_currentDrawParams:{default:null,serializable:!1}},initFromPool:function(){this.subscribeEvents(!0)},prepareReturnToPool:function(){this.graphics.clear(),this._physicsHelper.removePhysicsComponents(),this.subscribeEvents(!1),cc.systemEvent.emit(i.default.SPAWN_EFFECT,{type:n.default.FxMagicDestroy,parent:this.world.node,position:this.node.getPosition(),scale:new cc.Vec2(2,2),zIndex:30})},specify:function(e){for(var t in e)this.hasOwnProperty(t)&&(this[t]=e[t])},init:function(e){this._currentDrawParams=Object.assign({},e),this._physicsHelper=new o.default({gravityScale:this.gravityScale,density:this.density,friction:.2,fixedRotation:!0}),this._createRender()},launch:function(e,t){this._rigidBody&&(this._rigidBody.linearVelocity=cc.Vec2.RIGHT.rotate(cc.misc.degreesToRadians(e)).mul(t*this.velocity))},createBody:function(){!this._currentDrawParams||this._currentDrawParams.points.length<=0||(this._rigidBody=this._physicsHelper.createPhysicsBodies(this._currentDrawParams.points,this.node,6))},subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.RETURN_WEAPON,this.onReturnWeapon,this)},_createRender:function(){this._currentDrawParams&&(this._scalePoints(),this._createGraphics(),this._scaleTrail())},_scalePoints:function(){for(var e,t=this._currentDrawParams.points,i=cc.size(my.utilities.clamp(this._currentDrawParams.size.width,this.minSize.width,this.maxSize.width),my.utilities.clamp(this._currentDrawParams.size.height,this.minSize.height,this.maxSize.height)),n=i.width/this._currentDrawParams.size.width,a=i.height/this._currentDrawParams.size.height,o=Math.min(n,a),r=s(t);!(e=r()).done;)e.value.mulSelf(o);this._currentDrawParams.points=t,this._currentDrawParams.size.width*=o,this._currentDrawParams.size.height*=o},_scaleTrail:function(){this.trailBlue&&this.trailWhite&&(this.trailBlue.stroke=this._currentDrawParams.size.height,this.trailWhite.stroke=.625*this._currentDrawParams.size.height)},_createGraphics:function(){var e=this.graphics;e.lineWidth=this._currentDrawParams.lineWidth,e.lineCap=this._currentDrawParams.lineCap,e.lineJoin=this._currentDrawParams.lineJoin,e.strokeColor=this._currentDrawParams.color,1===this._currentDrawParams.points.length?this._createDefaultCircle(e):this._createDrawing(e)},_createDefaultCircle:function(e){e.circle(this._currentDrawParams.points[0].x,this._currentDrawParams.points[0].y,.5*this._currentDrawParams.size.width),e.fillColor=this._currentDrawParams.color,e.fill()},_createDrawing:function(e){for(var t,i=!1,n=s(this._currentDrawParams.points);!(t=n()).done;){var a=t.value;a?i?e.lineTo(a.x,a.y):(i=!0,e.moveTo(a.x,a.y)):i=!1}e.stroke()},onBeginContact:function(e,t,n){switch(n.node.group){case"enemy":this.prepareReturnToPool(),cc.systemEvent.emit(i.default.RETURN_TO_POOL,this.node);break;case"ground":cc.systemEvent.emit(i.default.INCREASE_TIME_TURN,2)}},onReturnWeapon:function(){this.prepareReturnToPool(),cc.systemEvent.emit(i.default.RETURN_TO_POOL,this.node)}}),cc._RF.pop()},{EffectType:"EffectType",GameEvent:"GameEvent",GameObject:"GameObject",PhysicsHelper:"PhysicsHelper"}],EditText:[function(e,t){"use strict";cc._RF.push(t,"23130MQYJxA4qHpWUffEoag","EditText");var i,n=(i=e("GameEvent"))&&i.__esModule?i:{default:i};function a(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=o(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}function o(e,t){if(e){if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}cc.Class({extends:cc.Component,properties:{backText:{default:null,type:cc.Node},backItems:{default:[],type:cc.Node},_editBox:{default:null,serializable:!1}},start:function(){this._editBox=this.node.getComponent(cc.EditBox)},disableBack:function(){this.backText&&(this.backText.active=!1),this._toggleItems(!0),cc.systemEvent.emit(n.default.TOGGLE_TUTOR,!1)},changeText:function(){"E"===this._editBox.string&&(this.endEdit(),this._editBox.enabled=!1)},endEdit:function(){var e=this._editBox.string.replace(/[^a-z\u0430-\u044f\u0451]/gi,"");e.length>0?(cc.systemEvent.emit(n.default.TOGGLE_INPUT,!0),cc.systemEvent.emit(n.default.COMPLETE_CONDITION),cc.systemEvent.emit(n.default.TOGGLE_TUTOR_SECOND,!0),cc.systemEvent.emit(n.default.UPDATE_LABEL,e)):(this._editBox.string="",this.backText&&(this.backText.active=!0),cc.systemEvent.emit(n.default.TOGGLE_TUTOR,!0)),this._toggleItems(!1)},_toggleItems:function(e){for(var t,i=a(this.backItems);!(t=i()).done;){var n=t.value;n&&(n.active=e)}}}),cc._RF.pop()},{GameEvent:"GameEvent"}],EffectManager:[function(e,t){"use strict";cc._RF.push(t,"718c1u31INJIoT2x+IKDNhB","EffectManager");var i=o(e("GameEvent")),n=o(e("EffectType")),a=o(e("EffectTimer"));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=s(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}function s(e,t){if(e){if("string"==typeof e)return c(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var l=cc.Class({name:"EffectObject",properties:{prefab:{default:null,type:cc.Prefab},_pool:{default:null,type:my.PoolObject,serializable:!1},_isNeedToReturnPool:{default:!0,serializable:!1},_duration:{default:0,serializable:!1},_systems:{default:[],serializable:!1,type:cc.ParticleSystem}}});cc.Class({extends:cc.Component,properties:{PREVIEW:{default:!1,editorOnly:!0},effectType:{default:n.default.None,type:n.default,notify:function(){-1===this._convertEffectType.indexOf(this.effectType)&&(this._convertEffectType.push(this.effectType),this._effects.push(null)),this.effect=this._effects[this._convertEffectType.indexOf(this.effectType)]}},effect:{default:null,type:l,notify:function(){this.effectType===n.default.None||null!==this.effect&&!this.effect||(this._effects[this._convertEffectType.indexOf(this.effectType)]=this.effect)},visible:function(){return this.effectType!==n.default.None}},effects:{get:function(){return this._effects},type:[l],visible:function(){return this.PREVIEW}},convertEffectType:{get:function(){return this._convertEffectType},type:[n.default],visible:function(){return this.PREVIEW}},_convertEffectType:{default:function(){return[n.default.None]},type:[n.default]},_effects:{default:function(){return[null]},type:[l]}},onLoad:function(){for(var e,t=r(this.effects);!(e=t()).done;){var i=e.value;i&&this._prepareEffect(i)}this._subscribeEvents(!0)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.SPAWN_EFFECT,this.onSpawnEffect,this)},_prepareEffect:function(e){if(e.prefab){e._pool=my.poolManager.poolForObject(e.prefab);var t=e.prefab.data,i=cc.ParticleSystem?t.getComponentsInChildren(cc.ParticleSystem):[],n=my.ParticleEmitter?t.getComponentsInChildren(my.ParticleEmitter):null,o=i.concat(n),s=cc.ParticleSystem?t.getComponent(cc.ParticleSystem):null;t.addComponent(a.default),cc.ParticleSystem&&s instanceof cc.ParticleSystem&&o.push(s);for(var c,l=0,u=r(o);!(c=u()).done;){var h=c.value;cc.ParticleSystem&&h instanceof cc.ParticleSystem?l=(l=l>h.duration?l:h.duration)>h.life+h.lifeVar?l:h.life+h.lifeVar:my.ParticleEmitter&&h instanceof my.ParticleEmitter&&(l=l>h.life.duration?l:h.life.duration)}e._duration=l,e.parent=e.parent||cc.director.getScene()}},_getEffect:function(e){var t=this.convertEffectType.indexOf(e);return-1!==t?this.effects[t]:null},_setInstance:function(e,t,i){var n=my.ParticleManager?e.getComponent(my.ParticleManager):null,o=cc.ParticleSystem?e.getComponentsInChildren(cc.ParticleSystem):[],s=cc.ParticleSystem?e.getComponent(cc.ParticleSystem):null;if(e.setParent(i.parent||t.parent||cc.director.getScene()),e.angle=i.angle||0,i.scale&&e.setScale(i.scale),e.setPosition(i.position||cc.Vec2.ZERO),void 0!==i.isReturnToPool&&null!==i.isReturnToPool&&(t._isNeedToReturnPool=i.isReturnToPool),void 0!==i.zIndex&&null!==i.zIndex&&(e.zIndex=i.zIndex||0),i.group&&(e.group=i.group||this.node.group),e.active=!1,e.active=!0,s&&o.push(s),n&&n.play(),o)for(var c,l=r(o);!(c=l()).done;){var u=c.value;u&&u.resetSystem()}if(t._isNeedToReturnPool){var h=e.getComponent(a.default),d="number"==typeof i.addedTime?t._duration+i.addedTime:t._duration;h.setTimerToReturnToPool(d)}i.callback instanceof Function&&i.callback(e)},onSpawnEffect:function(e,t){var i=this._getEffect(e.type);if(i&&i.prefab){var n=i._pool.pop(function(e){t instanceof Function&&t(e)});n&&this._setInstance(n,i,e)}}}),cc._RF.pop()},{EffectTimer:"EffectTimer",EffectType:"EffectType",GameEvent:"GameEvent"}],EffectTimer:[function(e,t,i){"use strict";cc._RF.push(t,"cb9d7FlykdISraD/zjyf55O","EffectTimer"),i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Component,properties:{},setTimerToReturnToPool:function(e){var t=this;this.scheduleOnce(function(){var e=t.node.getComponent(my.PoolerHelper);e&&e.returnToPool()},e)}});i.default=n,t.exports=i.default,cc._RF.pop()},{}],EffectType:[function(e,t){"use strict";cc._RF.push(t,"d178f/hN7xOo5MyICOOpkPG","EffectType");var i=cc.Enum({None:0,FxDestroy:255,FxLoad:256});t.exports=i,cc._RF.pop()},{}],EnemyMaterialChange:[function(e,t){"use strict";cc._RF.push(t,"56a84F89ZRIoqZDrXXpeEs1","EnemyMaterialChange"),cc.Class({extends:cc.Component,properties:{render:{default:null,type:cc.MeshRenderer},materialChange:{default:null,type:cc.Material,notify:function(){this.updateMaterial(this.materialChange)}}},updateMaterial:function(e){e&&this.render&&this.render.setMaterial(0,e)}}),cc._RF.pop()},{}],Enemy:[function(e,t){"use strict";cc._RF.push(t,"9de5fxk7NJDW4fv7oBqZtLa","Enemy");var i=s(e("GameEvent")),n=e("Character"),a=s(e("ValueType")),o=s(e("GameObject")),r=s(e("GameObjectType"));function s(e){return e&&e.__esModule?e:{default:e}}var c=cc.Enum({Idle:1,Move:2,Charge:3,Hit:4,Dead:5,Explode:6}),l=cc.Class({properties:{countSparks:5,radius:50,offset:cc.Vec3.ZERO,sparkScale:cc.Vec3.ONE,timeCast:1},name:"SparksHelper"});cc.Class({extends:n.Character,properties:{hitCollider:{default:null,type:cc.BoxCollider3D},zoneRadius:{default:null,type:cc.SphereCollider3D},specialRandomTimer:{default:null,type:n.DelayAnim},chargeTime:3,speed:1,hp:100,sparkHelper:{default:function(){return new l},type:l},enemyState:{default:c.Idle,notify:function(e){this.enemyState!==e&&this._switchEnemyState(this.enemyState)},serializable:!1,visible:!1},render:{default:null,type:cc.Node},_isStartSpecialTimer:{default:!1,serializable:!1},_specialRandomTime:{default:0,serializable:!1},_specialTimer:{default:0,serializable:!1},_rigidBody3D:{default:null,serializable:!1},_currentTarget:{default:null,serializable:!1},_isFollowRotate:{default:!1,serializable:!1},_currentHp:{default:0,serializable:!1},_weapon:{default:null,serializable:!1},_currentAnimationState:{default:null,serializable:!1},activeBodyDamage:{default:!1,serializable:!1,visible:!1}},specify:function(e){e&&e.useHat&&this._setObject(this.persona.meshHelper.hat),e&&e.useWeapon&&(this._weapon=this._setObject(this.persona.meshHelper.weapon)),cc.systemEvent.on(i.default.FIND_ENEMY,this.onFindEnemy,this)},onLoad:function(){this._super()},start:function(){var e=this;cc.systemEvent.emit(i.default.FIND_HERO,function(t){e._currentTarget=t})},update:function(e){if(this._isFollowRotate&&this._currentTarget){this.node.lookAt(this._currentTarget,cc.Vec3.UP);var t=new cc.Vec3(0,this.node.eulerAngles.y-180,0);this.node.eulerAngles=t,this._run()}this._isStartSpecialTimer&&(this._specialTimer<this._specialRandomTime&&this._specialTimer+e>=this._specialRandomTime&&(this._isStartSpecialTimer=!1,this._setRandomSpecial()),this._specialTimer+=e)},initFromPool:function(){this.isAlive=!0,this._currentHp=this.hp,this._init()},_init:function(){this.zoneRadius&&(this._quat=cc.quat(),this._currentHp=this.hp,this._rigidBody3D=this.node.getComponent(cc.RigidBody3D),this.hitCollider&&this.hitCollider.on("trigger-enter",this.onTrigger,this),this._subscribeEvents(!0),this.zoneRadius&&(this.zoneRadius.on("trigger-enter",this.onTriggerZone,this),this.zoneRadius.on("trigger-exit",this.onTriggerZone,this),this.zoneRadius.on("trigger-stay",this.onTriggerZone,this))),this.render&&(this._hitAnimation=this.render.getComponent(cc.Animation)),this._setAnimationCharacter(this._currentCharacter.animation.idle),this._toggleWeapon(!1)},_setAnimationCharacter:function(e,t){void 0===t&&(t=1),this.persona.skeleton3DAnimation&&(this._currentAnimationState=this.persona.skeleton3DAnimation.play(e),this._currentAnimationState&&(this._currentAnimationState.speed=t))},_toggleWeapon:function(e){this._weapon&&(this._weapon.active=e)},_getRandomTimeDelayAnimation:function(){this._specialRandomTime=my.utilities.randomRange(this.specialRandomTimer.min,this.specialRandomTimer.max)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.ACTIVE_ZONE,this.onActiveZone,this)},_run:function(e){void 0===e&&(e=1);var t=this.node.convertToWorldSpaceAR(cc.v3(0,0,1)).sub(this.node.convertToWorldSpaceAR(cc.Vec3.ZERO));t.normalize();var i=t.mul(this.speed*e);this._rigidBody3D.setLinearVelocity(i)},_setObject:function(e){if(e.prefab){var t={type:e.prefab},i=this.world.createObject(t);return i&&(i.parent=e.nodeToSet||this.node,i.setPosition(e.offset),i.eulerAngles=e.rotation),i}},_setRandomSpecial:function(){var e=[c.Explode,c.Explode,c.Charge];this.unscheduleAllCallbacks(),this.enemyState=my.utilities.randomElementFromArray(e)},_rechargeSpecial:function(){this._specialTimer=0,this._getRandomTimeDelayAnimation(),this._isStartSpecialTimer=!0},_switchEnemyState:function(e){var t=this;switch(e){case c.Idle:this._rigidBody3D&&this._rigidBody3D.setLinearVelocity(cc.Vec3.ZERO),this._toggleWeapon(!1),this.unscheduleAllCallbacks(),this._setAnimationCharacter(this._currentCharacter.animation.idle,1),this._rotationTween&&this._rotationTween.stop(),this._isFollowRotate=!1,this._isStartSpecialTimer=!1,cc.systemEvent.emit(i.default.TOGGLE_ANNOUNCER,!1);break;case c.Move:this._toggleWeapon(!1),this._setAnimationCharacter(this._currentCharacter.animation.run,1),this._rigidBody3D&&this._rigidBody3D.setLinearVelocity(cc.Vec3.ZERO),this._currentTarget&&this.rotateToPosition(this._currentTarget,.3,function(){t.enemyState===c.Move&&(t._isFollowRotate=!0)}),this._rechargeSpecial(),this.activeBodyDamage=!1,cc.systemEvent.emit(i.default.TOGGLE_ANNOUNCER,!1);break;case c.Charge:this._isFollowRotate=!1,this._rigidBody3D&&this._rigidBody3D.setLinearVelocity(cc.Vec3.ZERO),this._currentTarget&&this.rotateToPosition(this._currentTarget,.3,function(){t.activeBodyDamage=!0,t._setAnimationCharacter(t._currentCharacter.animation.run,5),t._run(3)}),cc.systemEvent.emit(i.default.TOGGLE_ANNOUNCER,!0);break;case c.Hit:this._isFollowRotate=!1,this._rigidBody3D&&this._rigidBody3D.setLinearVelocity(cc.Vec3.ZERO),this._toggleWeapon(!0),this._setAnimationCharacter(this._currentCharacter.animation.hit,1),this.scheduleOnce(function(){t.enemyState=c.Move},2.1);break;case c.Explode:this._isFollowRotate=!1,this._rigidBody3D&&this._rigidBody3D.setLinearVelocity(cc.Vec3.ZERO),this._setAnimationCharacter(this._currentCharacter.animation.hit),this._crateExplosionSparks(),this._toggleWeapon(!0),this.scheduleOnce(function(){t.enemyState=c.Move},this.sparkHelper.timeCast);break;case c.Dead:this._isFollowRotate=!1,this._rigidBody3D&&this._rigidBody3D.setLinearVelocity(cc.Vec3.ZERO),this.isAlive=!1,cc.systemEvent.emit(i.default.TOGGLE_ANNOUNCER,!1)}},_changeHp:function(e){void 0===e&&(e=0),this.isAlive&&(this._currentHp=this._currentHp-e,cc.systemEvent.emit(i.default.CHANGE_PROGRESS_BAR,-e),this._currentHp<=0&&(this.enemyState=c.Dead))},_crateExplosionSparks:function(){for(var e=0;e<this.sparkHelper.countSparks;e++){var t=360/this.sparkHelper.countSparks*e,i={type:r.default.EnemyBullet,transform:{scale:this.sparkHelper.sparkScale,eulerAngles:new cc.Vec3(0,t,0)}},n=this.world.createObject(i);if(n){n.parent=this.world.node,n.position=this.world.node.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(new cc.Vec3(this.sparkHelper.offset)));var a=n.getComponent(o.default),s=n.convertToWorldSpaceAR(cc.v3(0,0,1)).sub(n.convertToWorldSpaceAR(cc.Vec3.ZERO));a.run(s)}}},onAliveCallback:function(){this.isAlive||(this.unscheduleAllCallbacks(),cc.systemEvent.emit(i.default.ENEMY_DEAD,this.node),cc.systemEvent.emit(i.default.CHANGE_VALUE,a.default.EnemyKill,{addition:-1}),cc.systemEvent.emit(i.default.RETURN_TO_POOL,this.node))},onFindEnemy:function(e){e instanceof Function&&e(this.node)},onTrigger:function(e){e.type;var t=e.otherCollider.node;switch(t.group){case"weapon":var n=t.getComponent(o.default);n&&(this._changeHp(n.weaponDamage),cc.systemEvent.emit(i.default.CHANGE_VALUE,a.default.BossHP,{addition:-n.weaponDamage})),cc.systemEvent.emit(i.default.SET_SCORE,my.utilities.randomInt(20,21),this.node.getPosition().addSelf(new cc.Vec3(0,75,0))),this._hitAnimation&&this._hitAnimation.play()}},onTriggerZone:function(e){var t=e.type;switch(e.otherCollider.node.group){case"construction":this.enemyState===c.Charge&&"trigger-enter"===t&&(this.enemyState=c.Move,cc.systemEvent.emit(i.default.CAMERA_3D_START_SHAKE,10));break;case"hero":"trigger-enter"===t&&(this.enemyState===c.Charge&&(this.enemyState=c.Move),this.enemyState===c.Move&&(this.enemyState=c.Hit)),"trigger-stay"===t&&this.enemyState===c.Move&&(this.enemyState=c.Hit)}},onActiveZone:function(){this.enemyState=c.Move,this._rechargeSpecial()},onButtonsShow:function(){this._toggleWeapon(!1),this.unscheduleAllCallbacks(),this.enemyState=c.Idle,this.persona.skeleton3DAnimation&&this.persona.skeleton3DAnimation.pause(),this.hitCollider&&this.hitCollider.off("trigger-enter",this.onTrigger,this),this.zoneRadius&&(this.zoneRadius.off("trigger-enter",this.onTriggerZone,this),this.zoneRadius.off("trigger-exit",this.onTriggerZone,this),this.zoneRadius.off("trigger-stay",this.onTriggerZone,this))}}),cc._RF.pop()},{Character:"Character",GameEvent:"GameEvent",GameObject:"GameObject",GameObjectType:"GameObjectType",ValueType:"ValueType"}],Fail:[function(e,t){"use strict";cc._RF.push(t,"de97c+6CfBBv5TKRGxAjDdG","Fail");var i=a(e("GameEvent")),n=a(e("UiElement"));function a(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:n.default,properties:{delayBack:1,_callback:{default:null,serializable:!1},_animation:{default:null,serializable:!1},_clip:{default:null,serializable:!1}},start:function(){this._subscribeEvents(!0),this._animation=this.node.getComponent(cc.Animation)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.TOGGLE_FAIL,this.onToggleRightWord,this)},onToggleRightWord:function(e){this.unscheduleAllCallbacks(),this._animation&&(this._clip=this._animation.play(),this._clip.wrapMode=cc.WrapMode.Normal),this._callback=e},startBackAnimation:function(){var e=this;this.scheduleOnce(function(){e._callback instanceof Function&&e._callback(),e._clip=e._animation.play(),e._clip.wrapMode=cc.WrapMode.Reverse,e._callback=null},this.delayBack)},onAnimationEvent:function(){this._clip&&this._clip.wrapMode===cc.WrapMode.Normal&&this.startBackAnimation()}}),cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement"}],FireButtonInputCommand:[function(e,t,i){"use strict";cc._RF.push(t,"f8355/l1rxLnKE/kh9ES4wt","FireButtonInputCommand"),i.__esModule=!0,i.default=void 0;var n=a(e("GameEvent"));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t,i;function a(t){var i;return(i=e.call(this,t)||this)._currentTouch=null,i}i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var o=a.prototype;return o.onDown=function(e,t){-1===this._currentTouchID&&(this._currentTouch=this.createTouch(e,t),this._currentTouchID=e._id)},o.onUp=function(e){this._currentTouchID===e._id&&(cc.systemEvent.emit(n.default.FIRE_BUTTON_PRESS),this._currentTouch=null,this._currentTouchID=-1,this.destroyTouch(e))},a}(a(e("IInputCommand")).default);i.default=o,t.exports=i.default,cc._RF.pop()},{GameEvent:"GameEvent",IInputCommand:"IInputCommand"}],FireButton:[function(e,t){"use strict";cc._RF.push(t,"75511j3Y7hFErVVx6x+2n4S","FireButton");var i=a(e("UiElement")),n=a(e("GameEvent"));function a(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:i.default,properties:{_userStunTime:{default:0,serializable:!1},_delay:{default:1,serializable:!1},_canShoot:{default:!0,serializable:!1}},onLoad:function(){this.isActiveElement=!0,this._animation=this.node.getComponent(cc.Animation),cc.systemEvent.on(n.default.TOGGLE_PLAYER,this.onTogglePlayer,this)},update:function(e){this._userStunTime<this._delay&&this._userStunTime+e>=this._delay&&(this._canShoot=!0),this._userStunTime+=e},onTogglePlayer:function(e){this.subscribeEvents(e)},subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](n.default.FIRE_BUTTON_PRESS,this.onFirerPressButton,this)},onFirerPressButton:function(){this._animation&&this._canShoot&&(this._animation.play(),cc.systemEvent.emit(n.default.PLAYER_CONTROL_SHOOT),this._userStunTime=0,this._canShoot=!1)}}),cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement"}],FirstTouchInputCommand:[function(e,t,i){"use strict";cc._RF.push(t,"b96dekihjdLBaQPphBW91Nl","FirstTouchInputCommand"),i.__esModule=!0,i.default=void 0;var n=r(e("GameEvent")),a=r(e("IInputCommand")),o=r(e("TouchSource"));function r(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t,i;function a(t,i){var n;return(n=e.call(this,t)||this)._arrayTouches=[{touch:"AnySource",flag:!0}],n._init(i),n}i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var r=a.prototype;return r._init=function(e){if(e instanceof Array)for(var t=0;t<e.length;t++){var i=e[t];this._arrayTouches.push({touch:i,flag:!0})}else this._arrayTouches.push({touch:e,flag:!0})},r.onDown=function(e){this._anySourceClick(this._arrayTouches[0]);var t=this._arrayTouches.find(function(t){return t.touch===e});t&&t.flag&&this._selectedObject(e,t)},r._anySourceClick=function(e){e.flag&&(cc.systemEvent.emit(n.default.ACTIVE_ZONE),e.flag=!1)},r._selectedObject=function(e,t){var i=this._arrayTouches.indexOf(t);switch(e){case o.default.Any:case o.default.RedirectButton:case o.default.ItemButton:case o.default.Stick:}this._arrayTouches[i].flag=!1},a}(a.default);i.default=s,t.exports=i.default,cc._RF.pop()},{GameEvent:"GameEvent",IInputCommand:"IInputCommand",TouchSource:"TouchSource"}],FlashLight:[function(e,t){"use strict";cc._RF.push(t,"f5da8lxRuJOfZkcK2AsiZON","FlashLight");var i=o(e("GameEvent")),n=o(e("UiElement")),a=o(e("EffectType"));function o(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:n.default,properties:{effectReference:{default:null,type:cc.Node},_animationCocos:{default:null,serializable:!1}},onLoad:function(){this._subscribeEvents(!0)},start:function(){this._animationCocos=this.node.getComponent(cc.Animation)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.START_FLASH,this.onStartFlash,this)},_spawnEffect:function(){cc.systemEvent.emit(i.default.SPAWN_EFFECT,{type:a.default.FxDestroy,parent:this.effectReference,zIndex:1,position:cc.Vec2.ZERO,scale:new cc.Vec2(8,8)})},onHideCallBack:function(){this.callbackHide instanceof Function&&this.callbackHide()},onShowCallBack:function(){this.callbackShow instanceof Function&&this.callbackShow(),this._animationCocos&&this._animationCocos.play(),this._spawnEffect()},onStartFlash:function(e,t){this.callbackShow=e,this.callbackHide=t,this.show(.5)},onAnimationEvent:function(){this.hide(.5)},callbackHide:null,callbackShow:null}),cc._RF.pop()},{EffectType:"EffectType",GameEvent:"GameEvent",UiElement:"UiElement"}],GameEvent:[function(e,t,i){"use strict";cc._RF.push(t,"46df9Yy8DVMB5j+g9Lyazgn","GameEvent"),i.__esModule=!0,i.default=void 0;var n=cc.Enum({None:0,SWITCH_GAME_STATE:10,REDIRECT_PROCESSING:20,RETURN_TO_POOL:21,RESULT_SHOW:30,TOGGLE_INGAME_BUTTON:50,TOGGLE_TUTOR_BUTTONS:55,TOGGLE_TUTOR_SECOND:56,TOGGLE_TUTOR:60,SET_HOLDER_TUTORIAL:61,CHANG_TYPE_TUTOR:62,SHAKE:70,FIND_ENEMY:72,GET_TUTORIAL_TARGET:73,LIGHT_BLINK_OBJECT:74,GAME_COMPLETE_CHECK:75,CONSTRUCTION_DESTROY:76,ACTIVE_ZONE:77,FIND_HERO:78,CHANGE_PROGRESS_BAR:80,INPUT:90,SET_STATE_ON_MANAGERS:91,TOGGLE_PLAYER:92,PLAYER_CAN_REDIRECT:93,PLAYER_CONTROL_MOVE:94,PLAYER_CONTROL_STOP_MOVE:95,PLAYER_CONTROL_SHOOT:96,TOGGLE_INPUT:97,CREATE_GAME_OBJECT:230,GET_CURRENT_GAME_STATE:441,SPAWN_EFFECT:260,DRAW_CANVAS_DOWN:261,DRAW_CANVAS_MOVE:262,DRAW_CANVAS_UP:263,DISABLE_INPUT_CANVAS:264,TOGGLE_TIMER:267,CLEAR_CANVAS:268,CAMERA_SHAKE:270,CONVERT_TO_CAMERA:271,CONVERT_CAMERA_TO_WORLD:272,SET_DEFAULT_BOX:273,CAMERA_3D_START_SHAKE:274,CAMERA_3D_STOP_SHAKE:275,CAMERA_3D_ROTATE:276,CAMERA_3D_SET_TARGET:277,GET_CAMERA_NODE:278,SET_CAMERA_3D_OFFSET:279,TOGGLE_ANNOUNCER:300,TOGGLE_ANNOUNCER_SCORE:301,HIDE_UI:340,CHECK_COLLIDE:345,AUDIO_PLAY:350,AUDIO_STOP:351,GET_DATA:360,CHANGE_DATA:361,GET_VALUE:370,CHANGE_VALUE:380,DRAW_VALUE:390,TIME_CHANGE_VALUE:391,START_FLASH:420,RESTART_GAME:421,COMPLETE_LEVEL:500,LOSE_LEVEL:501,RESTART_LEVEL:502,COMPLETE_CONDITION:503,GET_LEVEL:504,LOAD_WORLD:600,TOGGLE_BLACKOUT:700,TOGGLE_CLOSE_BUTTON:800,GET_UI_MANGER_NODE:900,SHOP_TOGGLE:901,TOGGLE_RIGHT_WORD:902,TOGGLE_FAIL:903,DOWN_ITEM:1002,MOVE_ITEM:1003,UP_ITEM:1004,STICK_DOWN:1005,STICK_MOVE:1006,STICK_UP:1007,GET_ITEM_DATA:1100,ITEM_DROPPED:1101,OBJECTIVE_COMPLETE:1102,INCREASE_TIME_TURN:1200,SET_TURN_TYPE:1201,PLAYER_START_TURN:1202,ITEM_DROP_IN_AREA:1300,WALL_START:1310,SPRAY_START:1320,MOP_START:1330,HERO_MOVE:1400,HERO_STOP_MOVE:1402,FIRE_BUTTON_PRESS:1403,TOGGLE_RIGID_BODY:1404,REFRESH_POINTER:1500,TOGGLE_POINTER:1501,OBJECT_DESTROY:1600,SET_SCORE:1700,UPDATE_LABEL:1800,QUESTION_INSERT:1801,INSERT_QUESTION_TARGET:1802,ACTIVE_LETTER:1803,ACTIVE_HIDDEN_WORDS:1804,SET_LETTER_OTHER_QUESTIONS:1805,DELETE_LETTER:1806,SET_LOCK_LETTERS:1807,GET_NONE_COMPLETE_WORD_OBJ:1808,TOGGLE_KEY_BOARD:1900,KEYBOARD_DOWN:190001,KEYBOARD_UP:1902});i.default=n,t.exports=i.default,cc._RF.pop()},{}],GameManager:[function(e,t){"use strict";cc._RF.push(t,"0829bEjvz5M35fdSorBbFQu","GameManager");var i=a(e("GameEvent")),n=a(e("GameStates"));function a(e){return e&&e.__esModule?e:{default:e}}a(e("TurnType")),cc.Class({extends:cc.Component,properties:{gameName:"",adType:"",isEndCard:!1,isForcedRedirectInGame:!1,realResultOnFakeADType:[cc.String],_gameState:{default:n.default.None,type:n.default},_sendOnce:{default:!0,serializable:!1}},onEnable:function(){this._subscribeEvents(!0)},onDisable:function(){this._subscribeEvents(!1)},onLoad:function(){console.log(this.gameName),window.AD_TYPE=window.AD_TYPE||this.adType,window.SOUND_ON="boolean"==typeof window.SOUND_ON&&window.SOUND_ON,window.IS_END_CARD=this.isEndCard,window.OVERRIDE_URL=!0,window.CURRENT_URL=/android/i.test(navigator.userAgent)?"https://play.google.com/store/apps/details?id=com.hitapps.figgerits":"https://apps.apple.com/app/id1600880375"},start:function(){cc.systemEvent.emit(i.default.AUDIO_PLAY,"music_loop",!0,.35)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.REDIRECT_PROCESSING,this.RedirectProcessing,this),cc.systemEvent[t](i.default.SWITCH_GAME_STATE,this.onSwitchGameState,this),cc.systemEvent[t](i.default.GET_CURRENT_GAME_STATE,this.onGetCurrentGameState,this),cc.systemEvent[t](i.default.RETURN_TO_POOL,this.onReturnToPool,this),cc.systemEvent[t](i.default.GAME_COMPLETE_CHECK,this.onGameCompleteCheck,this)},_checkFunctionResult:function(){this._sendOnce&&(window.gameEnd instanceof Function&&window.gameEnd(),window.onGameComplete instanceof Function&&window.onGameComplete(),this._sendOnce=!1)},onGetCurrentGameState:function(e){e instanceof Function&&e(this._gameState)},onSwitchGameState:function(e,t){if(this._gameState!==e){switch(e){case n.default.Game:cc.systemEvent.emit(i.default.TOGGLE_TUTOR,!0),cc.systemEvent.emit(i.default.TOGGLE_PLAYER,!0),cc.systemEvent.emit(i.default.TOGGLE_TIMER,!0);break;case n.default.Result:!this.isEndCard&&this._checkFunctionResult(),cc.systemEvent.emit(i.default.TOGGLE_PLAYER,!1),cc.systemEvent.emit(i.default.ACTIVE_HIDDEN_WORDS,[1,2,3]);var a=this.realResultOnFakeADType.find(function(e){return e===AD_TYPE});this.isForcedRedirectInGame?(a?(cc.systemEvent.emit(i.default.HIDE_UI),cc.systemEvent.emit(i.default.RESULT_SHOW,t)):cc.systemEvent.emit(i.default.PLAYER_CAN_REDIRECT),cc.systemEvent.emit(i.default.TOGGLE_TUTOR,!0)):(cc.systemEvent.emit(i.default.HIDE_UI),cc.systemEvent.emit(i.default.TOGGLE_TUTOR,!1),cc.systemEvent.emit(i.default.RESULT_SHOW,t)),cc.systemEvent.emit(i.default.ACTIVE_HIDDEN_WORDS);break;case n.default.Shopping:cc.systemEvent.emit(i.default.TOGGLE_PLAYER,!1),cc.systemEvent.emit(i.default.SHOP_TOGGLE,!0,!0);break;case n.default.Fake:if(!this.isEndCard&&this._checkFunctionResult(),cc.systemEvent.emit(i.default.TOGGLE_PLAYER,!1),this.realResultOnFakeADType.find(function(e){return e===AD_TYPE})){if(!window.IS_END_CARD)return void cc.systemEvent.emit(i.default.SWITCH_GAME_STATE,n.default.Result);cc.systemEvent.emit(i.default.TOGGLE_TUTOR,!0),cc.systemEvent.emit(i.default.PLAYER_CAN_REDIRECT)}else cc.systemEvent.emit(i.default.TOGGLE_TUTOR,!0),cc.systemEvent.emit(i.default.PLAYER_CAN_REDIRECT);break;case n.default.Retry:case n.default.SwitchLevel:}cc.log("GameState",n.default[e]),this._gameState=e,cc.systemEvent.emit(i.default.SET_STATE_ON_MANAGERS,this._gameState)}},onReturnToPool:function(e){if(e instanceof cc.Node){var t=e.getComponent(my.PoolerHelper);t&&t.returnToPool()}},onGameCompleteCheck:function(){this._checkFunctionResult()},RedirectProcessing:function(e,t){void 0===t&&(t={}),cc.director.pause();try{AdRedirectProccessing()}catch(i){console.log("Error17: SDK was not found"),window.open(window.CURRENT_URL)}cc.director.resume()}}),cc._RF.pop()},{GameEvent:"GameEvent",GameStates:"GameStates",TurnType:"TurnType"}],GameObjectManager:[function(e,t){"use strict";cc._RF.push(t,"1226euyW2FAKZFI7f4VowQS","GameObjectManager");var i=o(e("GameEvent")),n=o(e("GameObjectType")),a=o(e("GameObject"));function o(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{PREVIEW:{default:!1,editorOnly:!0},gameObjectType:{default:n.default.None,type:n.default,notify:function(){-1===this._convertGameObjectType.indexOf(this.gameObjectType)&&(this._convertGameObjectType.push(this.gameObjectType),this._prefabs.push(null)),this.prefab=this._prefabs[this._convertGameObjectType.indexOf(this.gameObjectType)]},serializable:!1},prefab:{default:null,type:cc.Prefab,notify:function(){this.gameObjectType!==n.default.None&&(this.prefab instanceof cc.Prefab||null===this.prefab)&&(this._prefabs[this._convertGameObjectType.indexOf(this.gameObjectType)]=this.prefab)},visible:function(){return this.gameObjectType!==n.default.None},serializable:!1},prefabs:{get:function(){return this._prefabs},type:[cc.Prefab],visible:function(){return this.PREVIEW}},convertGameObjectType:{get:function(){return this._convertGameObjectType},type:[n.default],visible:function(){return this.PREVIEW}},_pools:{default:null,serializable:!1},_prefabs:{default:[],type:[cc.Prefab]},_convertGameObjectType:{default:[],type:[n.default]}},onLoad:function(){this._initPools(),cc.systemEvent.on(i.default.CREATE_GAME_OBJECT,this.onCreateGameObject,this)},getPrefab:function(e){return-1!==this.convertGameObjectType.indexOf(e)?this.prefabs[this.convertGameObjectType.indexOf(e)]:null},getPrefabPool:function(e){var t=null;return this._pools[e]&&(t=this._pools[e]),t},_initPools:function(){var e=this;this._pools={},this.prefabs.forEach(function(t,i){t instanceof cc.Prefab&&(e._pools[e.convertGameObjectType[i]]=my.poolManager.poolForObject(t))})},onCreateGameObject:function(e,t,i){var n=this.getPrefabPool(e),o=null,r=null;n&&(n.pop(function(e){o=e,r=e.getComponent(a.default),t instanceof Function&&t(o,r)}),i instanceof Function&&i(o,r))}}),cc._RF.pop()},{GameEvent:"GameEvent",GameObject:"GameObject",GameObjectType:"GameObjectType"}],GameObjectType:[function(e,t){"use strict";cc._RF.push(t,"f2dffZIhTxOzJrI9ZMST4I+","GameObjectType");var i=cc.Enum({None:0,Announcer:4,BackgroundGreen:8,BackgroundBlue:9,Blackout:20,CameraBoxLevel1:21,DrawCanvas:22,Latter:23,MainWord:24,InputAny:25,CameraBoxLevel2:27});t.exports=i,cc._RF.pop()},{}],GameObject:[function(e,t,i){"use strict";var n;cc._RF.push(t,"0d3c9hzklhJiJXulnSwvvod","GameObject"),i.__esModule=!0,i.default=void 0,(n=e("GameEvent"))&&n.__esModule;var a=cc.Class({extends:cc.Component,properties:{world:{default:null,visible:!1},isReturnToPool:{default:!1,visible:!1},isActivated:{default:!1,notify:function(e){e!==this.isActivated&&this.onSwitchActiveCallBack instanceof Function&&this.onSwitchActiveCallBack(this.isActivated)},visible:!1}},initFromPool:null,prepareReturnToPool:null,specify:null,onSwitchActiveCallBack:null});i.default=a,t.exports=i.default,cc._RF.pop()},{GameEvent:"GameEvent"}],GameStates:[function(e,t,i){"use strict";cc._RF.push(t,"0c3fdpcdFhPAI9gH9XMS+Xg","GameStates"),i.__esModule=!0,i.default=void 0;var n=cc.Enum({None:0,Loading:1,Game:2,Tutorial:3,Result:4,Retry:5,Fake:6,SwitchLevel:7,Shopping:8});i.default=n,t.exports=i.default,cc._RF.pop()},{}],Hero:[function(e,t){"use strict";cc._RF.push(t,"f639cWnKURNuKJtZM+LBhfW","Hero");var i=s(e("GameEvent")),n=e("Character"),a=s(e("ValueType")),o=s(e("GameObject")),r=s(e("GameObjectType"));function s(e){return e&&e.__esModule?e:{default:e}}var c=cc.Enum({None:0,Idle:1,Move:2,ChopTree:3,ChopRock:4,Dead:5});cc.Class({extends:n.Character,properties:{rotateOffset:40,speedRotate:150,moveVelocity:cc.Vec2.ZERO,zoneRadius:{default:null,type:cc.SphereCollider3D},hitZoneNode:{default:null,type:cc.Node},render:{default:null,type:cc.MeshRenderer},materialChange:{default:null,type:cc.Material,notify:function(){this.updateMaterial(this.materialChange)}},heroState:{default:c.HeroState,notify:function(e){this.heroState!==e&&this._switchHeroState(this.heroState)},serializable:!1,visible:!1},_oldAnimation:{default:null,serializable:!1},_tweenRotate:{default:null,serializable:!1},_rigidBody3D:{default:null,serializable:!1},_currentTarget:{default:null,serializable:!1},_isCaptureTarget:{default:!1,serializable:!1},_isControlRotate:{default:!0,serializable:!1},_objectsArray:{default:[],serializable:!1},_currentClip3D:{default:null,serializable:!1},_hitZone:{default:null,serializable:!1},_animationCocos:{default:null,serializable:!1}},onLoad:function(){this._super()},init:function(){this._quat=cc.quat(),this._rigidBody3D=this.node.getComponent(cc.RigidBody3D),this.hitZoneNode&&(this._hitZone=this.hitZoneNode.getComponent(cc.BoxCollider3D)),this._animationCocos=this.node.getComponent(cc.Animation),this.zoneRadius&&(this.zoneRadius.on("trigger-enter",this.onTrigger,this),this.zoneRadius.on("trigger-exit",this.onTrigger,this),this.zoneRadius.node.active=!1),this._hitZone&&this._hitZone.on("trigger-enter",this.onHitZoneTrigger,this),this.persona.skeleton3DAnimation&&(this._currentClip3D=this.persona.skeleton3DAnimation.play(this._currentCharacter.animation.run,.5),this._currentClip3D.speed=.1),this.heroState=c.Idle,cc.systemEvent.on(i.default.FIND_HERO,this.onFindHero,this)},initFromPool:function(){this.isAlive=!0,this.init()},onEnable:function(){this._subscribeEvents(!0)},onDisable:function(){this._subscribeEvents(!1)},update:function(){if(this._isCaptureTarget&&this._currentTarget){this.node.lookAt(this._currentTarget,cc.Vec3.UP);var e=new cc.Vec3(0,this.node.eulerAngles.y-180,0);this.node.eulerAngles=e}this.heroState!==c.Move&&this._rigidBody3D&&this._rigidBody3D.setLinearVelocity(cc.Vec3.ZERO)},specify:function(e){e&&e.useHat&&this._setObject(this.persona.meshHelper.hat),e&&e.isCameraCapture&&cc.systemEvent.emit(i.default.CAMERA_3D_SET_TARGET,this.node)},updateMaterial:function(e){e&&this.render&&this.render.setMaterial(0,e)},_subscribeEvents:function(e){var t=e?"on":"off";this.node[t](i.default.HERO_MOVE,this.onHeroMove,this),this.node[t](i.default.HERO_STOP_MOVE,this.onHeroStopMove,this),this.node[t](i.default.TOGGLE_RIGID_BODY,this.onToggleRigidBody,this),cc.systemEvent[t](i.default.OBJECT_DESTROY,this.onObjectDestroy,this),cc.systemEvent[t](i.default.ACTIVE_ZONE,this.onActiveZone,this)},_setAnimationCocos:function(e){this._animationCocos&&(this._oldAnimation&&(this._animationCocos.play(this._oldAnimation),this._animationCocos.setCurrentTime(0),this._animationCocos.stop(this._oldAnimation)),this._animationCocos.play(e),this._oldAnimation=e)},_setObject:function(e){if(e.prefab){var t={type:e.prefab},i=this.world.createObject(t);return i&&(i.parent=e.nodeToSet||this.node,i.setPosition(e.offset),i.eulerAngles=e.rotation),i}},_setAngle:function(e){e>0?this._setAngleAppear(e):this._setAngleLover(e)},_setAngleLover:function(e){if(e){var t=Math.abs(this.node.eulerAngles.y-(e+this.rotateOffset))*(1/this.speedRotate);this._tweenRotateToAngle(t,this.node.eulerAngles.y,e+this.rotateOffset)}},_setAngleAppear:function(e){if(e){var t=this.node.eulerAngles.y>0?this.node.eulerAngles.y:this.node.eulerAngles.y+360,i=Math.abs(t-(e+this.rotateOffset))*(1/this.speedRotate);this._tweenRotateToAngle(i,this.node.eulerAngles.y>0?this.node.eulerAngles.y:this.node.eulerAngles.y+360,e+this.rotateOffset)}},_tweenRotateToAngle:function(e,t,i){var n=this;this._tweenRotate&&this._tweenRotate.stop();var a={timer:0};this._tweenRotate=my.tweenManager.add(a,{timer:1},e,"linear",!0),this._tweenRotate.onUpdate=function(){var e=t+(i-t)*a.timer,o=new cc.Vec3(n.node.eulerAngles.x,e,n.node.eulerAngles.z);n.node.eulerAngles=o},this._tweenRotate.onComplete=function(){}},_setVectorMove:function(e,t){if(e){var i=(e+this.rotateOffset)*Math.PI/180,n=this.moveVelocity.rotate(i).mul(t),a=new cc.Vec3(n.y,0,n.x);this._rigidBody3D&&this._rigidBody3D.setLinearVelocity(a)}},_focusOnTarget:function(e){var t=this;e&&(this._tweenRotate&&this._tweenRotate.stop(),this._currentTarget=e,this._isControlRotate=!1,this.rotateToPosition(this._currentTarget,.15,function(){t._isCaptureTarget=!0,t.heroState=t._getHeroStateFromTypeTargetObject(t._currentTarget)}))},_deleteTargetFromArray:function(e){var t=this._objectsArray.indexOf(e);-1!=t&&e&&this._objectsArray.splice(t,1)},_checkObjectsInArea:function(){if(this._objectsArray.length>0){var e=this._objectsArray[0].node.getComponent(o.default);if(null===this._currentTarget&&e.isActivated)return void this._focusOnTarget(this._objectsArray[0].node)}this._stopTargetingActions(),this.heroState=c.Idle},_stopTargetingActions:function(){this._rotationTween&&this._rotationTween.stop(),this._isCaptureTarget=!1,this._currentTarget=null,this._isControlRotate=!0},_someObjectDestroy:function(e){if(e){var t=e.getComponent(o.default);t&&!t.isActivated&&this._objectsArray.includes(t)&&(this._deleteTargetFromArray(t),this._currentTarget===e&&(this._stopTargetingActions(),this._checkObjectsInArea()))}},_getHeroStateFromTypeTargetObject:function(e){var t=e.getComponent(o.default),i=c.None,n=null;switch(t&&(n=t.targetType),n){case r.default.Rock:i=c.ChopRock;break;case r.default.Tree:i=c.ChopTree;break;case r.default.Shop:i=c.Idle}return i},_switchHeroState:function(e){switch(e){case c.Idle:this._rigidBody3D&&this._rigidBody3D.setLinearVelocity(cc.Vec3.ZERO),this._rotationTween&&this._rotationTween.stop(),this._tweenRotate&&this._tweenRotate.stop(),this.unscheduleAllCallbacks(),this._currentTarget=null,this._setAnimationCocos(this._currentCharacter.animation.idle),this._checkObjectsInArea();break;case c.Move:this._stopTargetingActions(),this._setAnimationCocos(this._currentCharacter.animation.run);break;case c.ChopRock:this._rigidBody3D&&this._rigidBody3D.setLinearVelocity(cc.Vec3.ZERO),this._setAnimationCocos(this._currentCharacter.animation.chopRock);break;case c.ChopTree:this._rigidBody3D&&this._rigidBody3D.setLinearVelocity(cc.Vec3.ZERO),this._setAnimationCocos(this._currentCharacter.animation.chopTree);break;case c.Dead:this._rigidBody3D&&this._rigidBody3D.setLinearVelocity(cc.Vec3.ZERO),this.isAlive=!1}},onAnimationEvent:function(e){var t=this._currentCharacter.event,n=null;switch(this._currentTarget&&(n=this._currentTarget.getComponent(o.default))&&n.actionTarget instanceof Function&&n.actionTarget(),e){case t.chopTree:if(n){var r=my.utilities.randomInt(20,21);cc.systemEvent.emit(i.default.CHANGE_VALUE,a.default.TreeCountChop,{addition:r}),cc.systemEvent.emit(i.default.SET_SCORE,r,this.node.getPosition().addSelf(new cc.Vec3(0,2,0)),a.default.TreeCountChop)}break;case t.chopRock:if(n){var s=my.utilities.randomInt(20,21);cc.systemEvent.emit(i.default.CHANGE_VALUE,a.default.RockCountChop,{addition:s}),cc.systemEvent.emit(i.default.SET_SCORE,s,this.node.getPosition().addSelf(new cc.Vec3(0,2,0)),a.default.RockCountChop)}}},onHeroMove:function(e){e&&(this._isControlRotate&&this._setAngle(e.angle),this._setVectorMove(e.angle,e.speed),this.heroState=c.Move)},onHeroStopMove:function(){this.heroState=c.Idle},onTrigger:function(e){var t=e.type,i=e.otherCollider.node.getComponent(o.default);if("objects"===e.otherCollider.node.group)switch(t){case"trigger-enter":this._objectsArray.push(i);break;case"trigger-exit":this._deleteTargetFromArray(i),this._currentTarget===e.otherCollider.node&&(this._stopTargetingActions(),this._checkObjectsInArea())}},onHitZoneTrigger:function(e){e.type,e.otherCollider.node,e.otherCollider.node.group},onObjectDestroy:function(e){this._someObjectDestroy(e)},onToggleRigidBody:function(e){this._objectsArray=[],this._currentTarget=null,this._isCaptureTarget=e,this._tweenRotate&&this._tweenRotate.stop()},onActiveZone:function(){var e=this;this.zoneRadius&&(this.zoneRadius.node.active=!0),this.scheduleOnce(function(){e._checkObjectsInArea()})},onFindHero:function(e){e instanceof Function&&e(this.node)}}),cc._RF.pop()},{Character:"Character",GameEvent:"GameEvent",GameObject:"GameObject",GameObjectType:"GameObjectType",ValueType:"ValueType"}],HitboxBuilder:[function(e,t,i){"use strict";function n(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=a(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}function a(e,t){if(e){if("string"==typeof e)return o(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}cc._RF.push(t,"17aa3ia2lVPXptBQhQtpowH","HitboxBuilder"),i.__esModule=!0,i.default=void 0;var r=function(){function e(){this.poligons=[],this.oldPoligons=[],this._h=0,this._w=0}var t=e.prototype;return t.parseImg=function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var i=t.getContext("2d");return i.drawImage(e,0,0),i.getImageData(0,0,e.width,e.height).data},t.getPoints=function(){return this.poligons.slice()},t.calculatePoints=function(e,t,i,n,a,o){void 0===a&&(a=1),void 0===o&&(o=null),null===o&&(this.oldPoligons=this.getPoints(),this.poligons=[],this._h=0,this._w=0);var r=o||l.getFirstNonTransparentPixelTopDown(e,t,i);if(null!==r){var s=l.walkPerimeter(e,t,i,r.w,r.h);(s=c(s,a)).length>0&&s[0].equals(s[s.length-1])&&(s.length-=1),s.forEach(function(e){e.y=i-e.y,e.x-=n.anchorX*n.width,e.y-=n.anchorY*n.height}),this.poligons.push(s),this.checkPoints(e,t,i,n,this.poligons,a)}},t.checkPoints=function(e,t,i,a,o,r){var s=0;r*=2;for(var c=this._h;c<i;c+=r,this._h+=r){for(var l=this._w;l<t;l+=r,this._w+=r)if(e[s=c*t+l]>200){for(var u,h=!1,d=n(o);!(u=d()).done;){var f=u.value;if(cc.Intersection.pointInPolygon({x:l,y:i-c},f)||!(s+r<=t*(c+1)&&s-t*r>=0&&e[s+r-t*r]>200&&!cc.Intersection.pointInPolygon({x:l+r-a.anchorX*a.width,y:i-(c-r)-a.anchorY*a.height},f)||s-r>=t*c&&s+t*r<=t*i&&e[s-r+t*r]>200&&!cc.Intersection.pointInPolygon({x:l-r-a.anchorX*a.width,y:i-(c+r)-a.anchorY*a.height},f))||!(s+r<=t*(c+1)&&s+t*r<=t*i&&e[s+r+t*r]>200&&!cc.Intersection.pointInPolygon({x:l+r-a.anchorX*a.width,y:i-(c+r)-a.anchorY*a.height},f)||s-r>=t*c&&s-t*r>=0&&e[s-r-t*r]>200&&!cc.Intersection.pointInPolygon({x:l-r-a.anchorX*a.width,y:i-(c-r)-a.anchorY*a.height},f))){h=!1;break}h=!0}if(h){for(var _=s,p=c;e[_]>200;)_-=t,p-=1;return{w:l,h:p+1}}}this._w=0}return this._h=0,null},e}();function s(e,t,i){var n,a,o;return t.x===i.x?n=Math.abs(e.x-t.x):(a=(i.y-t.y)/(i.x-t.x),o=t.y-a*t.x,n=Math.abs(a*e.x-e.y+o)/Math.sqrt(Math.pow(a,2)+1)),n}var c=function e(t,i){var n=t[0],a=t[t.length-1];if(t.length<3)return t;for(var o=-1,r=0,c=1;c<t.length-1;c++){var l=s(t[c],n,a);l>r&&(r=l,o=c)}if(r>i){var u=t.slice(0,o+1),h=t.slice(o),d=e(u,i),f=e(h,i);return d.slice(0,d.length-1).concat(f)}return[n,a]},l={getFirstNonTransparentPixelTopDown:function(e,t,i){for(var n=0,a=0;a<i;++a){n=a*t|0;for(var o=0;o<t;++o){if(e[n]>200)return{w:o,h:a};++n}}return null},walkPerimeter:function(e,t,i,n,a){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===a&&(a=0);var o=[],r=l.step,s=n,c=a;do{var u=r((c-1)*t+(s-1),e,t,i,s,c);switch(s>=0&&s<t&&c>=0&&c<i&&o.push(cc.v2(s,c)),u){case 1:c-=1;break;case 2:s-=1;break;case 3:c+=1;break;case 4:s+=1}}while(s!==n||c!==a);return o.push(cc.v2(s,c)),o},step:function(e,t,i,n,a){var o=0;switch(200<t[e+1]&&a>0&&(o|=1),200<t[e+2]&&a<i-2&&(o|=2),200<t[e+i+1]&&a>0&&(o|=4),200<t[e+i+2]&&a<i-2&&(o|=8),o){case 1:case 5:case 13:l.next_step=1;break;case 2:case 3:case 7:l.next_step=4;break;case 4:case 12:case 14:l.next_step=2;break;case 8:case 10:case 11:l.next_step=3;break;case 6:1===l.next_step?l.next_step=2:l.next_step=4;break;case 9:4==l.next_step?l.next_step=1:l.next_step=3;break;default:l.next_step=0}return l.next_step}},u=r;i.default=u,t.exports=i.default,cc._RF.pop()},{}],IInputCommand:[function(e,t,i){"use strict";cc._RF.push(t,"59c192hVPJH1IkBCkbQSs0I","IInputCommand"),i.__esModule=!0,i.default=void 0;var n=function(){function e(e){this.node=e.node,this.manager=e,this.touches=this.manager.touches,this._currentTouchID=-1}var t=e.prototype;return t.onDown=function(){},t.onMove=function(){},t.onUp=function(){},t.createTouch=function(e,t){var i={id:e._id,info:this.getTouchInfo(e,t),time:this.manager.time};return this.touches[e._id]=i,i},t.findTouch=function(e){return this.touches[e._id]},t.destroyTouch=function(e){this.touches.splice(e._id,1)},t.getTouchInfo=function(e,t){var i=e.getLocation(),n=cc.Camera.findCamera(t.node),a=i.clone(),o=new cc.Vec2(0,0);return n instanceof cc.Camera&&(o=n.getScreenToWorldPoint(a)),a=this.node.convertToNodeSpaceAR(o),{id:e._id,time:this.manager.time,location:i,position:a,worldPosition:o}},t.getVectorAngle=function(e){return 180*Math.atan2(e.y,e.x)/Math.PI},e}();i.default=n,t.exports=i.default,cc._RF.pop()},{}],IPlate:[function(e,t,i){"use strict";cc._RF.push(t,"437b13p0xpLrpG48CFt3wMI","IPlate"),i.__esModule=!0,i.default=void 0;var n,a=(n=e("GameObject"))&&n.__esModule?n:{default:n},o=cc.Class({extends:a.default,properties:{canMoveOnThisCell:{default:!0,visible:!1},_stepCounter:{default:1,serializable:!1},_isChanged:{default:!1,serializable:!1}},specify:function(e){e&&"boolean"==typeof e.canMoveOnThisCell&&(this.canMoveOnThisCell=e.canMoveOnThisCell)},canStepOnPlate:function(e,t){return t instanceof Function&&t(e),this.canMoveOnThisCell},changeOnStep:function(){}});i.default=o,t.exports=i.default,cc._RF.pop()},{GameObject:"GameObject"}],IngameButton:[function(e,t){"use strict";cc._RF.push(t,"d21313NpVdKCZcHl6FUWlsx","IngameButton");var i=a(e("GameEvent")),n=a(e("UiElement"));function a(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:n.default,properties:{fadeInTime:.5,fadeOutTime:.5,isOneTapGame:!1,_inputCatcher:null,_tweenOpacityMax:null,_tweenOpacityMin:null},onLoad:function(){this._inputCatcher=this.node.getComponent("InputCatcher"),this._tweenOpacityMax=my.tweenManager.add(this.node,{opacity:255},this.fadeInTime,"linear",!1),this._tweenOpacityMin=my.tweenManager.add(this.node,{opacity:0},this.fadeOutTime,"linear",!1);var e=null;this.isOneTapGame?(e="adwords"===AD_TYPE||"facebook",this.node.opacity=e?255:0,this.toggleButton(e)):(e="adwords"===AD_TYPE,this.node.opacity=e?255:0,this.toggleButton(e)),cc.systemEvent.on(i.default.TOGGLE_INGAME_BUTTON,this.onToggleButton,this)},onToggleButton:function(e){this.toggleButton(e)},toggleButton:function(e){this.isActiveElement!==e&&(this.isActiveElement=e,this.toggleInput(e))},toggleInput:function(e){this._inputCatcher&&this._inputCatcher.toggle(e)},onSwitchActiveCallback:function(){this.isActiveElement?(this.node.active=!0,this._tweenOpacityMax.start()):(this.node.active=!1,this._tweenOpacityMin.start())}}),cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement"}],IngameLogo:[function(e,t){"use strict";cc._RF.push(t,"949570fxA1MuLfwaPhZFbG2","IngameLogo");var i,n=(i=e("UiElement"))&&i.__esModule?i:{default:i};cc.Class({extends:n.default,properties:{isAlwaysShow:!1},onLoad:function(){this.isActiveElement=!("adwords"!==AD_TYPE&&!this.isAlwaysShow)}}),cc._RF.pop()},{UiElement:"UiElement"}],InputCatcher:[function(e,t){"use strict";cc._RF.push(t,"b770djH3JdEGKd6W2wUb4zT","InputCatcher");var i=o(e("GameEvent")),n=o(e("TouchSource")),a=o(e("InputTypes"));function o(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{touchSource:{default:n.default.Any,type:n.default}},editor:{menu:"Input/InputCatcher"},onEnable:function(){this.toggle(!0)},onDisable:function(){this.toggle(!1)},toggle:function(e){var t=e?"on":"off";this.node[t](cc.Node.EventType.TOUCH_START,this.onDown,this),this.node[t](cc.Node.EventType.TOUCH_MOVE,this.onMove,this),this.node[t](cc.Node.EventType.TOUCH_END,this.onUp,this),this.node[t](cc.Node.EventType.TOUCH_CANCEL,this.onUp,this)},onDown:function(e){cc.systemEvent.emit(i.default.INPUT,a.default.Down,e.touch,this.touchSource,this)},onMove:function(e){cc.systemEvent.emit(i.default.INPUT,a.default.Move,e.touch,this.touchSource,this)},onUp:function(e){cc.systemEvent.emit(i.default.INPUT,a.default.Up,e.touch,this.touchSource,this)},onCancel:function(e){cc.systemEvent.emit(i.default.INPUT,a.default.Cancel,e.touch,this.touchSource,this)}}),cc._RF.pop()},{GameEvent:"GameEvent",InputTypes:"InputTypes",TouchSource:"TouchSource"}],InputManager:[function(e,t){"use strict";cc._RF.push(t,"6f156wuwaxNh788i3QmRN0m","InputManager");var i=h(e("AnyInputCommand")),n=h(e("ButtonInputCommand")),a=h(e("DrawAreaInputCommand")),o=h(e("DrawButtonInputCommand")),r=h(e("FirstTouchInputCommand")),s=h(e("GameEvent")),c=h(e("GameStates")),l=h(e("InputTypes")),u=h(e("TouchSource"));function h(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{mainCamera:{default:null,type:cc.Camera},isNeedControlShowTutorial:!0,tutorialDelay:{default:3,visible:function(){return this.isNeedControlShowTutorial}},tutorialCancelSource:{default:[],type:u.default,visible:function(){return this.isNeedControlShowTutorial}},adTypeOnResult:[cc.String],touchSourceRedirect:[u.default],inputTypeOnResultRedirect:{default:l.default.None,type:l.default},touches:{default:[],visible:!1,serializable:!1},time:{get:function(){return this._time},visible:!1},commands:{default:{},visible:!1,serializable:!1},_time:{default:0,serializable:!1},_userSleepTapTime:{default:0,serializable:!1},_gameState:{default:null,serializable:!1},_canRedirectPlayer:{default:!1,serializable:!1},_isTouching:{default:!1,serializable:!1},_firstTouch:{default:null,serializable:!1}},editor:{menu:"Input/InputManager"},onEnable:function(){this._subscribeEvents(!0)},onDisable:function(){this._subscribeEvents(!1)},onLoad:function(){this.commands[u.default.Any]=new i.default(this),this.commands[u.default.RedirectButton]=new n.default(this),this.commands[u.default.DrawButton]=new o.default(this),this.commands[u.default.Draw]=new a.default(this),this._firstTouch=new r.default(this,u.default.Any)},update:function(e){this._time+=e,this._gameState!==c.default.Result&&this._gameState!==c.default.Shopping&&!this._isTouching&&this.isNeedControlShowTutorial&&(this._userSleepTapTime<this.tutorialDelay&&this._userSleepTapTime+e>=this.tutorialDelay&&cc.systemEvent.emit(s.default.TOGGLE_TUTOR,!0),this._userSleepTapTime+=e)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](s.default.INPUT,this.onInput,this),cc.systemEvent[t](s.default.PLAYER_CAN_REDIRECT,this.onPlayerCanRedirect,this),cc.systemEvent[t](s.default.SET_STATE_ON_MANAGERS,this.onSetStateOnInputManager,this),cc.systemEvent[t](s.default.CONVERT_TO_CAMERA,this.onConvertToCamera,this),cc.systemEvent[t](s.default.CONVERT_CAMERA_TO_WORLD,this.onConvertCameraToWorld,this)},_updateInputCommands:function(e,t,i,n){var a=this.commands[i];switch(e){case l.default.Down:a&&a.onDown(t,n);break;case l.default.Move:a&&a.onMove(t,n);break;case l.default.Up:a&&a.onUp(t,n)}},_firstTapCommand:function(e){this._firstTouch.onDown instanceof Function&&this._firstTouch.onDown(e)},_resetInactiveTime:function(){this._userSleepTapTime=0},_checkTutorial:function(e){this._gameState!==c.default.Fake&&this.tutorialCancelSource.includes(e)&&cc.systemEvent.emit(s.default.TOGGLE_TUTOR,!1)},_checkEndGame:function(e,t){var i=!1,n=this.adTypeOnResult.find(function(e){return e===AD_TYPE}),a=this.touchSourceRedirect.includes(t);this._gameState!==c.default.Result&&this._gameState!==c.default.Fake||!a||(i=!0),i&&e===this.inputTypeOnResultRedirect&&this._canRedirectPlayer&&!n&&cc.systemEvent.emit(s.default.REDIRECT_PROCESSING)},onInput:function(e,t,i,n){switch(e){case l.default.Down:this.onDown(e,t,i,n);break;case l.default.Move:this.onMove(e,t,i,n);break;case l.default.Up:this.onUp(e,t,i,n)}this._firstTapCommand(i),this._checkEndGame(e,i),this._updateInputCommands(e,t,i,n),this._resetInactiveTime()},onDown:function(e,t,i){this._isTouching||(this._isTouching=!0,this._checkTutorial(i))},onMove:function(){},onUp:function(){this._isTouching&&(this._isTouching=!1)},onSetStateOnInputManager:function(e){this._gameState=e},onPlayerCanRedirect:function(){this._canRedirectPlayer=!0},onConvertToCamera:function(e,t){var i=this.mainCamera?this.mainCamera.getWorldToScreenPoint(e):e;t instanceof Function&&t(i)},onConvertCameraToWorld:function(e,t){var i=this.mainCamera?this.mainCamera.getScreenToWorldPoint(e):e;t instanceof Function&&t(i)}}),cc._RF.pop()},{AnyInputCommand:"AnyInputCommand",ButtonInputCommand:"ButtonInputCommand",DrawAreaInputCommand:"DrawAreaInputCommand",DrawButtonInputCommand:"DrawButtonInputCommand",FirstTouchInputCommand:"FirstTouchInputCommand",GameEvent:"GameEvent",GameStates:"GameStates",InputTypes:"InputTypes",TouchSource:"TouchSource"}],InputTypes:[function(e,t,i){"use strict";cc._RF.push(t,"3472cbYUjhE+bWFBFiJwbOi","InputTypes"),i.__esModule=!0,i.default=void 0;var n=cc.Enum({None:0,Down:1,Move:2,Up:3,Cancel:4});i.default=n,t.exports=i.default,cc._RF.pop()},{}],ItemDictionary:[function(e,t){"use strict";cc._RF.push(t,"3a22ffBJO9DdIALtAeAS1uH","ItemDictionary");var i=o(e("GameEvent")),n=o(e("ItemType")),a=o(e("GameObjectType"));function o(e){return e&&e.__esModule?e:{default:e}}var r=cc.Class({properties:{spriteFrame:{default:null,type:cc.SpriteFrame},position:cc.Vec2.ZERO,rotation:0,scale:new cc.Vec2(1,1)},name:"ItemSpriteConfig"}),s=cc.Class({properties:{spriteConfig:{default:function(){return new r},type:r},dragElement:{default:a.default.None,type:a.default},dragElementScale:cc.Vec2.ONE,tag:0,eventsToSend:[i.default]},name:"ItemData"});cc.Class({extends:cc.Component,properties:{PREVIEW:{default:!1,editorOnly:!0},itemType:{default:n.default.Default,type:n.default,notify:function(){-1===this._convertItemType.indexOf(this.itemType)&&(this._convertItemType.push(this.itemType),this._items.push(null)),this.item=this._items[this._convertItemType.indexOf(this.itemType)]}},item:{default:null,type:s,notify:function(){(null===this.item||this.item)&&(this._items[this._convertItemType.indexOf(this.itemType)]=this.item)}},items:{get:function(){return this._items},type:[s],visible:function(){return this.PREVIEW}},convertItemType:{get:function(){return this._convertItemType},type:[n.default],visible:function(){return this.PREVIEW}},_items:{default:function(){return[null]},type:[s]},_convertItemType:{default:function(){return[n.default.Default]},type:[n.default]}},onEnable:function(){this._subscriptionEvents(!0)},onDisable:function(){this._subscriptionEvents(!1)},getItemSpriteFrame:function(e){var t=this.convertItemType.indexOf(e);return-1!==t?this.items[t]:null},_subscriptionEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.GET_ITEM_DATA,this.onGetItemData,this)},onGetItemData:function(e,t){t instanceof Function&&t(this.getItemSpriteFrame(e))}}),cc._RF.pop()},{GameEvent:"GameEvent",GameObjectType:"GameObjectType",ItemType:"ItemType"}],ItemInputCommand:[function(e,t,i){"use strict";cc._RF.push(t,"45c7983fxBDP5BxefKRgCTZ","ItemInputCommand"),i.__esModule=!0,i.default=void 0;var n=a(e("GameEvent"));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t,i;function a(t){var i;return(i=e.call(this,t)||this)._currentTouchID=-1,i}i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var o=a.prototype;return o.onDown=function(e,t){if(-1===this._currentTouchID){this.createTouch(e,t);var i=this.getTouchInfo(e,t);this._currentTouchID=e._id,cc.systemEvent.emit(n.default.TOGGLE_TUTOR,!1),cc.systemEvent.emit(n.default.DOWN_ITEM,i,t)}},o.onMove=function(e,t){if(this._currentTouchID===e._id){var i=this.getTouchInfo(e,t);cc.systemEvent.emit(n.default.MOVE_ITEM,i,t)}},o.onUp=function(e,t){if(this._currentTouchID===e._id){this._currentTouchID=-1;var i=this.getTouchInfo(e,t);cc.systemEvent.emit(n.default.UP_ITEM,i,t),this.destroyTouch(e)}},a}(a(e("IInputCommand")).default);i.default=o,t.exports=i.default,cc._RF.pop()},{GameEvent:"GameEvent",IInputCommand:"IInputCommand"}],ItemType:[function(e,t,i){"use strict";cc._RF.push(t,"63c57nkSPVEOpdTX6SkjVJT","ItemType"),i.__esModule=!0,i.default=void 0;var n=cc.Enum({Default:0,Wisp:1,Mop:2,Spray:3,Wallpaper:4,Mirror:5});i.default=n,t.exports=i.default,cc._RF.pop()},{}],KeyBoardInputCommand:[function(e,t,i){"use strict";cc._RF.push(t,"440b9zxrpdN+IBjFF2keW+b","KeyBoardInputCommand"),i.__esModule=!0,i.default=void 0;var n=a(e("GameEvent"));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t,i;function a(t){var i;return(i=e.call(this,t)||this)._currentTouch=null,i}i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var o=a.prototype;return o.onDown=function(e,t){if(-1===this._currentTouchID){this._currentTouch=this.createTouch(e,t),this._currentTouchID=e._id;var i=this.getTouchInfo(e,t);cc.systemEvent.emit(n.default.KEYBOARD_DOWN,i)}},o.onMove=function(){},o.onUp=function(e,t){if(this._currentTouchID===e._id){var i=this.getTouchInfo(e,t);cc.systemEvent.emit(n.default.KEYBOARD_UP,i),this._currentTouch=null,this._currentTouchID=-1,this.destroyTouch(e)}},a}(a(e("IInputCommand")).default);i.default=o,t.exports=i.default,cc._RF.pop()},{GameEvent:"GameEvent",IInputCommand:"IInputCommand"}],KeyBoard:[function(e,t){"use strict";cc._RF.push(t,"4e4eesOJV1IS4C9q6wSueOP","KeyBoard");var i=r(e("GameEvent")),n=r(e("UiElement")),a=r(e("DataType")),o=r(e("KeyPressAbstract"));function r(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:n.default,properties:{dataTypeKeyboard:{default:a.default.None,type:a.default},keyPrefab:{default:null,type:cc.Prefab},deleteKeyPrefab:{default:null,type:cc.Prefab},holder:{default:null,type:cc.Node},rowOffsets:cc.Vec2.ZERO,keyOffset:10,_toggle:{default:!1,serializable:!1},_toggleHolderTween:{default:null,serializable:!1},_questionTarget:{default:null,serializable:!1},_dataKeys:{default:null,serializable:!1}},onLoad:function(){},start:function(){this._init()},deleteKey:function(){this._questionTarget&&this._questionTarget.deleteWord()},keySend:function(e){this._questionTarget&&this._questionTarget.updateWord(e)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.TOGGLE_KEY_BOARD,this.onToggleKeyBoard,this),cc.systemEvent[t](i.default.INSERT_QUESTION_TARGET,this.onInsertQuestionTarget,this)},_init:function(){var e=this;cc.systemEvent.emit(i.default.GET_DATA,this.dataTypeKeyboard,function(t){t instanceof cc.JsonAsset&&(e._dataKeys=t.json)}),this._dataKeys?(this._spawnKeys(),this._subscribeEvents(!0)):cc.warn("dont have data")},_spawnKeyNode:function(e){if(e){var t=cc.instantiate(e);return t.parent=this.holder||this.node,t.setPosition(cc.Vec2.ZERO),t}cc.warn("dont hawe key prefab")},_spawnKeys:function(){if(0!=this._dataKeys.rows.length)for(var e=this._dataKeys.rows.length,t=this._dataKeys.rows,i=this._dataKeys.keys,n=(t.sort(function(e,t){return e+t})[0]+1)*this.keyOffset,a=0,r=0,s=0;s<e;s++){var c=t[s],l=(c+1)*this.keyOffset;a=0===s?0:a+this.rowOffsets.y;for(var u=0;u<c;u++){var h="delete"===i[r]?this.deleteKeyPrefab:this.keyPrefab,d=this._spawnKeyNode(h),f=d.getComponent(o.default),_=(l/(c+1)+this.keyOffset)*u,p=Math.abs(n-l),m=new cc.Vec2(_+p+this.rowOffsets.x,-a);d.setPosition(m),f&&f.setLabelText instanceof Function&&(f.setLabelText(i[r]),f.keyBoardGlobal=this),r++}}},onInsertQuestionTarget:function(e){this._questionTarget=e},onToggleKeyBoard:function(e){this.holder&&this._toggle!==e&&(this._toggle=e,this._toggleHolderTween&&this._toggleHolderTween.stop(),this._toggleHolderTween=my.tweenManager.add(this.holder,{y:e?0:-800,opacity:e?255:0},.4,"linear",!0))}}),cc._RF.pop()},{DataType:"DataType",GameEvent:"GameEvent",KeyPressAbstract:"KeyPressAbstract",UiElement:"UiElement"}],KeyNormal:[function(e,t){"use strict";cc._RF.push(t,"bb093sCn+lDD7syg3jUu1V8","KeyNormal");var i,n=(i=e("KeyPressAbstract"))&&i.__esModule?i:{default:i};cc.Class({extends:n.default,properties:{},start:function(){},onDown:function(e){this._super(e)},onUp:function(e){this._super(e),this.node.getBoundingBoxToWorld().contains(e.worldPosition)&&this.keyBoardGlobal&&this.keyBoardGlobal.keySend instanceof Function&&this.keyBoardGlobal.keySend(this.label.string)}}),cc._RF.pop()},{KeyPressAbstract:"KeyPressAbstract"}],KeyPressAbstract:[function(e,t,i){"use strict";cc._RF.push(t,"df92cUNEQxOGY1crrw24CUA","KeyPressAbstract"),i.__esModule=!0,i.default=void 0;var n,a=(n=e("GameEvent"))&&n.__esModule?n:{default:n},o=cc.Class({extends:cc.Component,properties:{label:{default:null,type:cc.Label},keyBoardGlobal:{default:null,serializable:!1,visible:!1},_animation:{default:null,serializable:!1},_isPressed:{default:!1,serializable:!1}},onEnable:function(){cc.systemEvent.on(a.default.TOGGLE_PLAYER,this.onTogglePlayer,this)},setLabelText:function(e){this.label&&(this.label.string=e)},_toggleAnimation:function(e){var t=e?1.25:1;this._animation&&this._animation.stop(),this._animation=my.tweenManager.add(this.node,{scale:t},.1,"linear",!0)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](a.default.KEYBOARD_DOWN,this.onDown,this),cc.systemEvent[t](a.default.KEYBOARD_UP,this.onUp,this)},onTogglePlayer:function(e){this._subscribeEvents(e)},onDown:function(e){this.node.getBoundingBoxToWorld().contains(e.worldPosition)&&this._toggleAnimation(!0)},onUp:function(){this._toggleAnimation(!1)}});i.default=o,t.exports=i.default,cc._RF.pop()},{GameEvent:"GameEvent"}],KeySpecial:[function(e,t){"use strict";cc._RF.push(t,"7d8197vj1lC8YGrbB6AuTB4","KeySpecial"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],LebelNumbers:[function(e,t){"use strict";cc._RF.push(t,"b1281FBNFBMdaxdxKGjiVuw","LebelNumbers");var i,n=(i=e("GameEvent"))&&i.__esModule?i:{default:i};cc.Class({extends:cc.Component,properties:{_labelText:{default:null,serializable:!1}},onLoad:function(){this._labelText=this.node.getComponent(cc.Label),this._subscribeEvents(!0)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](n.default.UPDATE_LABEL,this.onUpdateLabel,this)},onUpdateLabel:function(e){this._labelText&&(this.node.color="E"===e?cc.Color.GREEN:cc.Color.RED,this._labelText.string=e)}}),cc._RF.pop()},{GameEvent:"GameEvent"}],Letter:[function(e,t){"use strict";cc._RF.push(t,"fa9c3rln7tM3ogmliugN7A1","Letter");var i=n(e("GameObject"));function n(e){return e&&e.__esModule?e:{default:e}}n(e("GameEvent")),cc.Class({extends:i.default,properties:{letterNode:{default:null,type:cc.Label},numberNode:{default:null,type:cc.Label},activeZone:{default:null,type:cc.Node},completeLabel:{default:null,type:cc.Node},_currentLetter:{default:"",serializable:!1},_trueLetter:{default:"",serializable:!1},_tweenToggle:{default:null,serializable:!1},currentNumber:{default:0,serializable:!1,visible:!1},isLockedLetter:{default:!1,serializable:!1,visible:!1,notify:function(e){e!==this.isLockedLetter&&this._lockedLetter(this.isLockedLetter)}},isSetLetter:{default:!1,serializable:!1,visible:!1},isActiveLatter:{default:!1,notify:function(e){e!==this.isActiveLatter&&this._setActive(this.isActiveLatter)},visible:!1},isTargetEntering:{default:!1,serializable:!1},_animationCocos:{default:null,serializable:!1}},start:function(){this._animationCocos=this.node.getComponent(cc.Animation)},prepareReturnToPool:function(){this.setLetter("?"),this.toggleTargeting(!1),this.isActiveLatter=!1,this.isLockedLetter=!1},init:function(e,t,i,n){e&&this.letterNode&&this.setLetter(e),t&&this.numberNode&&(this.currentNumber=t,this.numberNode.string=t),i&&(this._trueLetter=i),n&&this.node.setScale(n.x,n.y)},getIsComplete:function(){return this.letterNode.string==this._trueLetter},setLetter:function(e){this.letterNode&&(this.letterNode.string=e),this.isSetLetter="?"!==e,this._currentLetter=e},toggleTargeting:function(e){this._animationCocos&&(this._animationCocos.play(),this._animationCocos.setCurrentTime(0),e||this._animationCocos.stop())},letterCompleteAnimation:function(e){var t=my.tweenManager.add(this.node,{y:20},.15,"linear",!0),i=!0;t.pingPong(),t.addEvent(0,function(){i||(t.stop(),e instanceof Function&&e()),i=!1})},_lockedLetter:function(e){var t=e?255:0;this.completeLabel&&(this.completeLabel.opacity=t),this.numberNode&&(this.numberNode.string="")},_setActive:function(e){this.activeZone&&(this._tweenToggle&&this._tweenToggle.stop(),this._tweenToggle=my.tweenManager.add(this.activeZone,{opacity:e?255:0},.1,"linear",!0))}}),cc._RF.pop()},{GameEvent:"GameEvent",GameObject:"GameObject"}],LevelManager:[function(e,t){"use strict";cc._RF.push(t,"1e00e2udMVFQLaNYvUAZEAR","LevelManager");var i=r(e("GameEvent")),n=r(e("Level")),a=r(e("LevelType")),o=r(e("GameStates"));function r(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{delayRestart:.3,delayCompete:.35,delayStartGame:2,startLevel:{default:a.default.Result,type:a.default},PREVIEW:{default:!1,editorOnly:!0,serializable:!1},levelType:{default:a.default.Result,type:a.default,notify:function(){this.levelType!==a.default.Result&&(-1===this._convertLevelType.indexOf(this.levelType)&&(this._convertLevelType.push(this.levelType),this._levels.push(null)),this.previewLevel=this._levels[this._convertLevelType.indexOf(this.levelType)])},serializable:!1},previewLevel:{default:null,type:n.default,notify:function(){this.levelType!==a.default.None&&this.previewLevel instanceof n.default&&(this._levels[this._convertLevelType.indexOf(this.levelType)]=this.previewLevel)},visible:function(){return this.levelType!==a.default.Result},serializable:!1},levels:{get:function(){return this._levels},type:[n.default],visible:function(){return this.PREVIEW}},convertLevelType:{get:function(){return this._convertLevelType},type:[a.default],visible:function(){return this.PREVIEW}},_levels:{default:[],type:[n.default]},_convertLevelType:{default:[],type:[a.default]},_level:{default:null,type:n.default,serializable:!1},_restarts:{default:{},serializable:!1},_currentGameStateToSendOnStart:{default:o.default.Game,serializable:!1}},onLoad:function(){cc.systemEvent.on(i.default.COMPLETE_LEVEL,this.onCompeteLevel,this),cc.systemEvent.on(i.default.LOSE_LEVEL,this.onLoseLevel,this),cc.systemEvent.on(i.default.RESTART_LEVEL,this.onRestartLevel,this)},start:function(){var e=this;this.setLevel(this.startLevel,!0),this.scheduleOnce(function(){cc.systemEvent.emit(i.default.SWITCH_GAME_STATE,e._currentGameStateToSendOnStart)},this.delayStartGame)},setLevel:function(e,t){var r=this;void 0===e&&(e=null),void 0===t&&(t=!1),this._convertLevelType.indexOf(e);var s=this._getLevel(e);switch(s){case a.default.Result:this.scheduleOnce(function(){cc.systemEvent.emit(i.default.SWITCH_GAME_STATE,o.default.Result)},this.delayCompete);break;default:this._level instanceof n.default&&this._level.terminate(),this._level=s,this._level.type=e,this._level.init(),t&&this._level.isFake&&this.scheduleOnce(function(){r._currentGameStateToSendOnStart=o.default.Fake,cc.systemEvent.emit(i.default.SWITCH_GAME_STATE,o.default.Fake)},this.delayStartGame),this.onStartLevelCallback(e)}},_getLevel:function(e){var t=this._convertLevelType.indexOf(e);return-1===t?a.default.Result:this._levels[t]},_calculateAllRestartCount:function(){var e=0;for(var t in this._restarts)e+=this._restarts[t];return e},_addRestartCount:function(e){void 0===this._restarts[e]&&(this._restarts[e]=0),this._restarts[e]+=1},onStartLevelCallback:function(e){cc.log("Level start",e)},onLoseLevel:function(){this.scheduleOnce(function(){},this.delayRestart)},onCompeteLevel:function(e){var t=this;void 0===e&&(e=null),e!==a.default.Result?(cc.systemEvent.emit(i.default.TOGGLE_PLAYER,!1),cc.systemEvent.emit(i.default.TOGGLE_TUTOR,!1),cc.systemEvent.emit(i.default.TOGGLE_POINTER,!1),this.scheduleOnce(function(){cc.systemEvent.emit(i.default.START_FLASH,function(){cc.systemEvent.emit(i.default.SWITCH_GAME_STATE,o.default.SwitchLevel),t.setLevel(e)},function(){t._getLevel(e).isFake?cc.systemEvent.emit(i.default.SWITCH_GAME_STATE,o.default.Fake):cc.systemEvent.emit(i.default.SWITCH_GAME_STATE,o.default.Game)})},this.delayCompete)):cc.systemEvent.emit(i.default.SWITCH_GAME_STATE,o.default.Result)},onRestartLevel:function(){var e=this;this._addRestartCount(this._level.type);var t=this._level.type;this.scheduleOnce(function(){cc.systemEvent.emit(i.default.START_FLASH,function(){e.setLevel(t)},function(){e._getLevel(t).isFake?cc.systemEvent.emit(i.default.SWITCH_GAME_STATE,o.default.Fake):cc.systemEvent.emit(i.default.SWITCH_GAME_STATE,o.default.Game)})},this.delayCompete)}}),cc._RF.pop()},{GameEvent:"GameEvent",GameStates:"GameStates",Level:"Level",LevelType:"LevelType"}],LevelType:[function(e,t,i){"use strict";cc._RF.push(t,"4063cDMsS5OqIHA9oBEGPTj","LevelType"),i.__esModule=!0,i.default=void 0;var n=cc.Enum({Result:0,Level1:1,Level2:2});i.default=n,t.exports=i.default,cc._RF.pop()},{}],Level:[function(e,t){"use strict";cc._RF.push(t,"78bb1SjImlJIaXti2d3/Rpx","Level");var i=o(e("GameEvent")),n=o(e("LevelType")),a=o(e("DataType"));function o(e){return e&&e.__esModule?e:{default:e}}o(e("ValueType")),o(e("GameStates")),cc.Class({name:"Level",properties:{dataType:{default:a.default.None,type:a.default},countCondition:{default:1,type:cc.Integer,min:1},nextLevel:{default:n.default.Result,type:n.default},isFake:!1,_isNextLevel:{default:!1,serializable:!1},_completeCondition:{default:0,serializable:!1},_isLastTrigger:{default:!1,serializable:!1}},init:function(){this._completeCondition=0,this._subscriptionEvents(!0),cc.systemEvent.emit(i.default.LOAD_WORLD,this.dataType),cc.systemEvent.emit(i.default.LEVEL_START)},terminate:function(){this._subscriptionEvents(!1)},_subscriptionEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.COMPLETE_CONDITION,this.onCompleteCondition,this),cc.systemEvent[t](i.default.GET_LEVEL,this.onGetLevel,this),cc.systemEvent[t](i.default.DRAW_VALUE,this.onDrawValue,this),cc.systemEvent[t](i.default.TIME_CHANGE_VALUE,this.onTimeValue,this)},onDrawValue:function(e){0===e&&cc.systemEvent.emit(i.default.TOGGLE_FAIL,function(){cc.systemEvent.emit(i.default.GAME_COMPLETE_CHECK),cc.systemEvent.emit(i.default.COMPLETE_CONDITION),cc.systemEvent.emit(i.default.TOGGLE_TIMER,!1),cc.systemEvent.emit(i.default.TOGGLE_TIMER,!0)})},onTimeValue:function(e){0===e&&cc.systemEvent.emit(i.default.TOGGLE_FAIL,function(){cc.systemEvent.emit(i.default.GAME_COMPLETE_CHECK),cc.systemEvent.emit(i.default.COMPLETE_CONDITION),cc.systemEvent.emit(i.default.CLEAR_CANVAS),cc.systemEvent.emit(i.default.TOGGLE_TIMER,!1),cc.systemEvent.emit(i.default.TOGGLE_TIMER,!0)})},onCompleteCondition:function(){this._completeCondition+=1,this._completeCondition>=this.countCondition&&!this._isNextLevel&&(cc.systemEvent.emit(i.default.COMPLETE_LEVEL,this.nextLevel,this),this._isNextLevel=!0)},onGetLevel:function(e){e instanceof Function&&e(this)}}),cc._RF.pop()},{DataType:"DataType",GameEvent:"GameEvent",GameStates:"GameStates",LevelType:"LevelType",ValueType:"ValueType"}],LightMask:[function(e,t){"use strict";cc._RF.push(t,"99f23JJ0VZBsKMxucFTToL4","LightMask");var i=a(e("GameEvent")),n=a(e("GameObjectType"));function a(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{spriteTarget:{default:null,type:cc.Node},_sprite:{default:null,serializable:!1},_mask:{default:null,serializable:!1},_animation:{default:null,serializable:!1},_target:{default:null,serializable:!1}},onLoad:function(){this._target=this.spriteTarget instanceof cc.Node?this.spriteTarget:this.node,this._sprite=this._target.getComponent(cc.Sprite)},onEnable:function(){this._subscribeEvents(!0)},onDisable:function(){this._subscribeEvents(!1)},start:function(){this._createGameObject()},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.LIGHT_BLINK_OBJECT,this.onLightBlink,this)},_createGameObject:function(){var e=this;this._sprite&&cc.systemEvent.emit(i.default.CREATE_GAME_OBJECT,n.default.LightMask,function(t){t instanceof cc.Node&&(t.parent=e._target)},function(t){if(t instanceof cc.Node){e._animation=t.getComponent(cc.Animation)||t.getComponentInChildren(cc.Animation),e._mask=t.getComponent(cc.Mask)||t.getComponentInChildren(cc.Mask),e._animation.node.opacity=0,e._mask.spriteFrame=e._sprite.spriteFrame;var i=[e._target.anchorX,e._target.anchorY];t.anchorX=i[0],t.anchorY=i[1];var n=[e._target.anchorX,e._target.anchorY];e._animation.node.anchorX=n[0],e._animation.node.anchorY=n[1],e._changeSize(e._mask,e._target),e._changeSize(e._animation,e._target)}})},_changeSize:function(e,t){e&&(e.node.width=t.width,e.node.height=t.height)},onLightBlink:function(e){e===this.node&&this._animation&&this._animation.play()}}),cc._RF.pop()},{GameEvent:"GameEvent",GameObjectType:"GameObjectType"}],LineDrawBuffer:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}cc._RF.push(t,"86491VnBAlDUI1dEuTGWsQ+","LineDrawBuffer"),i.__esModule=!0,i.default=void 0;var o={Linear:function(e){var t,i;function n(){return e.apply(this,arguments)||this}return i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i,n.prototype.move=function(e,t){void 0===t&&(t=!1),(0===this._points.length||this._points[this._points.length-1].sub(e).magSqr()>=this._intervalSqr)&&(2===this._points.length&&this._points.shift(),this._points.push(e),this._buffer.push(e))},a(n,[{key:"points",get:function(){return[this._points[0],this._points[1]||this._points[0]]}}]),n}(function(){function e(){this._points=[],this._buffer=[],this._intervalSqr=Math.pow(1,2)}var t=e.prototype;return t.clear=function(){this._buffer=[],this._points=[]},t.move=function(){},a(e,[{key:"points",get:function(){return this._points}},{key:"buffer",get:function(){return this._buffer}}]),e}())};i.default=o,t.exports=i.default,cc._RF.pop()},{}],MainWord:[function(e,t){"use strict";cc._RF.push(t,"f57b44Hyt5B7oee3Desj/rJ","MainWord");var i=o(e("GameEvent")),n=o(e("GameObject")),a=o(e("GameObjectType"));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=s(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}function s(e,t){if(e){if("string"==typeof e)return c(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}cc.Class({extends:n.default,properties:{holder:{default:null,type:cc.Node},posBetweenWords:5,letterOffset:10,_currentIndexWord:{default:0,serializable:!1},_lettersArray:{default:[],serializable:!1},_dataWords:{default:null,serializable:!1},_isCompleted:{default:!1,serializable:!1}},specify:function(e){e&&(this._dataWords=e),!1!==e.isDisable&&e.isDisable||this._subscribeEvents(!0)},initFromPool:function(){this._init(),this._checkCorrectLetter()},prepareReturnToPool:function(){for(var e,t=r(this._lettersArray);!(e=t()).done;){var n=e.value;n.prepareReturnToPool(),cc.systemEvent.emit(i.default.RETURN_TO_POOL,n.node)}this._lettersArray=[]},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.ACTIVE_LETTER,this.onActiveLetter,this),cc.systemEvent[t](i.default.SET_LETTER_OTHER_QUESTIONS,this.onSetLetterOtherQuestions,this),cc.systemEvent[t](i.default.DELETE_LETTER,this.onDeleteActiveLetter,this),cc.systemEvent[t](i.default.SET_LOCK_LETTERS,this.onSetLockLetters,this)},_init:function(){this._dataWords?this._spawnWords():cc.warn("dont have data")},_spawnLetterNode:function(){if(this.world){var e=this.world.createObject({type:a.default.Latter});return e.parent=this.holder||this.node,e.setPosition(cc.Vec2.ZERO),e}cc.warn("dont have world")},_deactivateAll:function(){for(var e=0;e<this._lettersArray.length;e++)this._lettersArray[e].isActiveLatter=!1},_checkCorrectLetter:function(){for(var e,t=r(this._lettersArray);!(e=t()).done;){var i=e.value;i.getIsComplete()&&(i.isLockedLetter=!0)}},_spawnWords:function(){if(0!=this._dataWords.arrayWords.length){for(var e=this._dataWords.arrayWords.length,t=this._dataWords.arrayWords,i=0,a=0,o=0;o<e;o++){var r=t[o],s=r.length*this.letterOffset,c=r.length*this.letterOffset*2+this.posBetweenWords,l=a;a+=c,i+=c;for(var u=0;u<r.length;u++){var h=this._spawnLetterNode(),d=r[u].split(":"),f="Null"===d[0]?"?":d[0],_=d[1],p=d[2];if(h){var m=h.getComponent(n.default),v=(s/r.length+this.letterOffset)*u,y=new cc.Vec2(v+l,0);h.setPosition(y),m&&(m.init(f,_,p),this._lettersArray.push(m))}}}if(this.holder){var E=.5*i-2*this.posBetweenWords;this.holder.setPosition(-E,0)}}},_checkCorrectWord:function(){this._lettersArray.filter(function(e){e.getIsComplete()}).length===this._lettersArray.length&&(this._isCompleted=!0)},deleteLetter:function(){},onActiveLetter:function(e){this._deactivateAll();for(var t,i=r(this._lettersArray);!(t=i()).done;){var n=t.value;n.currentNumber==e&&(n.isActiveLatter=!0)}},onSetLetterOtherQuestions:function(e,t,i){if(i!==this){for(var n,a=r(this._lettersArray);!(n=a()).done;){var o=n.value;o.currentNumber==e&&o.setLetter(t)}this._checkCorrectWord(),this._deactivateAll()}},onDeleteActiveLetter:function(e,t){if(t!==this)for(var i,n=r(this._lettersArray);!(i=n()).done;){var a=i.value;a.currentNumber==e&&a.setLetter("?")}},onSetLockLetters:function(e){for(var t,i=this,n=function(){var e=t.value;i._lettersArray.forEach(function(t){t.currentNumber===e.currentNumber&&(t.isLockedLetter=!0)})},a=r(e);!(t=a()).done;)n();this._deactivateAll()}}),cc._RF.pop()},{GameEvent:"GameEvent",GameObject:"GameObject",GameObjectType:"GameObjectType"}],MapManager:[function(e,t){"use strict";cc._RF.push(t,"1ba79PT/rVBcbI5eUEQPYUA","MapManager"),a(e("GameEvent"));var i=a(e("GameObject")),n=a(e("GameObjectType"));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=r(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}function r(e,t){if(e){if("string"==typeof e)return s(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}cc.Class({extends:i.default,properties:{holder:{default:null,type:cc.Node},mapGreed:{default:[],serializable:!1,visible:!1},_currentCellSize:{default:new cc.Size(0,0),serializable:!1},_currentMapSize:{default:cc.Vec2.ZERO,serializable:!1}},onEnable:function(){this._subscribeEvents(!0)},onDisable:function(){this._subscribeEvents(!0)},specify:function(e){this._currentCellSize=new cc.Size(e.cellSize.w,e.cellSize.h),this._currentMapSize=new cc.Size(e.mapSize.width,e.mapSize.height),this._setOffsetHolderMap(this._currentCellSize,this._currentMapSize),this._createMap(e)},prepareReturnToPool:function(){this.mapGreed=[]},getElementFromIndex:function(e){return e.x>=0&&e.y>=0&&e.x<this._currentMapSize.width&&e.y<this._currentMapSize.height?this.mapGreed[e.y][e.x]:null},_subscribeEvents:function(){},_createMap:function(e){this._createEmptyMap(),e.wall instanceof Array&&this._createSomeObjectInMap(e.wall.reverse(),e.scaleSetting.wall),e.flor instanceof Array&&this._createSomeObjectInMap(e.flor.reverse(),e.scaleSetting.flor),e.trigger instanceof Array&&this._createTriggers(e.trigger,e.scaleSetting.trigger),e.hero&&this._setHero(e.hero,e.scaleSetting.hero)},_setHero:function(e,t){var n=this._createItem(e.type,cc.Vec3.ZERO,e.eulerAngles,t,e.specify);if(n){var a=this.mapGreed[e.position.y][e.position.x],o=n.getComponent(i.default);n.parent=this.holder||this.node,o&&(o.map=this,o.index=new cc.Vec2(e.position.x,e.position.y),o.init instanceof Function&&o.init()),a&&n.setPosition(a.pos.x,10,a.pos.z)}},_createTriggers:function(e,t){for(var i,n=o(e);!(i=n()).done;){var a=i.value,r=this.getElementFromIndex(a.index);r&&this._createItem(a.type,r.pos,cc.Vec3.ZERO,t,a.specify)}},_createEmptyMap:function(){for(var e=0,t=0,i=0;i<this._currentMapSize.height;i++){var n=[];e-=this._currentCellSize.height+.5*this._currentCellSize.height;for(var a=0;a<this._currentMapSize.width;a++){t=t+this._currentCellSize.width+.5*this._currentCellSize.width;var o={currentItem:null,go:null,pos:new cc.Vec3(t,0,e)};n.push(o)}t=0,this.mapGreed.push(n)}},_createSomeObjectInMap:function(e,t){for(var n=e,a=0,o=0;o<this._currentMapSize.height;o++)for(var r=0;r<this._currentMapSize.width;r++){var s=this.mapGreed[o][r],c=n[a];if(null===s.currentItem&&c&&"None"!==c){var l=this._createItem(c.type,s.pos,c.eulerAngles,t,c.specify);l&&(s.go=l.getComponent(i.default),s.currentItem=l)}a++}},_createItem:function(e,t,i,a,o){var r=this.world.createObject({type:n.default[e],position:t,transform:{eulerAngles:i,scale:a},specify:o});return r&&(r.parent=this.holder),r},_setOffsetHolderMap:function(e,t){if(void 0===e&&(e=this._currentCellSize),void 0===t&&(t=this._currentMapSize),this.holder){var i=e.width*t.width-this._currentCellSize.width,n=e.height*t.height-this._currentCellSize.height;this.holder.setPosition(-n,0,i)}}}),cc._RF.pop()},{GameEvent:"GameEvent",GameObject:"GameObject",GameObjectType:"GameObjectType"}],ObjectDragAreaTarget:[function(e,t){"use strict";cc._RF.push(t,"87492V3VZ5Ct46B+YQFyExX","ObjectDragAreaTarget");var i=a(e("GameEvent")),n=a(e("ItemType"));function a(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{itemTypeIncome:{default:n.default.Default,type:n.default},areaToDrop:{default:null,type:cc.Node},_targetDropArea:{default:null,serializable:!1}},onLoad:function(){this._targetDropArea=this.areaToDrop instanceof cc.Node?this.areaToDrop:this.node,this._subscribeEvents(!0)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.ITEM_DROPPED,this.onItemDropped,this)},onItemDropped:function(e,t,a){if(e===n.default[this.itemTypeIncome]){var o=cc.Camera.findCamera(this._targetDropArea).getScreenToWorldPoint(t),r=this._targetDropArea.getBoundingBoxToWorld().contains(o);r&&this.node.emit(i.default.ITEM_DROP_IN_AREA),a instanceof Function&&a(r)}}}),cc._RF.pop()},{GameEvent:"GameEvent",ItemType:"ItemType"}],PersonaType:[function(e,t,i){"use strict";cc._RF.push(t,"7450bI/IXhOM6mgN2nhLB3Q","PersonaType"),i.__esModule=!0,i.default=void 0;var n=cc.Enum({None:0,Hero:3,Enemy:4});i.default=n,t.exports=i.default,cc._RF.pop()},{}],PhysicManager:[function(e,t){"use strict";var i,n,a,o,r,s,c,l,u,h,d,f,_,p,m,v,y,E,T,g,b,C;function A(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t,i,n,a){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}cc._RF.push(t,"4ac372RldxCW5u97uzM3P9H","PhysicManager");var O=cc._decorator,w=O.ccclass,I=O.property;i=I(cc.Boolean),n=I({visible:function(){return this.isPhysicsEnabled},serializable:!1}),a=I({visible:function(){return this.isPhysicsEnabled}}),o=I({visible:function(){return this.isPhysicsEnabled}}),r=I(cc.Boolean),s=I({visible:function(){return this.isColliderEnabled}}),c=I(cc.Boolean),l=I({visible:function(){return this.isPhysics3DEnabled}}),u=I({visible:function(){return this.isPhysics3DEnabled}}),h=I({visible:function(){return this.isPhysics3DEnabled}}),w((C=function(e){var t,i;function n(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return A(t=e.call.apply(e,[this].concat(n))||this,"isPhysicsEnabled",f,S(t)),A(t,"isAccumulatorEnabled",_,S(t)),A(t,"gravity",p,S(t)),A(t,"isDebugPhysics",m,S(t)),A(t,"isColliderEnabled",v,S(t)),A(t,"isColliderDebug",y,S(t)),A(t,"isPhysics3DEnabled",E,S(t)),A(t,"is3DAccumulator",T,S(t)),A(t,"isFixedDigit",g,S(t)),A(t,"isInternalTime",b,S(t)),t.physicsManager=cc.director.getPhysicsManager(),t.colliderManager=cc.director.getCollisionManager(),t.physicsManager3D=cc.director.getPhysics3DManager(),t}i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var a=n.prototype;return a.onLoad=function(){this.init3D(),this.initBox2D(),this.fixPhysics()},a.init3D=function(){this.physicsManager3D&&(this.physicsManager3D.enabled=!0,this.physicsManager3D.useAccumulator=this.is3DAccumulator,this.physicsManager3D.useFixedDigit=this.isFixedDigit,this.physicsManager3D.useInternalTime=this.isInternalTime)},a.initBox2D=function(){my.pm=this,this.physicsManager&&(this.physicsManager.enabled=this.isPhysicsEnabled,this.physicsManager.gravity=this.gravity,this.physicsManager.enabledAccumulator=this.isAccumulatorEnabled),this.colliderManager&&(this.colliderManager.enabled=this.isColliderEnabled),this.isDebugPhysics,this.isColliderDebug&&this.colliderManager},a.fixPhysics=function(){this.physicsManager&&(b2.Body.prototype.SetTransformXY=function(e,t,i){this.m_xf.q.SetAngle(i),this.m_xf.p.Set(e,t),this.m_xf0.Copy(this.m_xf),b2.Transform.MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.a=i,this.m_sweep.c0.Copy(this.m_sweep.c),this.m_sweep.a0=i;for(var n=this.m_fixtureList;n;n=n.m_next)n.Synchronize(this.m_xf,this.m_xf);this.m_world.m_contactManager.FindNewContacts()},b2.Body.prototype.SetType=function(e){if(this.m_type!==e){this.m_type=e,this.ResetMassData(),this.m_type===b2.BodyType.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_sweep.a0=this.m_sweep.a,this.m_sweep.c0.Copy(this.m_sweep.c),this.SynchronizeFixtures()),this.SetAwake(!0),this.m_force.SetZero(),this.m_torque=0;for(var t=this.m_contactList;t;){var i=t;t=t.next,this.m_world.m_contactManager.Destroy(i.contact)}this.m_contactList=null;for(var n=this.m_fixtureList;n;n=n.m_next)n.TouchProxies()}})},a.setIsDebug=function(e){this.isDebugPhysics=e,this.isDebugPhysics},n}(cc.Component),f=R((d=C).prototype,"isPhysicsEnabled",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_=R(d.prototype,"isAccumulatorEnabled",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p=R(d.prototype,"gravity",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return cc.v2(0,-980)}}),m=R(d.prototype,"isDebugPhysics",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),v=R(d.prototype,"isColliderEnabled",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y=R(d.prototype,"isColliderDebug",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),E=R(d.prototype,"isPhysics3DEnabled",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),T=R(d.prototype,"is3DAccumulator",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=R(d.prototype,"isFixedDigit",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=R(d.prototype,"isInternalTime",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d)),cc._RF.pop()},{}],PhysicsHelper:[function(e,t,i){"use strict";function n(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=a(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}function a(e,t){if(e){if("string"==typeof e)return o(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}cc._RF.push(t,"df0d4OX3R5A15GEnJxDATsI","PhysicsHelper"),i.__esModule=!0,i.default=void 0;var r=function(){function e(e){this.node=null,this.gravityScale=e.gravityScale||1,this.friction=e.friction||.2,this.density=e.density||1,this.restitution=e.restitution||0,this.fixedRotation=e.fixedRotation,this._arraysOfPoints=[],this._startPosition=cc.Vec2.ZERO,this._collidersOffsets=[],this._rigidBody=null}var t=e.prototype;return t.removePhysicsComponents=function(){this.node&&(this.node.removeComponent(cc.PhysicsChainCollider),this.node.removeComponent(cc.PhysicsCircleCollider),this.node.removeComponent(cc.RigidBody))},t.createPhysicsBodies=function(e,t,i){void 0===i&&(i=1),this.node=t,this._rigidBody=t.getComponent(cc.RigidBody)||t.addComponent(cc.RigidBody),this._rigidBody.gravityScale=this.gravityScale,this._rigidBody.enabledContactListener=!0,this._rigidBody.bullet=!0,this._rigidBody.fixedRotation=this.fixedRotation,this._rigidBody.allowSleep=!0,this._createCircleMiddle(t),this._startPosition=t.getPosition();var a=t.getComponent(cc.PhysicsChainCollider)||t.addComponent(cc.PhysicsChainCollider);a.friction=this.friction,a.density=this.density,a.restitution=this.restitution,a.points=this._generatePoints(e,i),a.apply();var o=this._finderBorderPoints(a.points);if(o)for(var r,s=n(o);!(r=s()).done;){var c=r.value;this._addCircleCollider(t,c)}return this._rigidBody},t._createCircleMiddle=function(e){var t=e.addComponent(cc.PhysicsCircleCollider);t.density=this.density,t.radius=13,t.apply()},t._generatePoints=function(e,t){var i=[],n=this._getNewPointPosition(e[0]);i.push(n);for(var a=1;a<e.length;a+=t){var o=this._getNewPointPosition(e[a]);i.push(o)}var r=this._getNewPointPosition(e[e.length-1]);return i.push(r),i},t._finderBorderPoints=function(e){if(!(e.length<4)){for(var t,i=e[0],a=e[0],o=e[0],r=e[0],s=n(e);!(t=s()).done;){var c=t.value;c.x<i.x&&(i=c),c.x>a.x&&(a=c),c.y<r.x&&(r=c),c.y>o.x&&(o=c)}return[i,a,o,r]}},t._addCircleCollider=function(e,t){var i=e.addComponent(cc.PhysicsCircleCollider);i.offset=t,i.radius=5,i.friction=this.friction,i.density=this.density,i.restitution=this.restitution,i.apply()},t._getNewPointPosition=function(e){return new cc.Vec2(Math.round(e.x),Math.round(e.y))},e}();i.default=r,t.exports=i.default,cc._RF.pop()},{}],PlateDecrease:[function(e,t){"use strict";cc._RF.push(t,"6e9df37zvlMgoUYYE6TB2lq","PlateDecrease");var i,n=(i=e("IPlate"))&&i.__esModule?i:{default:i};cc.Class({extends:n.default,properties:{activeNodeOnStep:{default:null,type:cc.Node},deactivateNodeOnStep:{default:null,type:cc.Node}},specify:function(e){this._super(e),this.activeNodeOnStep&&(this.activeNodeOnStep.active=!1)},onEnable:function(){},canStepOnPlate:function(e,t){var i=null;return e>0&&this._stepCounter>0&&(e-=1,this._stepCounter=this._stepCounter-1,this.canMoveOnThisCell=!0,i=!1),t instanceof Function&&t(e,i),this.canMoveOnThisCell},changeOnStep:function(){this._isChanged||(this.activeNodeOnStep&&(this.activeNodeOnStep.active=!0),this.deactivateNodeOnStep&&(this.deactivateNodeOnStep.active=!1),this._isChanged=!0)}}),cc._RF.pop()},{IPlate:"IPlate"}],PlateIncrease:[function(e,t){"use strict";cc._RF.push(t,"464bam+wL1HEKG+54Nb7j7U","PlateIncrease");var i,n=(i=e("IPlate"))&&i.__esModule?i:{default:i};cc.Class({extends:n.default,properties:{activePlate:{default:null,type:cc.Node},deactivatePlate:{default:null,type:cc.Node}},specify:function(e){this._super(e),this.deactivatePlate&&this.activePlate&&(this.deactivatePlate.active=!1,this.activePlate.active=!0)},canStepOnPlate:function(e,t){var i=null;return this._stepCounter>0&&(this._stepCounter=this._stepCounter-1,e+=1,i=!0),t instanceof Function&&t(e,i),this.canMoveOnThisCell},changeOnStep:function(){!this._isChanged&&this.activePlate&&this.deactivatePlate&&(this.activePlate.active=!1,this.deactivatePlate.active=!0,this._isChanged=!0)}}),cc._RF.pop()},{IPlate:"IPlate"}],PlayerControl:[function(e,t){"use strict";cc._RF.push(t,"60601dpX6tAwpvfAjBXQ/t+","PlayerControl");var i,n=(i=e("GameEvent"))&&i.__esModule?i:{default:i};cc.Class({extends:cc.Component,properties:{},onEnable:function(){cc.systemEvent.on(n.default.TOGGLE_PLAYER,this.onTogglePlayer,this)},onDisable:function(){cc.systemEvent.off(n.default.TOGGLE_PLAYER,this.onTogglePlayer,this)},_handleEvent:function(e){var t=e?"on":"off";cc.systemEvent[t](n.default.PLAYER_CONTROL_MOVE,this.onPlayerControlMove,this),cc.systemEvent[t](n.default.PLAYER_CONTROL_SHOOT,this.onPlayerShoot,this),cc.systemEvent[t](n.default.PLAYER_CONTROL_STOP_MOVE,this.onPlayerStopMove,this)},onTogglePlayer:function(e){this._handleEvent(e),e||this.node.emit(n.default.HERO_STOP_MOVE),this.node.emit(n.default.TOGGLE_RIGID_BODY,e)},onPlayerControlMove:function(e){this.node.emit(n.default.HERO_MOVE,e)},onPlayerStopMove:function(){this.node.emit(n.default.HERO_STOP_MOVE)},onPlayerShoot:function(){}}),cc._RF.pop()},{GameEvent:"GameEvent"}],Pointer:[function(e,t){"use strict";cc._RF.push(t,"f28ce+V4TxNy4jPVBv+oTZT","Pointer");var i,n=(i=e("GameEvent"))&&i.__esModule?i:{default:i};cc.Class({extends:cc.Component,properties:{interpolationTime:0,drawGravityScale:1,prefab:{default:null,type:cc.Prefab},minCountCircles:0,maxCountCircles:0,minOpacity:0,maxOpacity:255,minWidth:0,maxWidth:0,startTime:0,drawTime:0,_tween:null,_worldGravity:null,_circles:[],_point:null,_velocity:null,_power:0,_interpolation:0},onLoad:function(){this._worldGravity=my.pm.gravity,this._tween=my.tweenManager.add(this,{_interpolation:1},this.interpolationTime),this._tween.loop(),this._createCircles(),this._subscribeEvents(!0)},onEnable:function(){this.onTogglePointer(!1)},update:function(){this._isEnabled&&this._point&&this._updatePointer()},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](n.default.TOGGLE_POINTER,this.onTogglePointer,this),cc.systemEvent[t](n.default.REFRESH_POINTER,this.onRefreshFromPoint,this)},_createCircles:function(){this._timeInterval=this.drawTime/this.maxCountCircles;for(var e=0;e<this.maxCountCircles;e++){var t=cc.instantiate(this.prefab);t.setParent(this.node),this._circles.push(t)}},_updatePointer:function(){for(var e=this._point,t=this._velocity.rotate(cc.math.toRadian(this.node.angle)),i=Math.floor(this.minCountCircles+(this.maxCountCircles-this.minCountCircles)*this._power*this._power),n=0;n<this.maxCountCircles;n+=1){var a=this._circles[n],o=0,r=255;n<=i?(o=this.startTime+n*this._interpolation*this._timeInterval,r=this.minOpacity+(this.maxOpacity-this.minOpacity)*(1-(o-this.startTime)/this.drawTime)):(o=this.startTime+(i+this._interpolation)*this._timeInterval,r=0);var s=this._getPoint(e,t.mul(this._power),this.drawGravityScale,o),c=(this.minWidth+(this.maxWidth-this.minWidth)*(1-(o-this.startTime)/this.drawTime)*this._power)/a.width;a.setPosition(s),a.setScale(c),a.opacity=r}},_getPoint:function(e,t,i,n){var a=cc.v2(0,0);return a.x=e.x+t.x*n+this._worldGravity.x*i*n*n*.5,a.y=e.y+t.y*n+this._worldGravity.y*i*n*n*.5,this.node.convertToNodeSpaceAR(a)},onRefreshFromPoint:function(e,t,i,n){void 0===n&&(n=0),this._point=e,this._velocity=t,this._power=i,this.node.angle=n},onTogglePointer:function(e){this._isEnabled=e,e?(this.node.opacity=255,this._tween&&this._tween.restart()):this.node.opacity=0}}),cc._RF.pop()},{GameEvent:"GameEvent"}],PrefabsParser:[function(e,t){"use strict";cc._RF.push(t,"d4d13gQtG5LP5n78A7Cb9D1","PrefabsParser"),cc.Class({extends:cc.Component,properties:{targetJson:{default:null,type:cc.JsonAsset},properties:{default:[],type:cc.String,tooltip:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u043d\u043e\u0434\u044b - name/position/angle/scale \u0438 \u0442.\u0434."},EXPORT:{get:function(){return!1},set:function(e){if(e){var t=this._getJsonObject(),i=JSON.stringify(t),n=document.createElement("a"),a=new Blob([i],{type:"application/json"});n.href=URL.createObjectURL(a);var o=(this.targetJson?this.targetJson.name:"Export"+this.node.name)+".json";n.download=o,n.click()}}}},editor:{menu:"PrefabsParser/PrefabsParser"},_getJsonObject:function(){var e,t=this,i=this.node,n=[];return i.children.forEach(function(i){e={};for(var a=0;a<t.properties.length;a+=1){var o=i[t.properties[a]];e[t.properties[a]]=t._parseValue(o)}n.push(e)}),n},_parseValue:function(e){if(Array.isArray(e)){for(var t=[],i=0;i<e.length;i+=1)t.push(this._parseValue(e[i]));return t}if("object"==typeof e){for(var n={},a=e.constructor.__values__,o=0;o<a.length;o+=1)n[a[o]]=this._parseValue(e[a[o]]);return n}return e}}),cc._RF.pop()},{}],ProgressBar:[function(e,t,i){"use strict";cc._RF.push(t,"dff9dh1O/1KIbKMloiQ5nO0","ProgressBar"),i.__esModule=!0,i.default=void 0;var n=r(e("GameEvent")),a=r(e("UiElement")),o=r(e("ValueType"));function r(e){return e&&e.__esModule?e:{default:e}}var s=cc.Class({extends:a.default,properties:{barNode:{default:null,type:cc.Node},startValue:0,maxValueNumber:160,progressBarSpriteName:{default:null,type:cc.Sprite},numberLevelNode:{default:null,type:cc.Node},levelNumbers:[cc.SpriteFrame],startShowDelay:1,_maxWidth:{default:0,serializable:!1},_currentValue:{default:0,serializable:!1},_animationBar:{default:null,serializable:!1},_tweenChange:{default:null,serializable:!1}},onLoad:function(){this.barNode&&(this._maxWidth=this.barNode.width),this._initAnimation(),this._handleSubscription(!0),this.isActiveElement=!0},start:function(){this.barNode&&(this.barNode.width=this._maxWidth*this.startValue,this._currentValue=this.barNode.width)},changeValueBar:function(e){if(this.barNode){var t=this._maxWidth*e;this._currentValue=my.utilities.clamp(t,0,this._maxWidth),this._tweenChange&&this._tweenChange.stop(),this._tweenChange=my.tweenManager.add(this.barNode,{width:this._currentValue},.3,"linear",!0)}},setNameProgressBar:function(e){e instanceof cc.SpriteFrame&&this.progressBarSpriteName&&(this.progressBarSpriteName.spriteFrame=e)},_handleSubscription:function(e){var t=e?"on":"off";cc.systemEvent[t](n.default.CHANGE_PROGRESS_BAR,this.onChangeProgressBar,this)},_initAnimation:function(){var e=this;this._animationBar=this.node.getComponent(cc.Animation),this.scheduleOnce(function(){e._animationBar&&e._animationBar.play()},this.startShowDelay)},_upLevelProgressBar:function(e){this.levelNumbers[e]&&this.numberLevelNode&&(this.numberLevelNode.getComponent(cc.Sprite).spriteFrame=this.levelNumbers[e])},onChangeProgressBar:function(e){var t=e/this.maxValueNumber;this.changeValueBar(t),cc.systemEvent.emit(n.default.CHANGE_VALUE,o.default.TimerChange,{value:t})}});i.default=s,t.exports=i.default,cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement",ValueType:"ValueType"}],QuestionTableInputCommand:[function(e,t,i){"use strict";cc._RF.push(t,"01c1aWCBMZJAbUSlXt3bcl0","QuestionTableInputCommand"),i.__esModule=!0,i.default=void 0;var n=a(e("GameEvent"));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t,i;function a(t){var i;return(i=e.call(this,t)||this)._currentTouch=null,i}i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var o=a.prototype;return o.onDown=function(e,t){-1===this._currentTouchID&&(this._currentTouch=this.createTouch(e,t),this._currentTouchID=e._id,this.getTouchInfo(e,t),cc.systemEvent.emit(n.default.QUESTION_INSERT,t))},o.onUp=function(e){this._currentTouchID===e._id&&(this._currentTouch=null,this._currentTouchID=-1,this.destroyTouch(e))},a}(a(e("IInputCommand")).default);i.default=o,t.exports=i.default,cc._RF.pop()},{GameEvent:"GameEvent",IInputCommand:"IInputCommand"}],QuestionTable:[function(e,t){"use strict";cc._RF.push(t,"63be8fxqv9P0pYRHRJ3JZFt","QuestionTable");var i=r(e("GameEvent")),n=r(e("GameObject")),a=r(e("GameObjectType")),o=r(e("ValueType"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=c(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}cc.Class({extends:n.default,properties:{text:{default:null,type:cc.Label},holder:{default:null,type:cc.Node},background:{default:null,type:cc.Node},backgroundColorComplete:{default:function(){return new cc.Color}},rowOffsets:cc.Vec2.ZERO,wordOffset:10,tag:{default:0,visible:!1},_currentIndexWord:{default:0,serializable:!1},_lettersArray:{default:[],serializable:!1},_dataWords:{default:null,serializable:!1},_tweenToggle:{default:null,serializable:!1},_isQuestionInsert:{default:!1,serializable:!1},_input:{default:null,serializable:!1},_currentActiveLetter:{default:null,serializable:!1},isCompleted:{default:!1,notify:function(e){if(e!==this.isCompleted){var t=0;this.isCompleted&&(t=-1,this._completeProcessing(),cc.systemEvent.emit(i.default.CHANGE_VALUE,o.default.Words,{addition:t}))}},visible:!1,serializable:!1}},onLoad:function(){this._input=this.node.getComponent("InputCatcher")},onEnable:function(){this._privateSubscribeEvents(!0)},onDisable:function(){this._privateSubscribeEvents(!1)},start:function(){this._input&&this._input.toggle(!this._dataWords.isHidden)},specify:function(e){e&&(this._dataWords=e,e.isHidden&&(this.node.opacity=0,this._subscribeEvents(!1)),e.tag&&(this.tag=e.tag),e.wordOffset&&(this.wordOffset=e.wordOffset))},initFromPool:function(){this._init(),this._checkCorrectLetter()},prepareReturnToPool:function(){for(var e,t=s(this._lettersArray);!(e=t()).done;){var n=e.value;n.prepareReturnToPool(),cc.systemEvent.emit(i.default.RETURN_TO_POOL,n.node)}this._isQuestionInsert=!1,this.isCompleted=!1,this._currentActiveLetter=null,this._lettersArray=[]},_privateSubscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.TOGGLE_PLAYER,this.onTogglePlayer,this),cc.systemEvent[t](i.default.SET_LETTER_OTHER_QUESTIONS,this.onSetLetterOtherQuestions,this),cc.systemEvent[t](i.default.ACTIVE_HIDDEN_WORDS,this.onActiveHidden,this),cc.systemEvent[t](i.default.ACTIVE_LETTER,this.onActiveLetter,this),cc.systemEvent[t](i.default.DELETE_LETTER,this.onDeleteActiveLetter,this),cc.systemEvent[t](i.default.SET_LOCK_LETTERS,this.onSetLockLetters,this),cc.systemEvent[t](i.default.GET_NONE_COMPLETE_WORD_OBJ,this.onGetNoneCompleteWord,this)},_subscribeEvents:function(e){var t=e?"on":"off";this._dataWords.isHidden||cc.systemEvent[t](i.default.QUESTION_INSERT,this.onQuestionInsert,this)},_init:function(){this._dataWords?(this._spawnWords(),this._setFontSize(),this._setTextQuestion(this._dataWords.text,this._dataWords.textPosition)):cc.warn("dont have data")},_completeProcessing:function(){this._input&&this._input.toggle(!1),cc.systemEvent.emit(i.default.SET_LOCK_LETTERS,this._lettersArray),this._privateSubscribeEvents(!1),this._subscribeEvents(!1),this._toggleTargeting(!1),this._lerpColorBack(),this._recursionCompleteCall(0),this._isQuestionInsert=!1},_recursionCompleteCall:function(e){var t=this;this._lettersArray[e]&&this._lettersArray[e].letterCompleteAnimation(function(){if(e<t._lettersArray.length){var i=e+1;t._recursionCompleteCall(i)}e===t._lettersArray.length-1&&t._toggleBack(!1)})},_setFontSize:function(){this._dataWords.fontSize&&this.text&&(this.text.fontSize=this._dataWords.fontSize,this.text.lineHeight=this._dataWords.fontSize)},_setTextQuestion:function(e,t){this.text&&(this.text.string=e,this.text.node.setPosition(t||cc.Vec2.ZERO))},_spawnLetterNode:function(){if(this.world){var e={scale:this._dataWords.letterScale},t=this.world.createObject({type:a.default.Latter,transform:e});return t.parent=this.holder||this.node,t.setPosition(cc.Vec2.ZERO),t}cc.warn("dont have world")},_spawnWords:function(){if(0!=this._dataWords.arrayWords.length)for(var e=this._dataWords.arrayWords.length,t=this._dataWords.arrayWords,i=e*this.wordOffset,a=0;a<e;a++){var o=this._spawnLetterNode(),r=t[a].split(":"),s="Null"===r[0]?"?":r[0],c=r[1],l=r[2];if(o){var u=o.getComponent(n.default),h=(i/e+this.wordOffset)*a,d=new cc.Vec2(h+this.rowOffsets.x,0);o.setPosition(d),u&&(u.init(s,c,l,this._dataWords.letterScale),this._lettersArray.push(u))}}},_checkCorrectWord:function(){if(!this.isCompleted){if(this._lettersArray.filter(function(e){return!0===e.getIsComplete()}).length===this._lettersArray.length)return this._isQuestionInsert&&cc.systemEvent.emit(i.default.TOGGLE_RIGHT_WORD,!0),void(this.isCompleted=!0);this._lettersArray.filter(function(e){return e.isSetLetter}).length===this._lettersArray.length&&this._isQuestionInsert&&cc.systemEvent.emit(i.default.TOGGLE_RIGHT_WORD,!1)}},_activeLetterNode:function(){this._deactivateAll();var e=this._lettersArray.find(function(e){if(!e.isSetLetter&&!e.isLockedLetter)return e});if(!e)for(var t=this._lettersArray.length-1;t>=0;t--){var n=this._lettersArray[t];if(!n.isLockedLetter){e=n;break}}this._currentActiveLetter=e;for(var a,o=s(this._lettersArray);!(a=o()).done;){var r=a.value;r.currentNumber==e.currentNumber&&(r.isActiveLatter=!0)}cc.systemEvent.emit(i.default.ACTIVE_LETTER,e.currentNumber,this)},_deactivateAll:function(){for(var e=0;e<this._lettersArray.length;e++)this._lettersArray[e].isActiveLatter=!1},_toggleBack:function(e){this.background&&(this._tweenToggle&&this._tweenToggle.stop(),this._tweenToggle=my.tweenManager.add(this.background,{opacity:e?255:0},.1,"linear",!0))},_toggleTargeting:function(e){for(var t,i=s(this._lettersArray);!(t=i()).done;)t.value.toggleTargeting(e)},_insertQuestionProcessing:function(){cc.systemEvent.emit(i.default.TOGGLE_KEY_BOARD,!0),cc.systemEvent.emit(i.default.INSERT_QUESTION_TARGET,this),this._isQuestionInsert=!0,this._activeLetterNode(),this._toggleBack(!0),this._toggleTargeting(!0)},_lerpColorBack:function(e){var t=this,i={i:0},n=my.tweenManager.add(i,{i:1},1,"linear",!0);n.addUpdateCallback(function(){if(t.background){var e=new cc.Color;cc.Color.lerp(e,t.background.color,t.backgroundColorComplete,i.i),t.background.color=e}}),e instanceof Function&&(n.onComplete=e)},_checkCorrectLetter:function(){for(var e,t=s(this._lettersArray);!(e=t()).done;){var i=e.value;i.getIsComplete()&&(i.isLockedLetter=!0)}},updateWord:function(e){if(!this.isCompleted&&this._currentActiveLetter){for(var t,n=s(this._lettersArray);!(t=n()).done;){var a=t.value;a.currentNumber==this._currentActiveLetter.currentNumber&&a.setLetter(e)}this._checkCorrectWord(),cc.systemEvent.emit(i.default.SET_LETTER_OTHER_QUESTIONS,this._currentActiveLetter.currentNumber,e,this),this.isCompleted?this._deactivateAll():this._activeLetterNode()}},deleteWord:function(){if(!this.isCompleted){for(var e,t=null,n=s(this._lettersArray);!(e=n()).done;){var a=e.value;a.isActiveLatter&&(t=a)}for(var o=this._lettersArray.indexOf(t);o>=0;o--){var r=this._lettersArray[o];if(r.isSetLetter&&!r.isLockedLetter){t=r;break}}if(t){for(var c,l=s(this._lettersArray);!(c=l()).done;){var u=c.value;t.currentNumber===u.currentNumber&&(u.setLetter("?"),u.isSetLetter=!1,u.isActiveLatter=!1)}cc.systemEvent.emit(i.default.DELETE_LETTER,t.currentNumber,this)}this._activeLetterNode(),this._checkCorrectWord()}},onActiveLetter:function(e,t){if(t!==this){this._deactivateAll();for(var i,n=s(this._lettersArray);!(i=n()).done;){var a=i.value;a.currentNumber==e&&(a.isActiveLatter=!0)}}},onDeleteActiveLetter:function(e,t){if(t!==this)for(var i,n=s(this._lettersArray);!(i=n()).done;){var a=i.value;a.currentNumber==e&&a.setLetter("?")}},onSetLetterOtherQuestions:function(e,t,i){if(i!==this){for(var n,a=s(this._lettersArray);!(n=a()).done;){var o=n.value;o.currentNumber==e&&o.setLetter(t)}this._checkCorrectWord()}},onQuestionInsert:function(e){"object"==typeof e&&e.node===this.node||"number"==typeof e&&e===this.tag?this._insertQuestionProcessing():(this._isQuestionInsert=!1,this._toggleBack(!1),this._toggleTargeting(!1))},onActiveHidden:function(e,t){var i=this;void 0===t&&(t=!0);var n=t?255:0;"number"==typeof e&&e===this.tag&&my.tweenManager.add(this.node,{opacity:n},.2,"linear",!0),e instanceof Array&&"number"==typeof e.find(function(e){return e===i.tag})&&my.tweenManager.add(this.node,{opacity:n},.2,"linear",!0)},onTogglePlayer:function(e){this._subscribeEvents(e)},onSetLockLetters:function(e){for(var t,i=this,n=function(){var e=t.value;i._lettersArray.forEach(function(t){t.currentNumber===e.currentNumber&&(t.isLockedLetter=!0)})},a=s(e);!(t=a()).done;)n();this._deactivateAll()},onGetNoneCompleteWord:function(e,t){this.isCompleted||t instanceof Function&&t(this._isQuestionInsert)}}),cc._RF.pop()},{GameEvent:"GameEvent",GameObject:"GameObject",GameObjectType:"GameObjectType",ValueType:"ValueType"}],Result:[function(e,t){"use strict";cc._RF.push(t,"5a193rjU8FLhb0Dxfg9agF7","Result");var i=a(e("GameEvent")),n=a(e("UiElement"));function a(e){return e&&e.__esModule?e:{default:e}}a(e("EffectType"));var o=cc.Class({properties:{buttonTextNode:{default:null,type:cc.Node},spriteFailText:{default:null,type:cc.SpriteFrame},buttonMain:{default:null,type:cc.Node}},setSpriteFrame:function(e,t){e&&this.buttonTextNode&&t&&(this.buttonTextNode.getComponent(cc.Sprite).spriteFrame=t)},playAnimation:function(){if("adwords"!==AD_TYPE&&"facebook"!==AD_TYPE&&this.buttonMain){var e=this.buttonMain.getComponent(cc.Animation);e&&e.play()}},name:"Button"});cc.Class({extends:n.default,properties:{button:{default:function(){return new o},type:o},referenceEffectPosition:{default:null,type:cc.Node},winResult:{default:null,type:cc.Node},failResult:{default:null,type:cc.Node},opacitySpehoedWin:3,opacitySpeedLoose:1,isDebug:!1},onLoad:function(){cc.systemEvent.on(i.default.RESULT_SHOW,this.show,this),this.isDebug?this.show(!0):this.hide()},show:function(e){var t=this;void 0===e&&(e=!0);var n=e?this.opacitySpeedWin:this.opacitySpeedLoose;this.node.active=!0,this.button.buttonMain&&(this.button.buttonMain.active=!0);var a=my.tweenManager.add(this.node,{opacity:255},n,"linear",!0);e?this.resultWinShow():(this.resultLoseShow(),this.button.setSpriteFrame(!0,this.button.spriteFailText)),a.onComplete=function(){cc.systemEvent.emit(i.default.PLAYER_CAN_REDIRECT),t.button.playAnimation()}},hide:function(){this.node.opacity=0,this.failResult&&(this.failResult.active=!1),this.winResult&&(this.winResult.active=!1),this.button.buttonMain&&(this.button.buttonMain.active=!1),this.node.active=!1},resultWinShow:function(){if(this.winResult){this.winResult.active=!0;var e=this.winResult.getComponent(cc.Animation);e&&e.play()}},resultLoseShow:function(){if(this.failResult){this.failResult.active=!0;var e=this.failResult.getComponent(cc.Animation);e&&e.play()}},_getEffectNode:function(e){if(e.prefab){var t=cc.instantiate(e.prefab);return t.parent=this.node,t}}}),cc._RF.pop()},{EffectType:"EffectType",GameEvent:"GameEvent",UiElement:"UiElement"}],ScoreSpawner:[function(e,t){"use strict";cc._RF.push(t,"08a85cWdfFHu6Y1qNL963Ga","ScoreSpawner");var i=o(e("GameEvent")),n=o(e("GameObjectType")),a=o(e("Score"));function o(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{},onLoad:function(){},onEnable:function(){this._handleSubscription(!0)},onDisable:function(){this._handleSubscription(!1)},_handleSubscription:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.SET_SCORE,this.onSetScore,this)},_createScore:function(e,t,o){var r=this;cc.systemEvent.emit(i.default.CREATE_GAME_OBJECT,n.default.ScoreAnnounce,function(e){if(e instanceof cc.Node){var i=e.getComponent(a.default);e.parent=r.node.parent;var n=r.node.convertToNodeSpaceAR(t);e.setPosition(n),e.setScale(new cc.Vec3(.006,.006,.006)),i&&i.init(o)}},function(t){if(t instanceof cc.Node){var i=t.getComponent(a.default);i&&i.setScore(e)}})},onSetScore:function(e,t,i){this._createScore(e,t,i)}}),cc._RF.pop()},{GameEvent:"GameEvent",GameObjectType:"GameObjectType",Score:"Score"}],Score:[function(e,t,i){"use strict";cc._RF.push(t,"d6f7dJ28R9Ljpph4nDXkD2l","Score"),i.__esModule=!0,i.default=void 0;var n=r(e("GameEvent")),a=r(e("GameObjectType")),o=r(e("ValueType"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=c(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var u={scoreShow:"announcer_score",scoreShowType2:"announcer_score_type_2"},h=cc.Class({extends:cc.Component,properties:{holder:{default:null,type:cc.Node},color:{default:new cc.Color},renderNode:{default:null,type:cc.Sprite},wood:{default:null,type:cc.SpriteFrame},rock:{default:null,type:cc.SpriteFrame},startScore:{default:0,type:cc.Integer},totalCount:0,distanceBetween:0,spriteFrame:{default:[],type:cc.SpriteFrame},angleOffset:cc.Vec3.ZERO,isLookOnCamera:!1,_counter:{default:0,serializable:!1},_arrayNumber:{default:[],serializable:!1},_arrayCounters:{default:[],serializable:!1},_holderNode:{default:null,serializable:!1},_color:{default:new cc.Color,serializable:!1},_currentClip:{default:null,serializable:!1},_rotationTarget:{default:null,serializable:!1}},onLoad:function(){var e=this;cc.systemEvent.emit(n.default.GET_CAMERA_NODE,function(t){e._rotationTarget=t})},init:function(e){if(this._animation=this.node.getComponent(cc.Animation),this._color=this.color,this.renderNode)switch(e){case o.default.TreeCountChop:this.renderNode.spriteFrame=this.wood;break;case o.default.RockCountChop:this.renderNode.spriteFrame=this.rock}this._createItems()},update:function(){this._rotationTarget&&this.isLookOnCamera&&(this.node.lookAt(this.node.parent.convertToNodeSpaceAR(this._rotationTarget.convertToWorldSpaceAR(cc.Vec3.ZERO))),this.node.eulerAngles=cc.v3(0,this.node.eulerAngles.y-180,0).addSelf(this.angleOffset))},addScore:function(){for(var e=0;e<this._arrayNumber.length;e++){if(void 0===this.spriteFrame[e])return;var t=this._arrayNumber[e];this._arrayCounters[e]&&this.spriteFrame[t]&&(this._arrayCounters[e].getComponent(cc.Sprite).spriteFrame=this.spriteFrame[t])}},setScore:function(e){this._counter=Math.abs(e),this._arrayNumber=[];for(var t=this._counter;t>0;)this._arrayNumber.push(t%10),t=parseInt(t/10);this.addScore(),this._currentClip=my.utilities.randomItemFromObject(u),this._animation&&this._animation.play()},_setColor:function(e,t){if(e){e.color=t;for(var i,n=s(e.children);!(i=n()).done;)i.value.color=t}},_setHolderPosition:function(e){var t=e*this.distanceBetween;this._holderNode.setPosition(-.5*(t+this.distanceBetween),0)},_createItems:function(){var e=this;if(0!==this.totalCount||!this.holder){var t=null;this._holderNode=this.holder,this._setHolderPosition(this.totalCount);for(var i=0;i<this.totalCount;i++)cc.systemEvent.emit(n.default.CREATE_GAME_OBJECT,a.default.ScoreNumber,function(i){if(i instanceof cc.Node){i.setPosition(cc.Vec2.ZERO);var n=(t=null===t?i:t).getPosition();n.x+=e.distanceBetween,i.parent=e._holderNode,i.setPosition(n),e._setColor(i,e._color),e._arrayCounters.push(i),t=i}});this._arrayCounters.reverse()}},onAnimationEvent:function(){this._animation&&(this._animation.play(),this._animation.setCurrentTime(0),this._animation.stop());for(var e,t=s(this._arrayCounters);!(e=t()).done;){var i=e.value;i.getComponent(cc.Sprite).spriteFrame=null,cc.systemEvent.emit(n.default.RETURN_TO_POOL,i)}this._arrayNumber=[],this._arrayCounters=[],this._counter=0,this._holderNode=null,cc.systemEvent.emit(n.default.RETURN_TO_POOL,this.node)}});i.default=h,t.exports=i.default,cc._RF.pop()},{GameEvent:"GameEvent",GameObjectType:"GameObjectType",ValueType:"ValueType"}],ShakeSettings:[function(e,t,i){"use strict";cc._RF.push(t,"b4ce7W+qE9D74j0Vi6CsXAI","ShakeSettings"),i.__esModule=!0,i.default=void 0;var n=cc.Class({properties:{duration:1,amplitude:1,priority:0},name:"ShakeSettings"});i.default=n,t.exports=i.default,cc._RF.pop()},{}],ShakeType:[function(e,t,i){"use strict";cc._RF.push(t,"05c331OW2RIg56epiCC6GyW","ShakeType"),i.__esModule=!0,i.default=void 0;var n=cc.Enum({None:0,ShotTank:2,HitObject:3,HitGround:4});i.default=n,t.exports=i.default,cc._RF.pop()},{}],ShopCloseButtonCommand:[function(e,t,i){"use strict";cc._RF.push(t,"99577Jfv2JNmrj//ziPIpM0","ShopCloseButtonCommand"),i.__esModule=!0,i.default=void 0;var n=r(e("GameEvent")),a=r(e("IInputCommand")),o=(r(e("Direction")),r(e("GameStates")));function r(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t,i;function a(t){return e.call(this,t)||this}return i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i,a.prototype.onUp=function(){cc.systemEvent.emit(n.default.SWITCH_GAME_STATE,o.default.Game)},a}(a.default);i.default=s,t.exports=i.default,cc._RF.pop()},{Direction:"Direction",GameEvent:"GameEvent",GameStates:"GameStates",IInputCommand:"IInputCommand"}],ShopUI:[function(e,t){"use strict";cc._RF.push(t,"ed165aKV9NEwqeZ8el6YHYw","ShopUI");var i=o(e("GameEvent")),n=o(e("UiElement")),a=o(e("ValueType"));function o(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:n.default,properties:{labelCountTrees:{default:null,type:cc.Label},labelCountRock:{default:null,type:cc.Label},holder:{default:null,type:cc.Node},closeButton:{default:null,type:cc.Node},_animationCocos:{default:null,serializable:!1}},onLoad:function(){this.isActiveElement=!1},start:function(){this._subscribeEvents(!0)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.SHOP_TOGGLE,this.onShopToggle,this)},onShopToggle:function(e,t){var n=this;if(void 0===t&&(t=!0),this.isActiveElement!==e&&(this.isActiveElement=e,e?this.show(1):this.hide(1),cc.systemEvent.emit(i.default.GET_VALUE,a.default.TreeCountChop,function(e){n.labelCountTrees&&(n.labelCountTrees.string=e)}),cc.systemEvent.emit(i.default.GET_VALUE,a.default.RockCountChop,function(e){n.labelCountRock&&(n.labelCountRock.string=e)}),this.closeButton&&(this.closeButton.active=t),this.holder)){var o=e?0:600;my.tweenManager.add(this.holder,{y:o},1,"linear",!0)}},onSwitchActiveCallback:function(){}}),cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement",ValueType:"ValueType"}],StickInputCommand:[function(e,t,i){"use strict";cc._RF.push(t,"27c05ZkGHxKkZG8FF/+WJDH","StickInputCommand"),i.__esModule=!0,i.default=void 0;var n=a(e("GameEvent"));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t,i;function a(t){var i;return(i=e.call(this,t)||this)._currentTouch=null,i}i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var o=a.prototype;return o.onDown=function(e,t){-1===this._currentTouchID&&(this._currentTouch=this.createTouch(e,t),this._currentTouchID=e._id,cc.systemEvent.emit(n.default.STICK_DOWN,this._currentTouch.info.location))},o.onMove=function(e,t){if(this._currentTouchID===e._id){var i=this.getTouchInfo(e,t);cc.systemEvent.emit(n.default.STICK_MOVE,i.location)}},o.onUp=function(e){this._currentTouchID===e._id&&(cc.systemEvent.emit(n.default.STICK_UP),this._currentTouch=null,this._currentTouchID=-1,this.destroyTouch(e))},a}(a(e("IInputCommand")).default);i.default=o,t.exports=i.default,cc._RF.pop()},{GameEvent:"GameEvent",IInputCommand:"IInputCommand"}],TargetObject:[function(e,t){"use strict";cc._RF.push(t,"e83895zACxNkb7j8psN/oYB","TargetObject");var i=r(e("GameEvent")),n=r(e("GameObjectType")),a=r(e("GameObject")),o=r(e("ValueType"));function r(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:a.default,properties:{targetType:{default:n.default.None,type:n.default},chopAnimation:cc.String,deadAnimation:cc.String,hits:4,_animationCocos:{default:null,serializable:!1}},onLoad:function(){this.isActivated=!0,this._animationCocos=this.node.getComponent(cc.Animation)},specify:function(){},init:function(){this.isActivated=!0},initFromPool:function(){this.init()},actionTarget:function(){this.isActivated&&(this._animationCocos&&this._animationCocos.play(this.chopAnimation),0===this.hits&&(this.isActivated=!1,cc.systemEvent.emit(i.default.OBJECT_DESTROY,this.node)),this.hits=this.hits-1)},onSwitchActiveCallBack:function(){var e=this.node.getComponent(cc.BoxCollider3D);this.isActivated?e&&(e.isTrigger=!1):(this._animationCocos&&this._animationCocos.play(this.deadAnimation),cc.systemEvent.emit(i.default.CHANGE_VALUE,o.default.Tree,{addition:-1}),e&&(e.isTrigger=!0))}}),cc._RF.pop()},{GameEvent:"GameEvent",GameObject:"GameObject",GameObjectType:"GameObjectType",ValueType:"ValueType"}],TargetShop:[function(e,t){"use strict";cc._RF.push(t,"f1c92RZYfNFj5KvSNyHFEgE","TargetShop");var i=o(e("GameEvent")),n=o(e("GameObject")),a=o(e("GameStates"));function o(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:n.default,properties:{hitZoneNode:{default:null,type:cc.Node}},onLoad:function(){this.hitZoneNode&&(this._hitZone=this.hitZoneNode.getComponent(cc.BoxCollider3D)),this._hitZone&&this._hitZone.on("trigger-enter",this.onHitZoneTrigger,this)},onHitZoneTrigger:function(e){e.type,e.otherCollider.node,"hero"==e.otherCollider.node.group&&cc.systemEvent.emit(i.default.SWITCH_GAME_STATE,a.default.Shopping)}}),cc._RF.pop()},{GameEvent:"GameEvent",GameObject:"GameObject",GameStates:"GameStates"}],Terra:[function(e,t,i){"use strict";cc._RF.push(t,"1d707yOWqdBi5T3XcEx/Zy9","Terra"),i.__esModule=!0,i.default=void 0,a(e("GameEvent"));var n=a(e("HitboxBuilder"));function a(e){return e&&e.__esModule?e:{default:e}}var o=cc.Class({extends:cc.Component,properties:{back:cc.Sprite,terraFrame:cc.SpriteFrame,radiusDestroy:50,threshold:1,maxDamage:7,damageColor:cc.Color.WHITE,damageWidth:10,_sprite:{default:null,serializable:!1},_hitboxBuilder:{default:null,serializable:!1},_m_TextureData:{default:null,serializable:!1},_alphaTextureData:{default:[],serializable:!1},_m_width:{default:0,serializable:!1},_m_heigth:{default:0,serializable:!1},_poligons:{default:[],serializable:!1},_lastPointerPoint:{default:null,serializable:!1},_hitCounter:{default:0,serializable:!1}},onLoad:function(){this._sprite=this.node.getComponent(cc.Sprite)||this.node.addComponent(cc.Sprite),this._hitboxBuilder=new n.default,this._create()},destroyTerraCircle:function(e,t){for(var i={x:Math.round(e.x),y:Math.round(this._m_heigth-e.y)},n=!1,a=Math.max(i.x-t-this.damageWidth,0),o=Math.min(i.x+t+this.damageWidth,this._m_width);a<o;a++)for(var r=Math.max(i.y-t-this.damageWidth,0),s=Math.min(i.y+t+this.damageWidth,this._m_heigth);r<s;r++){var c=cc.v2(a,r).sub(i).mag();if(c<t){var l=this.getPixelData(a,r);l.a>0&&(l.a=0,n=!0,this.updatePixelData(l))}if(c>=t&&c<t+this.damageWidth/5){var u=this.getPixelData(a,r);u.a>0&&(u.r=u.r/1.75,u.g=u.g/2,u.b=u.b/1.5,n=!0,this.updatePixelData(u))}if(c>t+this.damageWidth/5&&c<=t+this.damageWidth*Math.random()){var h=this.getPixelData(a,r);if(h.a>0){var d=new cc.Color(0,0,0),f=new cc.Color(0,0,0);cc.Color.add(f,this.damageColor,new cc.Color(2*Math.random(),5*Math.random(),10*Math.random())),cc.Color.subtract(d,h,f),h.r=d.r,h.g=d.g,h.b=d.b,n=!0,this.updatePixelData(h)}}}if(n){for(var _=i.y+t+1;_<i.y+t+7;_++)if(this.getPixelData(i.x,_).a>0&&0===this.getPixelData(i.x,_+1).a){this.destroyTerraCircle({x:i.x,y:this._m_heigth-_});break}for(var p=i.y-t-1;p>i.y-t-7;p--)if(this.getPixelData(i.x,p).a>0&&0===this.getPixelData(i.x,p-1).a){this.destroyTerraCircle({x:i.x,y:this._m_heigth-p});break}for(var m=i.x+t+1;m<i.x+t+7;m++)if(this.getPixelData(m,i.y).a>0&&0===this.getPixelData(m+1,i.y).a){this.destroyTerraCircle({x:m,y:this._m_heigth-i.y});break}for(var v=i.x-t-1;v>i.x-t-7;v--)if(this.getPixelData(v,i.y).a>0&&0===this.getPixelData(v-1,i.y).a){this.destroyTerraCircle({x:v,y:this._m_heigth-i.y});break}this.updateTerra()}},_create:function(){this.terraFrame&&(this.createPixelData(),this.updatePhysicsPoint())},updateTerra:function(){var e=new cc.Texture2D;e.initWithData(this._m_TextureData,cc.Texture2D.PixelFormat.RGBA8888,this._m_width,this._m_heigth);var t=new cc.SpriteFrame(e,this._sprite.spriteFrame.getRect(),this._sprite.spriteFrame.isRotated(),this._sprite.spriteFrame.getOffset(),this._sprite.spriteFrame.getOriginalSize());this._sprite.spriteFrame=t},updatePhysicsPoint:function(){var e=this,t=this._sprite.spriteFrame;this._hitboxBuilder.calculatePoints(this._alphaTextureData,t._rect.width,t._rect.height,this._sprite.node,this.threshold);for(var i=this._hitboxBuilder.getPoints(),n=i.length,a=0;a<n;a++){var o=this._poligons[a];o||(o=this.node.addComponent(cc.PhysicsPolygonCollider),this._poligons[a]=o),o.points=i[a],o.apply()}for(var r=n,s=this._poligons.length;r<s;r++)this._poligons[r].points=[];this.scheduleOnce(function(){e.node.active=!1,e.node.active=!0},0)},createPixelData:function(){if(null!==this._hitboxBuilder){this._sprite.spriteFrame=this.terraFrame.clone(),this._sprite.node.setContentSize(this.terraFrame.getOriginalSize());var e=this._sprite.spriteFrame._texture.getHtmlElementObj(),t=this._hitboxBuilder.parseImg(e);this._m_width=e.width,this._m_heigth=e.height;var i=this._m_width*this._m_heigth*4;this._m_TextureData=new Uint8Array(i),this._alphaTextureData=[];for(var n=0;n<i;n++)this._m_TextureData[n]=t[n],(n+1)%4==0&&this._alphaTextureData.push(this._m_TextureData[n]);this.updateTerra()}},updatePixelData:function(e){var t=e.i;this._m_TextureData[t]=e.r,this._m_TextureData[t+1]=e.g,this._m_TextureData[t+2]=e.b,this._m_TextureData[t+3]=e.a,this._alphaTextureData[t/4]=e.a},getPixelData:function(e,t){var i=4*(t*this._m_width+e);return{i:i,x:e,y:t,r:this._m_TextureData[i],g:this._m_TextureData[i+1],b:this._m_TextureData[i+2],a:this._m_TextureData[i+3]}},onBeginContact:function(e,t,i){if("toxin"===i.node.group){var n=e.getWorldManifold().points;if(n.length>0){var a=this.node.convertToNodeSpaceAR(n[0]),o=cc.v2(Math.round(a.x),Math.round(a.y));this._lastPointerPoint=o.clone(),this.destroyTerraCircle(o,this.radiusDestroy),this.updatePhysicsPoint()}}}});i.default=o,t.exports=i.default,cc._RF.pop()},{GameEvent:"GameEvent",HitboxBuilder:"HitboxBuilder"}],Timer:[function(e,t){"use strict";cc._RF.push(t,"115fbwD4dVJTaM42vSDfRXh","Timer");var i,n=(i=e("GameEvent"))&&i.__esModule?i:{default:i};cc.Class({extends:cc.Component,properties:{timerCount:30,_startTimer:{default:!1,serializable:!1},_userSleepTapTime:{default:0,serializable:!1}},start:function(){this._subscribeEvents(!0)},update:function(e){this._startTimer&&(this._userSleepTapTime>=0?(cc.systemEvent.emit(n.default.CHANGE_PROGRESS_BAR,this._userSleepTapTime),this._userSleepTapTime-=e):(this._startTimer=!1,cc.systemEvent.emit(n.default.CHANGE_PROGRESS_BAR,0)))},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](n.default.TOGGLE_TIMER,this.onToggleTimer,this)},onToggleTimer:function(e){this._startTimer=e,this._userSleepTapTime=this.timerCount}}),cc._RF.pop()},{GameEvent:"GameEvent"}],Toggleinput:[function(e,t){"use strict";cc._RF.push(t,"e75f9jduDZDypoNefC2RQ0t","Toggleinput");var i,n=(i=e("GameEvent"))&&i.__esModule?i:{default:i};cc.Class({extends:cc.Component,properties:{},onLoad:function(){this._subscribeEvents(!0)},start:function(){this.node.active=!1},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](n.default.TOGGLE_INPUT,this.onToggleInput,this)},onToggleInput:function(e){this.node.active!==e&&(this.node.active=e)}}),cc._RF.pop()},{GameEvent:"GameEvent"}],TouchSource:[function(e,t,i){"use strict";cc._RF.push(t,"c02509unCRH7bXNVLbNQPc4","TouchSource"),i.__esModule=!0,i.default=void 0;var n=cc.Enum({Any:0,RedirectButton:1,Tutorial:2,Restart:4,Icon:5,Draw:7,KeyBoard:9,DrawButton:10});i.default=n,t.exports=i.default,cc._RF.pop()},{}],Trigger:[function(e,t){"use strict";cc._RF.push(t,"da5ce20b0FJaYDUG1KfeByf","Trigger");var i=a(e("GameEvent")),n=a(e("GameObject"));function a(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:n.default,properties:{_data:{default:null,serializable:!1},_target3DCollider:{default:null,type:cc.Collider3D}},onLoad:function(){this._target3DCollider=this.node.getComponent(cc.Collider3D)},specify:function(e){this._data=e&&e instanceof Object?e:{},this._target3DCollider&&this._handleEvent(!0)},_handleEvent:function(e){var t=e?"on":"off";this._target3DCollider[t]("trigger-enter",this.onEnterTrigger,this),this._target3DCollider[t]("trigger-exit",this.onExitTrigger,this)},_triggered:function(e){if(void 0===e&&(e=null),e)if(e instanceof Array)for(var t in e)this._sendEvent(e[t]);else this._sendEvent(e)},_sendEvent:function(e){var t=i.default[e.event]||i.default[e]||i.default.None;t!==i.default.None&&cc.systemEvent.emit(t,e.arg1,e.arg2,e.arg3,e.arg4,e.arg5)},onEnterTrigger:function(e){"hero"===e.otherCollider.node.group&&this._onEnterCollision()},onExitTrigger:function(e){"hero"===e.otherCollider.node.group&&this._onExitCollision()},_onEnterCollision:function(){this._data&&(this._triggered(this._data.enter||this._data),this._data.isBeginCollisionDestroy&&(this._handleEvent(!1),cc.systemEvent.emit(i.default.RETURN_TO_POOL,this.node)))},_onExitCollision:function(){this._data&&(this._triggered(this._data.exit||null),this._data.isEndCollisionDestroy&&(this._handleEvent(!1),cc.systemEvent.emit(i.default.RETURN_TO_POOL,this.node)))}}),cc._RF.pop()},{GameEvent:"GameEvent",GameObject:"GameObject"}],TurnManager:[function(e,t){"use strict";cc._RF.push(t,"75124+yvhFDnqQcYvL7MPJW","TurnManager");var i=o(e("GameEvent")),n=o(e("GameStates")),a=o(e("TurnType"));function o(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{timeToCharacterWait:3,maxTime:7,_gameState:null,_timeToPlayer:0,_allEnemyDead:!1,_turnType:{default:null,notify:function(e){e!==this._turnType&&this._switchTurnType(this._turnType)}}},onLoad:function(){this._timeToPlayer=this.timeToCharacterWait,this._subscribeEvents(!0)},update:function(e){this._gameState===n.default.Fake||this._gameState===n.default.Result||this._turnType!==a.default.PlayerShoot||this._allEnemyDead||(this._timeTurn<this._timeToPlayer&&this._timeTurn+e>=this._timeToPlayer&&(cc.systemEvent.emit(i.default.SET_TURN_TYPE,a.default.PlayerDraw),this._timeToPlayer=this.timeToCharacterWait),this._timeTurn+=e)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.SET_STATE_ON_MANAGERS,this.onSetStateOnManager,this),cc.systemEvent[t](i.default.INCREASE_TIME_TURN,this.onIncreaseTimeTurn,this),cc.systemEvent[t](i.default.SET_TURN_TYPE,this.onSetTurnType,this),cc.systemEvent[t](i.default.ENEMY_DEAD,this.onEnemyDead,this)},_switchTurnType:function(e){switch(e){case a.default.PlayerAim:cc.systemEvent.emit(i.default.TOGGLE_TUTOR,!0),cc.systemEvent.emit(i.default.TOGGLE_DRAW_CANVAS,!1),cc.systemEvent.emit(i.default.PLAYER_START_TURN);break;case a.default.PlayerShoot:this._timeTurn=0;break;case a.default.PlayerDraw:cc.systemEvent.emit(i.default.TOGGLE_TUTORIAL_DRAW,!0),cc.systemEvent.emit(i.default.RETURN_WEAPON),cc.systemEvent.emit(i.default.TOGGLE_DRAW_CANVAS,!0),cc.systemEvent.emit(i.default.TOGGLE_ENEMY_SCARE,!1)}},onIncreaseTimeTurn:function(e){var t=this._timeToPlayer+e;this._timeToPlayer=t<this.maxTime?this._timeToPlayer+e:this.maxTime},onSetStateOnManager:function(e){this._gameState=e},onSetTurnType:function(e){this._turnType=e},onEnemyDead:function(e){this._allEnemyDead=e<=0,this._allEnemyDead&&cc.systemEvent.emit(i.default.ALL_ENEMY_DEAD)}}),cc._RF.pop()},{GameEvent:"GameEvent",GameStates:"GameStates",TurnType:"TurnType"}],TurnType:[function(e,t,i){"use strict";cc._RF.push(t,"4ee18yTpoJFF50EjLdR+/Wv","TurnType"),i.__esModule=!0,i.default=void 0;var n=cc.Enum({PlayerDraw:9999999,PlayerShoot:99999991,PlayerAim:99999992});i.default=n,t.exports=i.default,cc._RF.pop()},{}],TutorialManager:[function(e,t){"use strict";cc._RF.push(t,"0a3a1ZKq3FEP5C6Ae8lVo/j","TutorialManager");var i=a(e("GameEvent")),n=a(e("UiElement"));function a(e){return e&&e.__esModule?e:{default:e}}var o=cc.Class({properties:{startPointTag:0,endPointTag:0,moveSpeed:1,offsetPort:cc.Vec2.ZERO,offsetLand:cc.Vec2.ZERO},name:"TutorialRelationship"}),r={animation:{show:"tutorial_show",hide:"tutorial_hide",down:"tutorial_pipe_down",up:"tutorial_pipe_up"},event:{showEnd:"show_end",hideEnd:"hide_end",downEnd:"down_end",upEnd:"up_end",moveEnd:1},resetOnStart:{show:"tutorial_show",down:"tutorial_pipe_down"}};cc.Class({extends:n.default,properties:{getOnStartDelay:0,trail:{default:null,type:cc.MotionStreak},tutorialSettingsArray:[o],_startPointsArray:{default:[],serializable:!1},_endPointsArray:{default:[],serializable:!1},_currentToggle:{default:!1,serializable:!1},_camera:{default:null,serializable:!1},_startPoint:{default:cc.Vec2.ZERO,serializable:!1},_endPoint:{default:cc.Vec2.ZERO,serializable:!1},_currentIndex:{default:0,serializable:!1},_animation:{default:null,serializable:!1},_tweenMove:{default:null,serializable:!1},_currentStartNode:{default:null,serializable:!1}},onLoad:function(){this._animation=this.node.getComponent(cc.Animation),this._subscribeEvents(!0)},start:function(){var e=this;this._camera=cc.Camera.findCamera(this.node),this.scheduleOnce(function(){e._getPipeTutorialTargets()},this.getOnStartDelay)},onEnable:function(){},onDisable:function(){this._subscribeEvents(!1)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.TOGGLE_TUTOR,this.onToggleTutorial,this),cc.systemEvent[t](my.Events.SIZE_CHANGE,this.onSizeChange,this)},_getPipeTutorialTargets:function(){var e=this;this._startPointsArray=[],this._endPointsArray=[],cc.systemEvent.emit(i.default.GET_TUTORIAL_TARGET,function(t){t.isStartPoint&&e._startPointsArray.push(t),t.isEndPoint&&e._endPointsArray.push(t)})},_tutorialSetStartEndPoint:function(e,t,i){if(e&&t){var n=e.getWorldPosition(),a=t.getWorldPosition();this._startPoint=this._camera.getScreenToWorldPoint(n).addSelf(i),this._endPoint=this._camera.getScreenToWorldPoint(a).addSelf(i),this.node.setPosition(this._startPoint)}},_findTargets:function(){var e=this;if(this._currentIndex<this.tutorialSettingsArray.length){var t=this.tutorialSettingsArray[this._currentIndex];this._currentStartNode=null;var n=this._startPointsArray.find(function(i){if(i.tag===t.startPointTag)return e._currentStartNode=i.node,i}),a=this._endPointsArray.find(function(e){if(e.tag===t.endPointTag)return e});if(!a)return this._currentIndex++,void this._findTargets();if(n&&n.currentTargetObject.isCompleted||!n)return this._currentIndex++,void this._findTargets();if(this._tutorialSetStartEndPoint(n,a,my.settings.IS_LANDSCAPE?t.offsetLand:t.offsetPort),n){var o=n.currentTargetObject.tag;[].concat(this._startPointsArray,this._endPointsArray).find(function(e){if(e.currentTargetObject._isQuestionInsert)return!0})||cc.systemEvent.emit(i.default.QUESTION_INSERT,o)}this._animation&&this._animation.play(r.animation.show)}},_tutorialMove:function(e){this._tweenMove=my.tweenManager.add(this.node,{x:this._endPoint.x,y:this._endPoint.y},e,"linear",!0),this._tweenMove.addEvent(1,this.onAnimationEvent,this)},_resetAnimations:function(){if(this._animation)for(var e in r.resetOnStart)this._animation.play(r.animation[e]),this._animation.setCurrentTime(0),this._animation.stop()},onToggleTutorial:function(e){this._currentToggle!==e&&this._animation&&(this._currentIndex=0,this._tweenMove&&(this._tweenMove.stop(),this._tweenMove=null,this._resetAnimations()),e?this._findTargets():(this._animation.play(r.animation.show),this._animation.setCurrentTime(0),this._animation.stop()),this.trail&&(this.trail.enabled=!1),this._currentToggle=e)},onAnimationEvent:function(e){var t=r.event,n=r.animation;switch(e){case t.showEnd:this.trail&&(this.trail.enabled=!0),this._animation&&this._animation.play(n.down),cc.systemEvent.emit(i.default.LIGHT_BLINK_OBJECT,this._currentStartNode);break;case t.downEnd:this._tutorialMove();break;case t.moveEnd:this._animation&&this._animation.play(r.animation.up);break;case t.upEnd:this._animation&&this._animation.play(n.hide);break;case t.hideEnd:this.trail&&(this.trail.enabled=!1),this._findTargets()}},onSizeChange:function(){var e=this;this._camera instanceof cc.Camera&&this._tweenMove&&(this._tweenMove.stop(),this._resetAnimations(),this.trail&&(this.trail.enabled=!1),this.scheduleOnce(function(){e._findTargets()}))}}),cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement"}],TutorialTarget:[function(e,t,i){"use strict";cc._RF.push(t,"f022eBqWrtEEK3hetjPuhVK","TutorialTarget"),i.__esModule=!0,i.default=void 0;var n=r(e("GameEvent")),a=r(e("UiElement")),o=r(e("GameObject"));function r(e){return e&&e.__esModule?e:{default:e}}var s=cc.Class({extends:cc.Component,properties:{isStartPoint:{default:!1,visible:function(){return!this.isEndPoint}},isEndPoint:{default:!1,visible:function(){return!this.isStartPoint}},isEndAndStartPoint:{default:!1,serializable:!1,notify:function(){this.isEndAndStartPoint?(this.isEndPoint=!0,this.isStartPoint=!0):(this.isEndPoint=!1,this.isStartPoint=!1)}},tag:0,targetGO:{default:null,serializable:!1,visible:!1},targetUI:{default:null,serializable:!1,visible:!1},currentTargetObject:{default:null,serializable:!1,visible:!1},tweenShake:{default:null,serializable:!1,visible:!1}},onLoad:function(){this.targetGO=this.node.getComponent(o.default),this.targetUI=this.node.getComponent(a.default),this.currentTargetObject=null!==this.targetGO?this.targetGO:this.targetUI},start:function(){this._getTagIfTagAvailable()},onEnable:function(){this._subscribeEvents(!0)},onDisable:function(){this._subscribeEvents(!1)},getWorldPosition:function(){var e=cc.Camera.findCamera(this.node),t=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO);return e.getWorldToScreenPoint(t)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](n.default.GET_TUTORIAL_TARGET,this.onGetTutorialTarget,this)},_getTagIfTagAvailable:function(){this.targetGO&&this.targetGO.tag&&(this.tag=this.targetGO.tag),this.targetUI&&this.targetUI.tag&&(this.tag=this.targetUI.tag)},onGetTutorialTarget:function(e){e instanceof Function&&e(this)}});i.default=s,t.exports=i.default,cc._RF.pop()},{GameEvent:"GameEvent",GameObject:"GameObject",UiElement:"UiElement"}],Tutorial:[function(e,t){"use strict";cc._RF.push(t,"72276KmGlZJZpWxJS3t1QWx","Tutorial");var i=a(e("GameEvent")),n=a(e("UiElement"));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=r(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}function r(e,t){if(e){if("string"==typeof e)return s(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}cc.Class({extends:n.default,properties:{targetToggleNode:{default:null,type:cc.Node},eventToToggle:{default:i.default.None,type:i.default},tutorText:{default:[],type:cc.Node},trail:{default:null,type:cc.MotionStreak},_currentSwitchTutorialNode:{default:null,serializable:!1},_animation:{default:null,serializable:!1},_currentAnimationClip:{default:null,serializable:!1},_oldToggle:{default:!1,serializable:!1}},onLoad:function(){this._animation=this.node.getComponent(cc.Animation)},onEnable:function(){cc.systemEvent.on(this.eventToToggle,this.onToggleTutorial,this),cc.systemEvent.on(i.default.SET_HOLDER_TUTORIAL,this.onSetHolderTutorial,this),cc.systemEvent.on(my.Events.SIZE_CHANGE,this.onSizeChange,this)},onDisable:function(){cc.systemEvent.off(this.eventToToggle,this.onToggleTutorial,this),cc.systemEvent.off(i.default.SET_HOLDER_TUTORIAL,this.onSetHolderTutorial,this),cc.systemEvent.off(my.Events.SIZE_CHANGE,this.onSizeChange,this)},onToggleTutorial:function(e,t){var n=this;if(void 0===e&&(e=!0),void 0===t&&(t=.1),this._oldToggle!==e){this._oldToggle=e;var a=e?255:0,r=my.tweenManager.add(this.targetToggleNode||this.node,{opacity:a},t,"linear",!0);this._currentSwitchTutorialNode instanceof cc.Node&&(my.tweenManager.add(this._currentSwitchTutorialNode,{opacity:a},t,"linear",!0).onComplete=function(){n._currentSwitchTutorialNode.active=e});for(var s,c=o(this.tutorText);!(s=c()).done;){var l=s.value;l&&my.tweenManager.add(l,{opacity:a},t,"linear",!0)}r.onComplete=function(){n._animation&&(n._animation.play(),n._animation.setCurrentTime(0),n.trail&&n.trail.reset(),e||n._animation.stop())},cc.systemEvent.emit(i.default.TOGGLE_BLACKOUT,e)}},onAnimationEvent:function(){this.trail&&this.trail.reset()},onSetHolderTutorial:function(e){this._currentSwitchTutorialNode=e},onSizeChange:function(){var e=my.settings.IS_LANDSCAPE?30:15;this.trail&&(this.trail.stroke=e,this.trail.reset())}}),cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement"}],UiElement:[function(e,t,i){"use strict";cc._RF.push(t,"dc70baqBFlNH4NqCW88ZQXR","UiElement"),i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Component,properties:{isActiveElement:{default:!1,notify:function(e){e!==this.isActiveElement&&(this.onSwitchActiveCallback instanceof Function?this.onSwitchActiveCallback(this.isActiveElement):this.node.active=this.isActiveElement)},visible:!1},_tweenShow:{default:null,serializable:!1},_tweenHide:{default:null,serializable:!1}},show:function(e){var t=this;void 0===e&&(e=.5),my.tweenManager&&(this.stopTwins(),this._tweenShow=my.tweenManager.add(this.node,{opacity:255},e,"linear",!0),this._tweenShow.onComplete=function(){t.onShowCallBack instanceof Function&&t.onShowCallBack()})},hide:function(e){var t=this;void 0===e&&(e=.5),my.tweenManager&&(this.stopTwins(),this._tweenHide=my.tweenManager.add(this.node,{opacity:0},e,"linear",!0),this._tweenHide.onComplete=function(){t.onHideCallBack instanceof Function&&t.onHideCallBack()})},stopTwins:function(){this._tweenShow&&(this._tweenShow.stop(),this._tweenShow=null),this._tweenHide&&(this._tweenHide.stop(),this._tweenHide=null)},destroyElement:function(){this.node.destroy()},onSwitchActiveCallback:null,onHideCallBack:null,onShowCallBack:null});i.default=n,t.exports=i.default,cc._RF.pop()},{}],UiManager:[function(e,t){"use strict";cc._RF.push(t,"cf58dh0u2dJFbr9SmWD7PIh","UiManager");var i=a(e("UiElement")),n=a(e("GameEvent"));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=r(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}function r(e,t){if(e){if("string"==typeof e)return s(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var c=cc.Class({properties:{prefab:cc.Prefab,isNeedToHideOnResult:!1,zIndex:0},name:"UiCreateHelper"});cc.Class({extends:cc.Component,properties:{uiElements:[c],_uiArray:[]},onLoad:function(){this.subscribeEvents(!0)},onEnable:function(){this._spawnUiElements()},subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](n.default.HIDE_UI,this.onHideUi,this),cc.systemEvent[t](n.default.GET_UI_MANGER_NODE,this.onGetUIManagerNode,this)},_spawnUiElements:function(){for(var e,t=o(this.uiElements);!(e=t()).done;){var i=e.value;if(i.prefab){var n=cc.instantiate(i.prefab);n.setParent(this.node),n.zIndex=i.zIndex,n.active=!0;var a={key:n.name,createdNode:n,isNeedHide:i.isNeedToHideOnResult};this._uiArray.push(a)}}},onHideUi:function(){for(var e,t=o(this._uiArray);!(e=t()).done;){var n=e.value;if(!0===n.isNeedHide){var a=n.createdNode.getComponent(i.default);a?a.isActiveElement=!1:n.createdNode.active=!1}}},onGetUIManagerNode:function(e){e instanceof Function&&e(this.node)}}),cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement"}],ValueType:[function(e,t,i){"use strict";cc._RF.push(t,"3285684R11IurXSo0LlLiQC","ValueType"),i.__esModule=!0,i.default=void 0;var n=cc.Enum({None:0,DrawComplete:9934,TimerChange:9935});i.default=n,t.exports=i.default,cc._RF.pop()},{}],Wall:[function(e,t){"use strict";cc._RF.push(t,"19cc7/dMgxEZop5HwsRL6w9","Wall"),n(e("GameEvent"));var i=n(e("GameObject"));function n(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:i.default,properties:{canMoveOnThisCell:{default:!1,visible:!1}}}),cc._RF.pop()},{GameEvent:"GameEvent",GameObject:"GameObject"}],Weapon:[function(e,t){"use strict";cc._RF.push(t,"d4641fJUiBAyrxJb2XtT6Kd","Weapon");var i,n,a,o,r=l(e("Bullet")),s=(l(e("GameEvent")),l(e("GameObject"))),c=l(e("GameObjectType"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t,i,n,a){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var f=cc._decorator,_=f.ccclass,p=f.property;_((o=function(e){var t,i;function o(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return u(t=e.call.apply(e,[this].concat(o))||this,"bulletPosition",n,h(t)),u(t,"cooldown",a,h(t)),t._directionTarget=null,t._lastShotTime=0,t._isShooting=!1,t._firsShoot=!0,t}i=e,(t=o).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var s=o.prototype;return s.onLoad=function(){},s.update=function(e){this._isShooting&&(this._lastShotTime+=e,this._lastShotTime>=this.cooldown&&(this.shoot(),this._lastShotTime=0))},s.toggleShooting=function(e){this._isShooting=e,this._firsShoot&&e&&(this.shoot(),this._firsShoot=!1)},s.shoot=function(){var e=this._createBullet(),t=this._directionTarget.convertToWorldSpaceAR(cc.v3(0,0,1)).sub(this._directionTarget.convertToWorldSpaceAR(cc.Vec3.ZERO));t.normalize(),e&&e.run(t)},s._createBullet=function(){var e={type:c.default.Bullet,transform:{scale:new cc.Vec3(10,10,10)}},t=this.world.createObject(e);return t?(t.parent=this.world.node,t.position=this.world.node.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(this.bulletPosition)),t.getComponent(r.default)):null},o}(s.default),n=d((i=o).prototype,"bulletPosition",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return cc.v3()}}),a=d(i.prototype,"cooldown",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),i)),cc._RF.pop()},{Bullet:"Bullet",GameEvent:"GameEvent",GameObject:"GameObject",GameObjectType:"GameObjectType"}],World:[function(e,t){"use strict";cc._RF.push(t,"1f32a19heZAzqbhPEWpda9i","World");var i=s(e("GameEvent")),n=s(e("GameObjectType")),a=s(e("EffectType")),o=s(e("ValueType")),r=s(e("DataType"));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=l(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}function l(e,t){if(e){if("string"==typeof e)return u(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}cc.Class({extends:cc.Component,properties:{_objectArray:[],_effectsOnSceneArray:[],_gameObjectArray:[]},onLoad:function(){this._subscribeEvents()},createObject:function(e){var t=this,n=null;return e?(cc.systemEvent.emit(i.default.CREATE_GAME_OBJECT,e.type,function(i,a){i instanceof cc.Node&&(i.parent=t.node,n=i,i.is3DNode?t._setSettings3D(i,e):t._setSettings2D(i,e),t._objectArray.push(i)),a&&(a.world=t,t._gameObjectArray.push(a))},function(t,i){t instanceof cc.Node&&i&&(i.specify instanceof Function&&i.specify(e.specify),i.initFromPool instanceof Function&&i.initFromPool())}),n):n},_subscribeEvents:function(){cc.systemEvent.on(i.default.CHECK_COLLIDE,this.onCheckCollide,this),cc.systemEvent.on(i.default.LOAD_WORLD,this.onLoadWorld,this),cc.systemEvent.on(i.default.RESTART_GAME,this.onRestartGame,this)},_setSettings2D:function(e,t){e.setPosition(t.position||cc.Vec2.ZERO),t.transform&&(e.setScale(t.transform.scale||cc.Vec2.ONE),e.setAnchorPoint(t.transform.anchor||new cc.Vec2(.5,.5)),e.angle=t.transform.angle||0,e.zIndex=t.transform.zIndex||0)},_setSettings3D:function(e,t){e.setPosition(t.position||cc.Vec3.ZERO),t.transform&&(e.setScale(t.transform.scale||cc.Vec3.ONE),e.setAnchorPoint(t.transform.anchor||new cc.Vec2(.5,.5)),e.eulerAngles=t.transform.eulerAngles||cc.Vec3.ZERO)},_createGameObjects:function(e){var t=this;if(e){if(e.world.objects instanceof Array)for(var s,l=c(e.world.objects);!(s=l()).done;)for(var u=s.value,h=u.settings.length,d=0;d<h;d++){var f=u.settings[d].specify,_=cc.Vec2.ZERO,p={};if(u.settings[d].resize){_=u.settings[d].startPosition;var m=this.createObject({type:n.default[u.type],position:cc.Vec2.ZERO,specify:f}),v=this.createObject({type:n.default[u.settings[d].resize.type],position:cc.Vec2.ZERO});if(v){var y=v.getComponent(my.ResizeComponent);(m.getComponent(my.ResizeComponent)||m.addComponent(my.ResizeComponent)).set(y),cc.systemEvent.emit(i.default.RETURN_TO_POOL,v)}m.setPosition(u.settings[d].startPosition||cc.Vec2.ZERO)}else _=u.settings[d].position,p={scale:u.settings[d].scale,angle:u.settings[d].angle,zIndex:u.settings[d].zIndex,anchor:u.settings[d].anchor,eulerAngles:u.settings[d].eulerAngles},this.createObject({type:n.default[u.type],position:_,transform:p,specify:f})}if(e.effect instanceof Array)for(var E,T=c(e.effect);!(E=T()).done;)for(var g=E.value,b=g.positions.length,C=0;C<b;C++){var A=g.positions[C];cc.systemEvent.emit(i.default.SPAWN_EFFECT,{type:a.default[g.type],parent:this.node,zIndex:A.z,position:{x:A.x,y:A.y},scale:g.scale,isReturnToPool:!1,callback:function(e){t._effectsOnSceneArray.push(e)}})}if(e.value instanceof Array)for(var S,R=c(e.value);!(S=R()).done;){var O=S.value;cc.systemEvent.emit(i.default.CHANGE_VALUE,o.default[O.type],{value:O.count})}if(e.map){var w=e.map,I=this._getData(r.default[w.typeMap]),G={scale:w.scale||cc.Vec3.ONE,eulerAngles:w.eulerAngles||cc.Vec3.ZERO};this.createObject({type:n.default.Map,transform:G,position:w.position,specify:I})}if(e.cameraBox){var P=this.createObject({type:n.default[e.cameraBox.type],position:cc.Vec2.ZERO});cc.systemEvent.emit(i.default.SET_DEFAULT_BOX,P,0)}cc.systemEvent.emit(my.Events.SIZE_CHANGE)}},_getData:function(e){var t=null;return cc.systemEvent.emit(i.default.GET_DATA,e,function(e){e instanceof cc.JsonAsset&&(t=e.json)}),t},onCheckCollide:function(e,t){for(var i,n=c(this._objectArray);!(i=n()).done;){var a=i.value,o=a.getComponent(cc.PolygonCollider);if(o&&cc.Intersection.pointInPolygon(e,o.world.points))return void(t instanceof Function&&t(a))}t instanceof Function&&t(null)},onLoadWorld:function(e){for(var t,n=c([].concat(this._objectArray,this._effectsOnSceneArray,this._gameObjectArray));!(t=n()).done;){var a=t.value;a.prepareReturnToPool instanceof Function&&a.prepareReturnToPool(),cc.systemEvent.emit(i.default.RETURN_TO_POOL,a)}this._objectArray=[],this._effectsOnSceneArray=[],this._gameObjectArray=[];var o=this._getData(e);this._createGameObjects(o)},onRestartGame:function(){}}),cc._RF.pop()},{DataType:"DataType",EffectType:"EffectType",GameEvent:"GameEvent",GameObjectType:"GameObjectType",ValueType:"ValueType"}]},{},["AimStick","FireButton","Pointer","CameraBoxes","CameraController","CameraController3D","CameraManager","ShakeSettings","ShakeType","AnimationConfig","Character","PersonaType","Enemy","EnemyMaterialChange","Hero","PlayerControl","DataDictionary","DataType","DictionaryValue","ValueType","Canvas","DrawWeapon","LineDrawBuffer","PhysicsHelper","AimType","Direction","GameEvent","GameStates","PrefabsParser","AnyInputCommand","ButtonInputCommand","CloseButtonInputCommand","DrawAreaInputCommand","DrawButtonInputCommand","DrawInputCommand","FireButtonInputCommand","FirstTouchInputCommand","IInputCommand","ItemInputCommand","KeyBoardInputCommand","QuestionTableInputCommand","ShopCloseButtonCommand","StickInputCommand","InputCatcher","InputManager","InputTypes","TouchSource","DeleteKey","Fail","KeyBoard","KeyNormal","KeyPressAbstract","KeySpecial","AudioManager","ButtonItem","ButtonManager","ObjectDragAreaTarget","ItemDictionary","ItemType","EffectManager","EffectTimer","EffectType","GameManager","GameObject","GameObjectManager","GameObjectType","MapManager","IPlate","PlateDecrease","PlateIncrease","Trigger","Wall","PhysicManager","TurnManager","TurnType","UiManager","Background","Blackout","EditText","LebelNumbers","LightMask","HitboxBuilder","Terra","Letter","MainWord","QuestionTable","Score","ScoreSpawner","TargetObject","TargetShop","Announcer","AnnouncerScore","ProgressBar","Timer","ButtonsShow","FlashLight","IngameButton","IngameLogo","Result","ShopUI","Toggleinput","Tutorial","TutorialManager","TutorialTarget","UiElement","Bullet","Weapon","Level","LevelManager","LevelType","World"]);