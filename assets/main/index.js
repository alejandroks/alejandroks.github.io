window.__require=function e(t,n,i){function a(s,r){if(!n[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){return a(t[s][1][e]||e)},u,u.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<i.length;s++)a(i[s]);return a}({AimStick:[function(e,t){"use strict";cc._RF.push(t,"ea8f1o+BUNCZYjWSou/36W0","AimStick");var n=a(e("GameEvent")),i=a(e("UiElement"));function a(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:i.default,properties:{stickBound:0,inputNode:{default:null,type:cc.Node},_startTapPosition:{default:cc.Vec2.ZERO,serializable:!1},_startStickPosition:{default:cc.Vec2.ZERO,serializable:!1}},onLoad:function(){this.isActiveElement=!0,this.inputNode&&(this._startStickPosition=this.inputNode.getPosition()),cc.systemEvent.on(n.default.TOGGLE_PLAYER,this.onTogglePlayer,this)},onEnable:function(){this.hide(0)},onDisable:function(){this._subscribeEvents(!1)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](n.default.STICK_DOWN,this.onStickDown,this),cc.systemEvent[t](n.default.STICK_MOVE,this.onStickMove,this),cc.systemEvent[t](n.default.STICK_UP,this.onStickUp,this)},onStickDown:function(e){var t=this.node.parent.convertToNodeSpaceAR(e.worldPosition),n=cc.Vec2.ZERO;this.node.setPosition(t),this.inputNode&&(n=this.node.convertToNodeSpaceAR(e.worldPosition)),this._startTapPosition=n,this.show(.1)},onStickMove:function(e){var t=cc.Vec2.ZERO;this.inputNode&&(t=this.inputNode.parent.convertToNodeSpaceAR(e.worldPosition));var i=t.sub(this._startTapPosition),a=i.clone(),o=Math.atan2(a.y,a.x);o=o/Math.PI*180;var s=my.utilities.clamp(i.mag()/this.stickBound,0,1);i.mag()>this.stickBound&&i.normalizeSelf().mulSelf(this.stickBound),this.inputNode&&this.inputNode.setPosition(i),cc.systemEvent.emit(n.default.PLAYER_CONTROL_MOVE,{angle:o,speed:s})},onStickUp:function(){cc.systemEvent.emit(n.default.PLAYER_CONTROL_STOP_MOVE),this.hide(.1)},onHideCallBack:function(){this.inputNode&&this.inputNode.setPosition(this._startStickPosition)},onTogglePlayer:function(e){this.inputNode&&this.inputNode.setPosition(this._startStickPosition),this._subscribeEvents(e),this.node.active=e}}),cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement"}],AimType:[function(e,t,n){"use strict";cc._RF.push(t,"cb29apavzJOioJaOgRAQGTE","AimType"),n.__esModule=!0,n.default=void 0;var i=cc.Enum({None:0,All:1,AWP:2,Pistol:3});n.default=i,t.exports=n.default,cc._RF.pop()},{}],AnimationConfig:[function(e,t,n){"use strict";var i;cc._RF.push(t,"02396MZE51LsJsTOmTYXUml","AnimationConfig"),n.__esModule=!0,n.default=void 0;var a=(0,cc._decorator.ccclass)("AnimationConfig")(i=function(){this.Hero={animation:{idle:"hero_idle",run:"hero_run",chopTree:"hero_chop_tree",chopRock:"hero_chop_rock"},event:{idleEnd:"idle_end",runEnd:"run_end",chopTree:"chop_tree_end",chopRock:"chop_rock_end"},bone:{},skins:{default:"default"}},this.NPC={animation:{idle:"idle"},event:{},bone:{},skins:{default:"default"}}})||i;n.default=a,t.exports=n.default,cc._RF.pop()},{}],AnnouncerScore:[function(e,t,n){"use strict";cc._RF.push(t,"c5d47x9ratEarBV3AcneL9l","AnnouncerScore"),n.__esModule=!0,n.default=void 0,a(e("GameEvent"));var i=a(e("UiElement"));function a(e){return e&&e.__esModule?e:{default:e}}var o=cc.Class({extends:i.default,properties:{numberNode:{default:null,type:cc.Node},numbers:{default:[],type:cc.SpriteFrame},_animation:{default:null,serializable:!1}},onLoad:function(){this._animation=this.node.getComponent(cc.Animation)},toggleAnnouncerScore:function(e,t,n){this.callBackAnimation=n,this._animation&&(this._animation.play(),this._animation.setCurrentTime(0),e||this._animation.stop()),t&&this._setNumber(t)},_setNumber:function(e){this.numbers[e]&&this.numberNode&&(this.numberNode.getComponent(cc.Sprite).spriteFrame=this.numbers[e])},onAnimationEvent:function(){this.callBackAnimation instanceof Function&&(this.callBackAnimation(this),this.callBackAnimation=null)},callBackAnimation:null});n.default=o,t.exports=n.default,cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement"}],Announcer:[function(e,t){"use strict";cc._RF.push(t,"77c54V15mlDT69yU6J2jJQg","Announcer");var n=a(e("UiElement")),i=a(e("GameEvent"));function a(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:n.default,properties:{holder:{default:null,type:cc.Node},eventToToggle:{default:i.default.None,type:i.default},_animation:{default:null,serializable:!1}},onLoad:function(){this._animation=this.node.getComponent(cc.Animation),cc.systemEvent.on(this.eventToToggle,this.onToggleAnnouncer,this),this.holder&&(this.holder.scale=0)},onToggleAnnouncer:function(e){this.isActiveElement!==e&&(this.isActiveElement=e)},onSwitchActiveCallback:function(){var e=this.isActiveElement?"announcer_show":"announcer_hide";this._animation&&(this._animation.play(e),this._animation.setCurrentTime(0))}}),cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement"}],AnyInputCommand:[function(e,t,n){"use strict";cc._RF.push(t,"4d221Hj7udMM7LloXGOeQg0","AnyInputCommand"),n.__esModule=!0,n.default=void 0;var i=o(e("GameEvent")),a=o(e("IInputCommand"));function o(e){return e&&e.__esModule?e:{default:e}}o(e("Direction"));var s=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._currentTouch=null,n._lastInputLocation=cc.Vec2.ZERO,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.onDown=function(e,t){-1===this._currentTouchID&&(this._currentTouch=this.createTouch(e,t),this._currentTouchID=e._id,cc.systemEvent.emit(i.default.STICK_DOWN,this._currentTouch.info))},o.onMove=function(e,t){if(this._currentTouchID===e._id){var n=this.getTouchInfo(e,t);cc.systemEvent.emit(i.default.STICK_MOVE,n)}},o.onUp=function(e){this._currentTouchID===e._id&&(this._currentTouch=null,this._currentTouchID=-1,this.destroyTouch(e),cc.systemEvent.emit(i.default.STICK_UP))},a}(a.default);n.default=s,t.exports=n.default,cc._RF.pop()},{Direction:"Direction",GameEvent:"GameEvent",IInputCommand:"IInputCommand"}],AudioManager:[function(e,t){"use strict";cc._RF.push(t,"52782riHtlMXbpIQ0JFEuiV","AudioManager");var n,i=(n=e("GameEvent"))&&n.__esModule?n:{default:n};cc.Class({extends:cc.Component,properties:{audioClips:{default:[],type:cc.AudioClip}},onLoad:function(){this._map=[],window.SOUND_ON&&this._subscribeEvents(!0)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.AUDIO_PLAY,this.play,this),cc.systemEvent[t](i.default.AUDIO_STOP,this.stop,this)},play:function(e,t,n){for(var i in void 0===t&&(t=!1),void 0===n&&(n=1),this.audioClips)if(this.audioClips[i].name===e)return void(this._map[e]=cc.audioEngine.play(this.audioClips[i],t,n))},stop:function(e){cc.audioEngine.stop(this._map[e])}}),cc._RF.pop()},{GameEvent:"GameEvent"}],Background:[function(e,t){"use strict";cc._RF.push(t,"5344bzggb9GTrSe9Ha6gM4u","Background"),cc.Class({extends:cc.Component,properties:{}}),cc._RF.pop()},{}],Blackout:[function(e,t){"use strict";cc._RF.push(t,"ba501zTJmhOZKOO7CpWqYj+","Blackout");var n,i=(n=e("GameEvent"))&&n.__esModule?n:{default:n};cc.Class({extends:cc.Component,properties:{opacityShow:145,opacityHide:0},onEnable:function(){cc.systemEvent.on(i.default.TOGGLE_BLACKOUT,this.onToggleBlackout,this)},onDisable:function(){cc.systemEvent.on(i.default.TOGGLE_BLACKOUT,this.onToggleBlackout,this)},onToggleBlackout:function(e){void 0===e&&(e=!1);var t=e?this.opacityShow:this.opacityHide;my.tweenManager.add(this.node,{opacity:t},.5,"linear",!0)}}),cc._RF.pop()},{GameEvent:"GameEvent"}],Bullet:[function(e,t){"use strict";cc._RF.push(t,"480321y+y1MmJrPwx2KxFY1","Bullet");var n,i,a,o,s,r,c,l,u,h,d,f=p(e("GameEvent")),m=p(e("GameObject"));function p(e){return e&&e.__esModule?e:{default:e}}function _(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,n,i,a){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var E=cc._decorator,T=E.ccclass,g=E.property;n=g({type:cc.RigidBody3D}),i=g({type:cc.Collider3D}),a=g({type:cc.String}),T((d=function(e){var t,n;function i(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return _(t=e.call.apply(e,[this].concat(i))||this,"rigidBody",s,v(t)),_(t,"collider",r,v(t)),_(t,"lifetime",c,v(t)),_(t,"speed",l,v(t)),_(t,"weaponDamage",u,v(t)),_(t,"targetGroups",h,v(t)),t}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=i.prototype;return a.onLoad=function(){this.collider.on("trigger-enter",this.onTriggerEnter,this)},a.run=function(e){var t=this;this.node.active=!1,this.node.active=!0;var n=e.mul(this.speed);this.rigidBody.setLinearVelocity(n),this.scheduleOnce(function(){cc.systemEvent.emit(f.default.RETURN_TO_POOL,t.node)},this.lifetime)},a.onTriggerEnter=function(e){var t=this,n=e.otherCollider.node.group;this.targetGroups.find(function(e){return e===n})&&(this.unscheduleAllCallbacks(),my.tweenManager.add(this.node,{scaleY:0},.08,"linear",!0).onComplete=function(){cc.systemEvent.emit(f.default.RETURN_TO_POOL,t.node)})},i}(m.default),s=y((o=d).prototype,"rigidBody",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),r=y(o.prototype,"collider",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=y(o.prototype,"lifetime",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=y(o.prototype,"speed",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=y(o.prototype,"weaponDamage",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),h=y(o.prototype,"targetGroups",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o)),cc._RF.pop()},{GameEvent:"GameEvent",GameObject:"GameObject"}],ButtonInputCommand:[function(e,t,n){"use strict";cc._RF.push(t,"09072/oS2lFlL5755VivJBO","ButtonInputCommand"),n.__esModule=!0,n.default=void 0;var i=a(e("GameEvent"));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t,n;function a(t){return e.call(this,t)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.prototype.onUp=function(){cc.systemEvent.emit(i.default.REDIRECT_PROCESSING)},a}(a(e("IInputCommand")).default);n.default=o,t.exports=n.default,cc._RF.pop()},{GameEvent:"GameEvent",IInputCommand:"IInputCommand"}],ButtonItem:[function(e,t,n){"use strict";cc._RF.push(t,"aa32fbFdv9MD4Kkf42+CMp3","ButtonItem"),n.__esModule=!0,n.default=void 0;var i=o(e("GameEvent")),a=o(e("UiElement"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function r(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var l=cc.Class({extends:a.default,properties:{spriteItem:{default:null,type:cc.Node},_currentEventsArray:{default:null,serializable:!1},_currentItemEventArray:{default:null,serializable:!1},_animation:{default:null,serializable:!1},_isPressed:{default:!1,serializable:!1},_currentTimeAnimation:{default:0,serializable:!1},_state:{default:null,serializable:!1},_currentItemToggle:{default:!1,serializable:!1},_currentDragItem:{default:null,serializable:!1},isButtonBlock:{default:!1,serializable:!1,visible:!1},itemType:{default:null,visible:!1,serializable:!1},itemPositions:{default:null,visible:!1,serializable:!1},tag:{default:0,visible:!1,serializable:!1}},onLoad:function(){this._animation=this.node.getComponent(cc.Animation),cc.systemEvent.on(i.default.TOGGLE_PLAYER,this.onTogglePlayer,this)},setCurrentParameters:function(e){var t=this;cc.systemEvent.emit(i.default.RETURN_TO_POOL,this._currentDragItem),cc.systemEvent.emit(i.default.GET_ITEM_DATA,e,function(e){e&&(t.spriteItem&&(t.spriteItem.getComponent(cc.Sprite).spriteFrame=e.spriteConfig.spriteFrame,t.spriteItem.setPosition(e.spriteConfig.position),t.spriteItem.width=e.spriteConfig.spriteFrame._originalSize.width,t.spriteItem.height=e.spriteConfig.spriteFrame._originalSize.height,t.spriteItem.setScale(e.spriteConfig.scale),t.spriteItem.angle=e.spriteConfig.rotation),t._createDragItemItem(e.dragElement,e.dragElementScale),t._currentEventsArray=e.eventsToSend,t.isButtonBlock=!1,t.tag=e.tag)})},playChangeItemAnimation:function(e){var t=this,n=my.tweenManager.add(this.node,{scale:0},1,"linear",!0),i=my.tweenManager.add(this.node,{scale:1},.8,"linear",!1);n.onComplete=function(){i.start(),t.toggleAnimation(!1),t._itemChoseToggle(!1,"item_button_chose"),t._itemChoseToggle(!1,"item_button_apply"),e instanceof Function&&e()},i.onComplete=function(){t.isActivePlayer=!0}},toggleAnimation:function(e){if(this._currentItemToggle!==e){this._currentItemToggle=e;var t=e?cc.WrapMode.Normal:cc.WrapMode.Reverse;this._state&&(this._currentTimeAnimation=this._state.time>=this._state.duration?0:this._state.duration-this._state.time),this._animation&&(this._state=this._animation.play("item_button_toggle"),this._state.wrapMode=t,this._state.time=this._currentTimeAnimation,this._state._process())}},toggleTutorAnimation:function(){this._itemChoseToggle(!0,"item_tutorial_toggle")},_subscribeLocalEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.DOWN_ITEM,this.onDownItem,this),cc.systemEvent[t](i.default.MOVE_ITEM,this.onMoveItem,this),cc.systemEvent[t](i.default.UP_ITEM,this.onUpItem,this)},_itemChoseToggle:function(e,t){if(this._animation){var n=this._animation.playAdditive(t);n.time=0,n._process(),e||this._animation.stop(t)}},_createDragItemItem:function(e,t){var n=this,a=null;cc.systemEvent.emit(i.default.GET_UI_MANGER_NODE,function(e){a=e}),cc.systemEvent.emit(i.default.CREATE_GAME_OBJECT,e,function(e){e instanceof cc.Node&&a instanceof cc.Node&&(e.setParent(a),e.setPosition(cc.Vec2.ZERO),e.zIndex=50,e.setScale(t),n._currentDragItem=e)},function(e){e&&(e.active=!1)})},_moveCurrentItem:function(e){this._currentDragItem&&(this._currentDragItem.active=!0,this._currentDragItem.setPosition(e))},_sendPositionTo:function(){var e=this;if(this._currentDragItem){var t=cc.Camera.findCamera(this._currentDragItem),n=this._currentDragItem.convertToWorldSpaceAR(cc.Vec2.ZERO),a=t.getWorldToScreenPoint(n),o=!1;this._currentDragItem.active=!1,cc.systemEvent.emit(i.default.ITEM_DROPPED,this.itemType,a,function(t){o=!0,t?(e.isButtonBlock=!0,e._isPressed=!1,e._itemChoseToggle(!0,"item_button_chose"),e._itemChoseToggle(!0,"item_button_apply"),cc.systemEvent.emit(i.default.OBJECTIVE_COMPLETE,e)):e.toggleAnimation(!1)}),o||this.toggleAnimation(!1)}},onDownItem:function(e,t){this.isButtonBlock||t.node!==this.node||(this._isPressed=!0,this._moveCurrentItem(e.worldPosition),this.toggleAnimation(!0))},onMoveItem:function(e,t){t.node===this.node&&!this.isButtonBlock&&this._isPressed&&this._moveCurrentItem(e.worldPosition)},onUpItem:function(e){if(this._isPressed){if(this._isPressed=!1,this._moveCurrentItem(e.worldPosition),this.node.getBoundingBoxToWorld().contains(e.worldPosition))return this.toggleAnimation(!1),void(this._currentDragItem&&(this._currentDragItem.active=!1));for(var t,n=s(this._currentEventsArray);!(t=n()).done;){var i=t.value;cc.systemEvent.emit(i)}this._sendPositionTo()}},onTogglePlayer:function(e){void 0===e&&(e=!0),this._subscribeLocalEvents(e),this._currentDragItem&&(this._currentDragItem.active=!1)}});n.default=l,t.exports=n.default,cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement"}],ButtonManager:[function(e,t){"use strict";cc._RF.push(t,"a2dd9ulZYFADYmbqlzH7/N1","ButtonManager");var n=s(e("ItemType")),i=s(e("ButtonItem")),a=s(e("GameEvent")),o=s(e("UiElement"));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var u=cc.Class({properties:{itemType:[n.default],isHidedButton:!1,positionHiddenElement:{default:cc.Vec2.ZERO,visible:function(){return this.isHidedButton}}},name:"ButtonsItemConfig"});cc.Class({extends:o.default,properties:{prefabButton:{default:null,type:cc.Prefab},holder:{default:null,type:cc.Node},distanceBetween:80,buttons:[u],_currentItemsIndex:0,_createdButtonsArray:[],_hidedButtonsArray:[]},onLoad:function(){this._subscribeEvents(!0)},start:function(){this._createButtons()},_createButtons:function(){for(var e,t=r(this.buttons);!(e=t()).done;){var a=e.value;if(this.prefabButton){var o=cc.instantiate(this.prefabButton),s=o.getComponent(i.default);s&&(s.itemType=n.default[a.itemType],s.setCurrentParameters(a.itemType[this._currentItemsIndex]),a.isHidedButton?(this._hidedButtonsArray.push(s),s.node.setPosition(a.positionHiddenElement)):this._createdButtonsArray.push(s)),o.parent=this.holder||this.node}}this._setButtonItemPosition()},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](a.default.OBJECTIVE_COMPLETE,this.onObjectiveComplete,this)},_changeButtonItems:function(){var e=this;this._currentItemsIndex++;for(var t,n=function(){var n=t.value;n.playChangeItemAnimation(function(){n.setCurrentParameters(n.data[e._currentItemsIndex])})},i=r(this._createdButtonsArray);!(t=i()).done;)n()},_setButtonItemPosition:function(e){if(void 0===e&&(e=!1),this.holder&&!(this._createdButtonsArray.length<=0)){var t=this.holder.width,n=(t/this._createdButtonsArray.length+this.distanceBetween)*Math.abs(this._createdButtonsArray.length-1);e?my.tweenManager.add(this.holder,{x:.5*-n,y:0},.5,"linear",!0):this.holder.setPosition(.5*-n,0);for(var i=0;i<this._createdButtonsArray.length;i++){var a=this._createdButtonsArray[i],o=(t/this._createdButtonsArray.length+this.distanceBetween)*i;e?my.tweenManager.add(a.node,{x:o,y:0},.5,"linear",!0):a.node.setPosition(o,0)}}},_deleteItem:function(e){var t=this._createdButtonsArray.indexOf(e);my.tweenManager.add(e.node,{scale:0},.5,"linear",!0).onComplete=function(){e.node.active=!1},-1!=t&&this._createdButtonsArray.splice(t,1)},_setDisableItem:function(){if(this._hidedButtonsArray.length>0){var e=this._hidedButtonsArray[0];this._createdButtonsArray.push(e),this._hidedButtonsArray.splice(0,1)}},onSwitchActiveCallback:function(){var e=this;this.isActiveElement||(my.tweenManager.add(this.node,{scale:0},.5,"linear",1,!0).onComplete=function(){e.node.active=!1})},onObjectiveComplete:function(e){this._deleteItem(e),this._setDisableItem(),this._setButtonItemPosition(!0)}}),cc._RF.pop()},{ButtonItem:"ButtonItem",GameEvent:"GameEvent",ItemType:"ItemType",UiElement:"UiElement"}],ButtonsShow:[function(e,t){"use strict";cc._RF.push(t,"7b340IYhClG3IDXcQ3geyCn","ButtonsShow");var n=a(e("UiElement")),i=a(e("GameEvent"));function a(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:n.default,properties:{showDelay:1},onLoad:function(){cc.systemEvent.on(i.default.BUTTONS_SHOW,this.onButtonsShow,this)},_showButtons:function(){var e=this;this.scheduleOnce(function(){e.show(),cc.systemEvent.emit(i.default.TOGGLE_TUTOR_BUTTONS)},this.showDelay)},onButtonsShow:function(){this._showButtons()}}),cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement"}],CameraBoxes:[function(e,t,n){"use strict";cc._RF.push(t,"51cd6f1BH1MpIQZrL2YOEgE","CameraBoxes"),n.__esModule=!0,n.default=void 0;var i=cc.Class({extends:cc.Component,properties:{defaultBox:{type:cc.Node,get:function(){return this._defaultBox},set:function(e){e instanceof cc.Node&&(this._defaultBox=e)}},_defaultBox:{default:null,type:cc.Node}}});n.default=i,t.exports=n.default,cc._RF.pop()},{}],CameraController3D:[function(e,t){"use strict";cc._RF.push(t,"593bcF0NyZAd7jb2DzgKb4F","CameraController3D");var n,i=(n=e("GameEvent"))&&n.__esModule?n:{default:n};cc.Class({name:"CameraRectResizeHelper",properties:{landscape:new cc.Rect(0,0,1,1),portrait:new cc.Rect(0,0,1,1)}});var a=cc.Class({name:"CameraZoomHelper",properties:{landscape:1,portrait:1}}),o=cc.Class({name:"CameraSetupHelper",properties:{target:{default:null,type:cc.Node,notify:function(){this._isFollow=this._target instanceof cc.Node}},followOffset:new cc.Vec3,followRotation:new cc.Vec3,zoom:{default:null,type:a}}});cc.Class({extends:cc.Component,properties:{currentCameraSetupIndex:{default:0},cameraSetups:{default:[],type:o},cameraShakeBounds:{default:cc.v3()},_camera:{default:null,type:cc.Camera,serializable:!1},_target:{default:null,type:cc.Node,serializable:!1},_isFollow:{default:!1,serializable:!1},_currentCameraRect:{default:new cc.Rect(0,0,1,1),serializable:!1},_followRotation:{default:new cc.Vec3,serializable:!1},_followOffset:{default:new cc.Vec3,serializable:!1},_zoomTween:{default:null,serializable:!1},_followOffsetTween:{default:null,serializable:!1},_followRotationTween:{default:null,serializable:!1},_currentShakeOffset:{default:cc.v3(),serializable:!1},_shakeTween:{default:null,serializable:!1}},onLoad:function(){this._camera=this.getComponent(cc.Camera)},start:function(){this._resize()},onEnable:function(){this._resize(),this._isFollow=this._target instanceof cc.Node,this._subscriptionEvents(!0)},onDisable:function(){this._isFollow=!1,this._subscriptionEvents(!1)},update:function(){this._isFollow&&this._follow()},_follow:function(){var e=this._target.convertToWorldSpaceAR(new cc.Vec3),t=this.node.parent.convertToNodeSpaceAR(e);this.node.setPosition(t);var n=this.node.convertToWorldSpaceAR(this._followOffset),i=this.node.parent.convertToNodeSpaceAR(n);i.addSelf(this._currentShakeOffset),this.node.setPosition(i),this.node.setRotation(cc.quat().fromEuler(this._followRotation))},_subscriptionEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](my.Events.SIZE_CHANGE,this.onSizeChange,this),cc.systemEvent[t](i.default.CAMERA_3D_START_SHAKE,this.onCameraStartShake,this),cc.systemEvent[t](i.default.CAMERA_3D_STOP_SHAKE,this.onCameraStopShake,this),cc.systemEvent[t](i.default.CAMERA_3D_ROTATE,this.onCameraRotate,this),cc.systemEvent[t](i.default.CAMERA_3D_SET_TARGET,this.onCameraSetTarget,this),cc.systemEvent[t](i.default.GET_CAMERA_NODE,this.onGetCameraNode,this),cc.systemEvent[t](i.default.SET_CAMERA_3D_OFFSET,this.onSetCameraOffset,this)},_resize:function(){if(this.cameraSetups[this.currentCameraSetupIndex]){var e=my.settings.IS_LANDSCAPE?"landscape":"portrait",t=this.cameraSetups[this.currentCameraSetupIndex];this._target=t.target,this._camera.zoomRatio=t.zoom[e],this._followOffset=t.followOffset.clone(),this._followRotation=t.followRotation.clone(),this._zoomTween&&this._zoomTween.stop(),this._followOffsetTween&&this._followOffsetTween.stop(),this._followRotationTween&&this._followRotationTween.stop()}},_cameraTransit:function(e,t){if(void 0===t&&(t=.5),this.cameraSetups[e]){var n=this.cameraSetups[e],i=my.settings.IS_LANDSCAPE?"landscape":"portrait";this._target=n.target,this._zoomTween&&this._zoomTween.stop(),this._zoomTween=my.tweenManager.add(this._camera,{zoomRatio:n.zoom[i]},t),this._followOffsetTween&&this._followOffsetTween.stop(),this._followOffsetTween=my.tweenManager.add(this._followOffset,{x:n.followOffset.x,y:n.followOffset.y,z:n.followOffset.z},t),this._followRotationTween&&this._followRotationTween.stop(),this._followRotationTween=my.tweenManager.add(this._followRotation,{x:n.followRotation.x,y:n.followRotation.y,z:n.followRotation.z},t),this.currentCameraSetupIndex=e}},onSizeChange:function(){this._resize()},onCameraStartShake:function(e){var t=this,n=0;this._shakeTween=my.tweenManager.add(this._currentShakeOffset,{x:this.cameraShakeBounds.x,y:this.cameraShakeBounds.y,z:this.cameraShakeBounds.z},.05),this._shakeTween.pingPong(),this._shakeTween.onComplete=function(){e<=++n&&t._shakeTween&&(t._shakeTween.stop(),t._currentShakeOffset=cc.Vec3.ZERO)}},onCameraStopShake:function(){this._shakeTween&&this._shakeTween.stop(),this._currentShakeOffset=cc.v3()},onCameraRotate:function(e,t){this._followRotation.x=e,this._followRotation.y=t},onCameraSetTarget:function(e){e instanceof cc.Node&&(this.cameraSetups[this.currentCameraSetupIndex].target=e,this._target=e)},onSetCameraOffset:function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=.5),e&&this.cameraSetups[this.currentCameraSetupIndex]&&(this.cameraSetups[t].target=e,this._target=e),this._cameraTransit(t,n)},onGetCameraNode:function(e){e instanceof Function&&e(this.node)}}),cc._RF.pop()},{GameEvent:"GameEvent"}],CameraController:[function(e,t){"use strict";cc._RF.push(t,"2a62bSfTktI/qH2ZrEM5f1n","CameraController");var n=a(e("GameEvent")),i=a(e("CameraBoxes"));function a(e){return e&&e.__esModule?e:{default:e}}var o=cc.Enum({None:0,Top:1,Bot:2,Right:3,Left:4}),s=cc.Class({properties:{stickMode:{default:o.None,type:o},defaultBox:{type:cc.Node,get:function(){return this._defaultBox},set:function(e){e instanceof cc.Node&&(this._defaultBox=e)}},_defaultBox:{default:null,type:cc.Node},_oldDefaultBox:{default:null,type:cc.Node,serializable:!1},_transitionDefaultBox:{default:null,type:cc.Node,serializable:!1},_transitionTween:{default:null,serializable:!1},_transitionCoef:{default:0,serializable:!1}},lerpBox:function(e,t,n,i){i||(i=new cc.Node("TransitionBox"));var a=e.getBoundingBoxToWorld(),o=t.getBoundingBoxToWorld();return i.x=a.center.x+(o.center.x-a.center.x)*n,i.y=a.center.y+(o.center.y-a.center.y)*n,i.width=a.width+(o.width-a.width)*n,i.height=a.height+(o.height-a.height)*n,i},name:"CaptureBoxHelper"});cc.Class({extends:cc.Component,properties:{focus:{default:cc.v2(.5,.5),visible:function(){return!this.isUsingCameraBoxes}},isUsingCameraBoxes:!1,zoom:1,cameraBoxes:{default:function(){return new s},visible:function(){return this.isUsingCameraBoxes},type:s},deltaShake:{default:cc.Vec2.ZERO,visible:!1},_camera:{default:null,serializable:!1},_settings:{default:null,serializable:!1},_animation:{default:null,serializable:!1},_defaultZoomRatio:{default:1,serializable:!1},_currentZoomRatio:{default:1,serializable:!1},_isPendingToResizeCamera:{default:!1,serializable:!1}},onLoad:function(){this._camera||(this._camera=this.node.getComponent(cc.Camera)),this._animation=this.node.getComponent(cc.Animation),this.cameraBoxes._transitionDefaultBox=new cc.Node("TransitionDefaultBox"),this.cameraBoxes._transitionDefaultBox.setParent(cc.director.getScene()),this._subscribeEvents()},update:function(){this._isPendingToResizeCamera&&(this._isPendingToResizeCamera=!1,this.captureTarget()),this._updatePosition(),this.captureTarget()},captureTarget:function(e,t,n){var a=1;if(e instanceof i.default&&this._setTransitionToBoxes(e,t,n),this.cameraBoxes.defaultBox){var o=this.cameraBoxes.defaultBox.width,s=this.cameraBoxes.defaultBox.height,r=my.settings.GAME_WIDTH/o,c=my.settings.GAME_HEIGHT/s;a=r<c?r:c}this._setZoomRatio(a)},_subscribeEvents:function(){cc.systemEvent.on(n.default.CAMERA_CAPTURE_TARGET,this.captureTarget,this),cc.systemEvent.on(n.default.SIZE_CHANGE,this.onSizeChange,this),cc.systemEvent.on(n.default.ZOOM_CAMERA,this.onZoomCamera,this),cc.systemEvent.on(n.default.SET_DEFAULT_BOX,this.onSetDefaultBox,this)},_updatePosition:function(){if(this.cameraBoxes.defaultBox){var e=this.cameraBoxes.defaultBox.convertToWorldSpaceAR(cc.Vec2.ZERO),t=cc.v2(this._camera.width*(this.cameraBoxes.defaultBox.anchorX-this.focus.x),this._camera.height*(this.cameraBoxes.defaultBox.anchorX-this.focus.y)),n=e.add(t);this._checkStickPosition(n);var i=this.node.parent.convertToNodeSpaceAR(n);this.node.setPosition(i.add(this.deltaShake))}},_checkStickPosition:function(e){switch(cc.view.getVisibleSize(),this.cameraBoxes.stickMode){case o.Top:e.y=e.y-.5*(this._camera.height-this.cameraBoxes.defaultBox.height);break;case o.Bot:e.y=e.y+.5*(this._camera.height-this.cameraBoxes.defaultBox.height);break;case o.Right:e.x=e.x-.5*(this._camera.width-this.cameraBoxes.defaultBox.width);break;case o.Left:e.x=e.x+.5*(this._camera.width-this.cameraBoxes.defaultBox.width)}},_setTransitionToBoxes:function(e,t,n){var i=this;void 0===t&&(t=0),void 0===n&&(n="linear"),this.cameraBoxes._transitionTween&&(this.cameraBoxes._transitionTween.stop(),this.cameraBoxes._transitionTween=null),t>0?(this.cameraBoxes._transitionCoef=0,this.cameraBoxes._oldDefaultBox=this.cameraBoxes.defaultBox,this.cameraBoxes._transitionTween=my.tweenManager.add(this.cameraBoxes,{_transitionCoef:1},t,"linear"),this.cameraBoxes._transitionTween.addCompleteCallback(function(){i.cameraBoxes._transitionTween=null,i._setNewBox(e)}),this.cameraBoxes._transitionTween.onUpdate=function(){e&&(i.cameraBoxes.lerpBox(i.cameraBoxes._oldDefaultBox,e,i.cameraBoxes._transitionCoef,i.cameraBoxes._transitionDefaultBox),i.cameraBoxes.defaultBox=i.cameraBoxes._transitionDefaultBox)}):this._setNewBox(e)},_setNewBox:function(e){this.cameraBoxes.defaultBox=e},_setZoomRatio:function(e){this._defaultZoomRatio=e,this._currentZoomRatio=this.zoom?e*this.zoom:e,this._camera.zoomRatio=this._currentZoomRatio,this._camera.width=my.settings.GAME_WIDTH/this._camera.zoomRatio,this._camera.height=my.settings.GAME_HEIGHT/this._camera.zoomRatio},onZoomCamera:function(e,t,n,i){var a=this;void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i="linear");var o="number"==typeof e,s="string"==typeof e;cc.Node,this.scheduleOnce(function(){a._zoomTween&&(a._zoomTween.stop(),a._zoomTween=null),a._animation&&a._animation.stop(),o?0===t?a.zoom=e:(a._zoomTween=my.tweenManager.add(a,{zoom:e},t,i),a._zoomTween.start(),a._zoomTween.addCompleteCallback(function(){a._zoomTween=null})):s&&a._animation&&a._animation.play(e)},n)},onSetDefaultBox:function(e,t){var n=this.cameraBoxes.defaultBox?t:-1;this._setTransitionToBoxes(e,n)},onSizeChange:function(){this._isPendingToResizeCamera=!0}}),cc._RF.pop()},{CameraBoxes:"CameraBoxes",GameEvent:"GameEvent"}],CameraManager:[function(e,t){"use strict";cc._RF.push(t,"ebbf8KleyNFE56iwifU5Zqk","CameraManager");var n=o(e("GameEvent")),i=o(e("ShakeType")),a=o(e("CameraController"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function r(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var l=cc.Class({name:"ShakeClip",properties:{clip:{default:null,type:cc.AnimationClip},shakeType:{default:i.default.None,type:i.default}}});cc.Class({extends:cc.Component,properties:{shakedCameras:{default:[],type:[a.default]},shakeClips:{default:[],type:[l]},_animation:{default:null,serializable:!1,type:cc.Animation},_isShaking:{default:!1,serializable:!1}},onLoad:function(){this._animation=this.node.getComponent(cc.Animation)||this.node.addComponent(cc.Animation),this.node.setPosition(cc.Vec2.ZERO),cc.systemEvent.on(n.default.CAMERA_SHAKE,this.onCameraShake,this)},update:function(){this._isShaking&&this._updateCamerasDelta(cc.v2(this.node.position))},_searchClip:function(e){for(var t,n=null,i=s(this.shakeClips);!(t=i()).done;){var a=t.value;if(a.shakeType===e){n=a.clip;break}}return n},_updateCamerasDelta:function(e){if(e instanceof cc.Vec2)for(var t,n=s(this.shakedCameras);!(t=n()).done;){var i=t.value;i&&(i.deltaShake=e)}},onCameraShake:function(e){if(!this._isShaking){var t=this._searchClip(e);this._animation&&t&&(this._isShaking=!0,this._animation.addClip(t),this._animation.play(t.name))}},onShakeComplete:function(){this._isShaking=!1,this.node.setPosition(cc.Vec2.ZERO),this._updateCamerasDelta(cc.Vec2.ZERO)}}),cc._RF.pop()},{CameraController:"CameraController",GameEvent:"GameEvent",ShakeType:"ShakeType"}],Character:[function(e,t,n){"use strict";cc._RF.push(t,"9f0f7pAeSNAsaJULR7Hrk1P","Character"),n.__esModule=!0,n.DelayAnim=n.Character=void 0;var i=r(e("AnimationConfig")),a=r(e("PersonaType")),o=r(e("GameObject")),s=r(e("GameObjectType"));function r(e){return e&&e.__esModule?e:{default:e}}r(e("GameEvent"));var c=cc.Class({properties:{prefab:{default:s.default.None,type:s.default},offset:cc.Vec3.ZERO,rotation:cc.Vec3.ZERO,nodeToSet:cc.Node},name:"SettingsHelper"}),l=cc.Class({properties:{weapon:{default:function(){return new c},type:c},hat:{default:function(){return new c},type:c}},name:"Persona3DHelper"}),u=cc.Class({properties:{isUseSpine:!0,personaType:{default:0,type:a.default},spinePersona:{default:null,type:cc.Node,visible:function(){return this.isUseSpine}},isUse3DMesh:!1,skeleton3DAnimation:{default:null,type:cc.SkeletonAnimation,visible:function(){return this.isUse3DMesh}},meshHelper:{default:function(){return new l},type:l,visible:function(){return this.isUse3DMesh}}},name:"Persona"}),h=cc.Class({properties:{min:0,max:0},name:"DelayAnim"});n.DelayAnim=h;var d=cc.Class({extends:o.default,properties:{persona:{default:function(){return new u},type:u},isControlBaitAnimation:!1,delayAnimation:{default:function(){return new h},type:h,visible:function(){return this.isControlBaitAnimation}},isAlive:{default:!0,notify:function(e){e!==this.isAlive&&this.onAliveCallback()},visible:!1},_config:{default:function(){return new i.default},type:i.default},_currentCharacter:{default:null,serializable:!1},_animationDelay:{default:0,serializable:!1},_canPlayBaitAnimation:{default:!0,serializable:!1},_delayAnimationTime:{default:0,serializable:!1},_currentAnimation:{default:null,serializable:!1},_isStartCounter:{default:!0,serializable:!1},_currentSpineSkeleton:{default:null,serializable:!1},_rotationTween:{default:null,serializable:!1,override:!0},_quat:{default:null,serializable:!1,override:!0}},onLoad:function(){var e=this;this._quat=cc.quat(),this._currentCharacter=this._config[a.default[this.persona.personaType]],this.persona.spinePersona&&(this._currentSpineSkeleton=this.persona.spinePersona.getComponent(sp.Skeleton)),this._currentSpineSkeleton&&(this._currentCharacter&&this._currentCharacter.animation.idle&&this.switchAnimationCharacter(this._currentCharacter.animation.idle,"set",!0),this._currentSpineSkeleton.setEventListener(function(t,n){e.animationEventController(t,n)}))},start:function(){this._getRandomTimeDelayAnimation()},update:function(){this._baitAnimationUpdate()},animationEventController:function(e,t){cc.log(t)},switchAnimationCharacter:function(e,t,n,i){void 0===t&&(t="set"),void 0===n&&(n=!1),void 0===i&&(i=0);var a="set"===t?"setAnimation":"addAnimation";if(this._currentAnimation=e,this._currentSpineSkeleton)return this._currentSpineSkeleton[a](i,e,n)},rotateToPosition:function(e,t,n){var i=this;void 0===t&&(t=.35),this._rotationTween&&this._rotationTween.stop();var a=this.node.eulerAngles.clone();this.node.lookAt(e.getPosition(),cc.Vec3.UP);var o=new cc.Vec3(0,this.node.eulerAngles.y-180,0),s={_interpolation:0},r=cc.quat().fromEuler(a),c=cc.quat().fromEuler(o);this.node.eulerAngles=a,this._rotationTween=my.tweenManager.add(s,{_interpolation:1},t,"linear",!0),this._rotationTween.addUpdateCallback(function(){cc.Quat.slerp(i._quat,r,c,s._interpolation),i.node.setRotation(i._quat)}),this._rotationTween.onComplete=function(){n instanceof Function&&n(),i._quat=cc.quat()}},rotateTo:function(e,t,n){var i=this;void 0===t&&(t=.3),this._rotationTween&&this._rotationTween.stop();var a={_interpolation:0};this._startQuat=this.node.quat,this._targetQuat=cc.quat().fromEuler(e),this._rotationTween=my.tweenManager.add(a,{_interpolation:1},t,"sineInOut",!1),this._rotationTween.addUpdateCallback(function(){cc.Quat.slerp(i._quat,i._startQuat,i._targetQuat,a._interpolation),i.node.setRotation(i._quat)}),this._rotationTween.start(),this._rotationTween.onComplete=function(){n instanceof Function&&n()}},_baitAnimationUpdate:function(e){this._isStartCounter&&this._currentCharacter&&this._currentAnimation===this._currentCharacter.animation.idle&&this.isControlBaitAnimation&&(this._animationDelay<this._delayAnimationTime&&this._animationDelay+e>=this._delayAnimationTime&&this._canPlayBaitAnimation&&this._playBaitAnimation(),this._animationDelay+=e)},_getBone:function(e){if(this._currentSpineSkeleton)return this._currentSpineSkeleton.findBone(e)},_rechargeUpdateAnimations:function(){this._canPlayBaitAnimation=!0,this._animationDelay=0},_playBaitAnimation:function(){this._canPlayBaitAnimation=!1,this._getRandomTimeDelayAnimation(),this._currentCharacter.animation.bait&&this.switchAnimationCharacter(this._currentCharacter.animation.bait)},_getRandomTimeDelayAnimation:function(){this._delayAnimationTime=my.utilities.randomRange(this.delayAnimation.min,this.delayAnimation.max)},_getArraySkins:function(){if(this._currentCharacter){var e=[];for(var t in this._currentCharacter.skin)e.push(this._currentCharacter.skin[t]);return e}},_upGradeCharacter:function(e){this._currentSpineSkeleton&&e&&(this._currentSpineSkeleton.setSkin(e),this._currentSpineSkeleton.setSlotsToSetupPose())},onAliveCallback:function(){}});n.Character=d,cc._RF.pop()},{AnimationConfig:"AnimationConfig",GameEvent:"GameEvent",GameObject:"GameObject",GameObjectType:"GameObjectType",PersonaType:"PersonaType"}],CloseButtonInputCommand:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}cc._RF.push(t,"c206aT/LbhNvrtiKo6Tq2Fb","CloseButtonInputCommand"),n.__esModule=!0,n.default=void 0,i(e("GameEvent"));var a=function(e){var t,n;function i(t){return e.call(this,t)||this}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i.prototype.onDown=function(){try{closeTab()}catch(e){cc.log("Close Button")}},i}(i(e("IInputCommand")).default);n.default=a,t.exports=n.default,cc._RF.pop()},{GameEvent:"GameEvent",IInputCommand:"IInputCommand"}],DataDictionary:[function(e,t){"use strict";cc._RF.push(t,"8bacaIc0xxD7L2RC2wQamct","DataDictionary");var n=a(e("DataType")),i=a(e("GameEvent"));function a(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{PREVIEW:{default:!1,editorOnly:!0},dataType:{default:n.default.None,type:n.default,notify:function(){-1===this._convertDataType.indexOf(this.dataType)&&(this._convertDataType.push(this.dataType),this._data.push(null)),this.data=this._data[this._convertDataType.indexOf(this.dataType)]}},data:{default:null,type:cc.JsonAsset,notify:function(){this.dataType===n.default.None||null!==this.data&&!this.data||(this._data[this._convertDataType.indexOf(this.dataType)]=this.data)},visible:function(){return this.dataType!==n.default.None}},convertDataType:{get:function(){return this._convertDataType},type:[n.default],visible:function(){return this.PREVIEW}},_convertDataType:{default:function(){return[n.default.None]},type:[n.default]},_data:{default:function(){return[null]},type:[cc.JsonAsset]}},onLoad:function(){this._subscribeEvents(!0)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.GET_DATA,this.onGetData,this)},_getData:function(e){var t=this._convertDataType.indexOf(e);return-1!==t?this._data[t]:null},onGetData:function(e,t){var n=this._getData(e);t instanceof Function&&t(n)}}),cc._RF.pop()},{DataType:"DataType",GameEvent:"GameEvent"}],DataType:[function(e,t){"use strict";cc._RF.push(t,"1a8f4Kc8wxOE7veGVvJCjLp","DataType");var n=cc.Enum({None:0,Level1:153,Level2:154});t.exports=n,cc._RF.pop()},{}],DictionaryValue:[function(e,t,n){"use strict";cc._RF.push(t,"7283emJ2UxKubn1UbXdTYyw","DictionaryValue"),n.__esModule=!0,n.default=void 0;var i=o(e("GameEvent")),a=o(e("ValueType"));function o(e){return e&&e.__esModule?e:{default:e}}var s=cc.Class({name:"ValueHelper",properties:{value:{default:0,notify:function(e){e!==this.value&&this.changeEvent!==i.default.None&&cc.systemEvent.emit(this.changeEvent,this.value)}},changeEvent:{default:i.default.None,type:i.default}}}),r=cc.Class({extends:cc.Component,properties:{PREVIEW:{default:!1,editorOnly:!0},valueType:{default:a.default.None,type:a.default,notify:function(){-1===this._convertValueType.indexOf(this.valueType)&&(this._convertValueType.push(this.valueType),this._values.push(null)),this.value=this._values[this._convertValueType.indexOf(this.valueType)]},serializable:!1},value:{default:null,type:s,notify:function(){this.valueType!==a.default.None&&this.value instanceof s&&(this._values[this._convertValueType.indexOf(this.valueType)]=this.value)},visible:function(){return this.valueType!==a.default.None},serializable:!1},values:{get:function(){return this._values},type:[s],visible:function(){return this.PREVIEW}},convertValueType:{get:function(){return this._convertValueType},type:[a.default],visible:function(){return this.PREVIEW}},_values:{default:[],type:[s]},_convertValueType:{default:[],type:[a.default]}},onLoad:function(){cc.systemEvent.on(i.default.GET_VALUE,this.onGetValue,this),cc.systemEvent.on(i.default.CHANGE_VALUE,this.onChangeValue,this)},getValueHelper:function(e){var t=this.convertValueType.indexOf(e);return-1===t?null:this.values[t]},onGetValue:function(e,t){var n=this.getValueHelper(e);t instanceof Function&&n instanceof s&&t(n.value)},onChangeValue:function(e,t){var n=this.getValueHelper(e);n instanceof s&&(t instanceof Object?("number"==typeof t.value&&(n.value=t.value),"number"==typeof t.addition&&(n.value+=t.addition)):"number"==typeof t&&(n.value=t))}});n.default=r,t.exports=n.default,cc._RF.pop()},{GameEvent:"GameEvent",ValueType:"ValueType"}],Direction:[function(e,t,n){"use strict";cc._RF.push(t,"575446sGxlDzIJpQhKurAq9","Direction"),n.__esModule=!0,n.default=void 0;var i=cc.Enum({None:0,Right:1e3,Left:1001,Up:1002,Down:1003});n.default=i,t.exports=n.default,cc._RF.pop()},{}],DrawAreaInputCommand:[function(e,t,n){"use strict";cc._RF.push(t,"13560xwFglPXa5qFZ+7LQ/u","DrawAreaInputCommand"),n.__esModule=!0,n.default=void 0;var i=a(e("GameEvent"));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t,n;function a(t){return e.call(this,t)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.onDown=function(e,t){if(-1===this._currentTouchID){this.createTouch(e,t);var n=this.getTouchInfo(e,t);this._currentTouchID=e._id,cc.systemEvent.emit(i.default.DRAW_CANVAS_DOWN,n,t)}},o.onMove=function(e,t){if(this._currentTouchID===e._id){var n=this.getTouchInfo(e,t);cc.systemEvent.emit(i.default.DRAW_CANVAS_MOVE,n,t)}},o.onUp=function(e,t){if(this._currentTouchID===e._id){this._currentTouchID=-1;var n=this.getTouchInfo(e,t);cc.systemEvent.emit(i.default.DRAW_CANVAS_UP,n,t),this.destroyTouch(e)}},a}(a(e("IInputCommand")).default);n.default=o,t.exports=n.default,cc._RF.pop()},{GameEvent:"GameEvent",IInputCommand:"IInputCommand"}],EditText:[function(e,t){"use strict";cc._RF.push(t,"23130MQYJxA4qHpWUffEoag","EditText");var n,i=(n=e("GameEvent"))&&n.__esModule?n:{default:n};cc.Class({extends:cc.Component,properties:{backText:{default:null,type:cc.Node},_editBox:{default:null,serializable:!1}},start:function(){this._editBox=this.node.getComponent(cc.EditBox),cc.log(this._editBox)},disableBack:function(){this.backText&&(this.backText.active=!1),cc.systemEvent.emit(i.default.TOGGLE_TUTOR,!1)},changeText:function(){"E"===this._editBox.string&&(this.endEdit(),this._editBox.enabled=!1)},endEdit:function(){var e=this._editBox.string.replace(/[^a-z\u0430-\u044f\u0451]/gi,"");e.length>0?(cc.systemEvent.emit(i.default.TOGGLE_INPUT,!0),cc.systemEvent.emit(i.default.COMPLETE_CONDITION),cc.systemEvent.emit(i.default.PLAYER_CAN_REDIRECT),cc.systemEvent.emit(i.default.GAME_COMPLETE_CHECK),cc.systemEvent.emit(i.default.TOGGLE_TUTOR_SECOND,!0),cc.systemEvent.emit(i.default.UPDATE_LABEL,e)):(this._editBox.string="",this.backText&&(this.backText.active=!0),cc.systemEvent.emit(i.default.TOGGLE_TUTOR,!0))}}),cc._RF.pop()},{GameEvent:"GameEvent"}],EffectManager:[function(e,t){"use strict";cc._RF.push(t,"718c1u31INJIoT2x+IKDNhB","EffectManager");var n=o(e("GameEvent")),i=o(e("EffectType")),a=o(e("EffectTimer"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function r(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var l=cc.Class({name:"EffectObject",properties:{prefab:{default:null,type:cc.Prefab},_pool:{default:null,type:my.PoolObject,serializable:!1},_isNeedToReturnPool:{default:!0,serializable:!1},_duration:{default:0,serializable:!1},_systems:{default:[],serializable:!1,type:cc.ParticleSystem}}});cc.Class({extends:cc.Component,properties:{PREVIEW:{default:!1,editorOnly:!0},effectType:{default:i.default.None,type:i.default,notify:function(){-1===this._convertEffectType.indexOf(this.effectType)&&(this._convertEffectType.push(this.effectType),this._effects.push(null)),this.effect=this._effects[this._convertEffectType.indexOf(this.effectType)]}},effect:{default:null,type:l,notify:function(){this.effectType===i.default.None||null!==this.effect&&!this.effect||(this._effects[this._convertEffectType.indexOf(this.effectType)]=this.effect)},visible:function(){return this.effectType!==i.default.None}},effects:{get:function(){return this._effects},type:[l],visible:function(){return this.PREVIEW}},convertEffectType:{get:function(){return this._convertEffectType},type:[i.default],visible:function(){return this.PREVIEW}},_convertEffectType:{default:function(){return[i.default.None]},type:[i.default]},_effects:{default:function(){return[null]},type:[l]}},onLoad:function(){for(var e,t=s(this.effects);!(e=t()).done;){var n=e.value;n&&this._prepareEffect(n)}this._subscribeEvents(!0)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](n.default.SPAWN_EFFECT,this.onSpawnEffect,this)},_prepareEffect:function(e){if(e.prefab){e._pool=my.poolManager.poolForObject(e.prefab);var t=e.prefab.data,n=cc.ParticleSystem?t.getComponentsInChildren(cc.ParticleSystem):[],i=my.ParticleEmitter?t.getComponentsInChildren(my.ParticleEmitter):null,o=n.concat(i),r=cc.ParticleSystem?t.getComponent(cc.ParticleSystem):null;t.addComponent(a.default),cc.ParticleSystem&&r instanceof cc.ParticleSystem&&o.push(r);for(var c,l=0,u=s(o);!(c=u()).done;){var h=c.value;cc.ParticleSystem&&h instanceof cc.ParticleSystem?l=(l=l>h.duration?l:h.duration)>h.life+h.lifeVar?l:h.life+h.lifeVar:my.ParticleEmitter&&h instanceof my.ParticleEmitter&&(l=l>h.life.duration?l:h.life.duration)}e._duration=l,e.parent=e.parent||cc.director.getScene()}},_getEffect:function(e){var t=this.convertEffectType.indexOf(e);return-1!==t?this.effects[t]:null},_setInstance:function(e,t,n){var i=my.ParticleManager?e.getComponent(my.ParticleManager):null,o=cc.ParticleSystem?e.getComponentsInChildren(cc.ParticleSystem):[],r=cc.ParticleSystem?e.getComponent(cc.ParticleSystem):null;if(e.setParent(n.parent||t.parent||cc.director.getScene()),e.angle=n.angle||0,n.scale&&e.setScale(n.scale),e.setPosition(n.position||cc.Vec2.ZERO),void 0!==n.isReturnToPool&&null!==n.isReturnToPool&&(t._isNeedToReturnPool=n.isReturnToPool),void 0!==n.zIndex&&null!==n.zIndex&&(e.zIndex=n.zIndex||0),n.group&&(e.group=n.group||this.node.group),e.active=!1,e.active=!0,r&&o.push(r),i&&i.play(),o)for(var c,l=s(o);!(c=l()).done;){var u=c.value;u&&u.resetSystem()}if(t._isNeedToReturnPool){var h=e.getComponent(a.default),d="number"==typeof n.addedTime?t._duration+n.addedTime:t._duration;h.setTimerToReturnToPool(d)}n.callback instanceof Function&&n.callback(e)},onSpawnEffect:function(e,t){var n=this._getEffect(e.type);if(n&&n.prefab){var i=n._pool.pop(function(e){t instanceof Function&&t(e)});i&&this._setInstance(i,n,e)}}}),cc._RF.pop()},{EffectTimer:"EffectTimer",EffectType:"EffectType",GameEvent:"GameEvent"}],EffectTimer:[function(e,t,n){"use strict";cc._RF.push(t,"cb9d7FlykdISraD/zjyf55O","EffectTimer"),n.__esModule=!0,n.default=void 0;var i=cc.Class({extends:cc.Component,properties:{},setTimerToReturnToPool:function(e){var t=this;this.scheduleOnce(function(){var e=t.node.getComponent(my.PoolerHelper);e&&e.returnToPool()},e)}});n.default=i,t.exports=n.default,cc._RF.pop()},{}],EffectType:[function(e,t){"use strict";cc._RF.push(t,"d178f/hN7xOo5MyICOOpkPG","EffectType");var n=cc.Enum({None:0,FxShoot:253,FxDestroy:255,FxTankDestroy:260,FxToxin:300,FxFall:310});t.exports=n,cc._RF.pop()},{}],EnemyMaterialChange:[function(e,t){"use strict";cc._RF.push(t,"56a84F89ZRIoqZDrXXpeEs1","EnemyMaterialChange"),cc.Class({extends:cc.Component,properties:{render:{default:null,type:cc.MeshRenderer},materialChange:{default:null,type:cc.Material,notify:function(){this.updateMaterial(this.materialChange)}}},updateMaterial:function(e){e&&this.render&&this.render.setMaterial(0,e)}}),cc._RF.pop()},{}],Enemy:[function(e,t){"use strict";cc._RF.push(t,"9de5fxk7NJDW4fv7oBqZtLa","Enemy");var n=r(e("GameEvent")),i=e("Character"),a=r(e("ValueType")),o=r(e("GameObject")),s=r(e("GameObjectType"));function r(e){return e&&e.__esModule?e:{default:e}}var c=cc.Enum({Idle:1,Move:2,Charge:3,Hit:4,Dead:5,Explode:6}),l=cc.Class({properties:{countSparks:5,radius:50,offset:cc.Vec3.ZERO,sparkScale:cc.Vec3.ONE,timeCast:1},name:"SparksHelper"});cc.Class({extends:i.Character,properties:{hitCollider:{default:null,type:cc.BoxCollider3D},zoneRadius:{default:null,type:cc.SphereCollider3D},specialRandomTimer:{default:null,type:i.DelayAnim},chargeTime:3,speed:1,hp:100,sparkHelper:{default:function(){return new l},type:l},enemyState:{default:c.Idle,notify:function(e){this.enemyState!==e&&this._switchEnemyState(this.enemyState)},serializable:!1,visible:!1},render:{default:null,type:cc.Node},_isStartSpecialTimer:{default:!1,serializable:!1},_specialRandomTime:{default:0,serializable:!1},_specialTimer:{default:0,serializable:!1},_rigidBody3D:{default:null,serializable:!1},_currentTarget:{default:null,serializable:!1},_isFollowRotate:{default:!1,serializable:!1},_currentHp:{default:0,serializable:!1},_weapon:{default:null,serializable:!1},_currentAnimationState:{default:null,serializable:!1},activeBodyDamage:{default:!1,serializable:!1,visible:!1}},specify:function(e){e&&e.useHat&&this._setObject(this.persona.meshHelper.hat),e&&e.useWeapon&&(this._weapon=this._setObject(this.persona.meshHelper.weapon)),cc.systemEvent.on(n.default.FIND_ENEMY,this.onFindEnemy,this)},onLoad:function(){this._super()},start:function(){var e=this;cc.systemEvent.emit(n.default.FIND_HERO,function(t){e._currentTarget=t})},update:function(e){if(this._isFollowRotate&&this._currentTarget){this.node.lookAt(this._currentTarget,cc.Vec3.UP);var t=new cc.Vec3(0,this.node.eulerAngles.y-180,0);this.node.eulerAngles=t,this._run()}this._isStartSpecialTimer&&(this._specialTimer<this._specialRandomTime&&this._specialTimer+e>=this._specialRandomTime&&(this._isStartSpecialTimer=!1,this._setRandomSpecial()),this._specialTimer+=e)},initFromPool:function(){this.isAlive=!0,this._currentHp=this.hp,this._init()},_init:function(){this.zoneRadius&&(this._quat=cc.quat(),this._currentHp=this.hp,this._rigidBody3D=this.node.getComponent(cc.RigidBody3D),this.hitCollider&&this.hitCollider.on("trigger-enter",this.onTrigger,this),this._subscribeEvents(!0),this.zoneRadius&&(this.zoneRadius.on("trigger-enter",this.onTriggerZone,this),this.zoneRadius.on("trigger-exit",this.onTriggerZone,this),this.zoneRadius.on("trigger-stay",this.onTriggerZone,this))),this.render&&(this._hitAnimation=this.render.getComponent(cc.Animation)),this._setAnimationCharacter(this._currentCharacter.animation.idle),this._toggleWeapon(!1)},_setAnimationCharacter:function(e,t){void 0===t&&(t=1),this.persona.skeleton3DAnimation&&(this._currentAnimationState=this.persona.skeleton3DAnimation.play(e),this._currentAnimationState&&(this._currentAnimationState.speed=t))},_toggleWeapon:function(e){this._weapon&&(this._weapon.active=e)},_getRandomTimeDelayAnimation:function(){this._specialRandomTime=my.utilities.randomRange(this.specialRandomTimer.min,this.specialRandomTimer.max)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](n.default.ACTIVE_ZONE,this.onActiveZone,this)},_run:function(e){void 0===e&&(e=1);var t=this.node.convertToWorldSpaceAR(cc.v3(0,0,1)).sub(this.node.convertToWorldSpaceAR(cc.Vec3.ZERO));t.normalize();var n=t.mul(this.speed*e);this._rigidBody3D.setLinearVelocity(n)},_setObject:function(e){if(e.prefab){var t={type:e.prefab},n=this.world.createObject(t);return n&&(n.parent=e.nodeToSet||this.node,n.setPosition(e.offset),n.eulerAngles=e.rotation),n}},_setRandomSpecial:function(){var e=[c.Explode,c.Explode,c.Charge];this.unscheduleAllCallbacks(),this.enemyState=my.utilities.randomElementFromArray(e)},_rechargeSpecial:function(){this._specialTimer=0,this._getRandomTimeDelayAnimation(),this._isStartSpecialTimer=!0},_switchEnemyState:function(e){var t=this;switch(e){case c.Idle:this._rigidBody3D&&this._rigidBody3D.setLinearVelocity(cc.Vec3.ZERO),this._toggleWeapon(!1),this.unscheduleAllCallbacks(),this._setAnimationCharacter(this._currentCharacter.animation.idle,1),this._rotationTween&&this._rotationTween.stop(),this._isFollowRotate=!1,this._isStartSpecialTimer=!1,cc.systemEvent.emit(n.default.TOGGLE_ANNOUNCER,!1);break;case c.Move:this._toggleWeapon(!1),this._setAnimationCharacter(this._currentCharacter.animation.run,1),this._rigidBody3D&&this._rigidBody3D.setLinearVelocity(cc.Vec3.ZERO),this._currentTarget&&this.rotateToPosition(this._currentTarget,.3,function(){t.enemyState===c.Move&&(t._isFollowRotate=!0)}),this._rechargeSpecial(),this.activeBodyDamage=!1,cc.systemEvent.emit(n.default.TOGGLE_ANNOUNCER,!1);break;case c.Charge:this._isFollowRotate=!1,this._rigidBody3D&&this._rigidBody3D.setLinearVelocity(cc.Vec3.ZERO),this._currentTarget&&this.rotateToPosition(this._currentTarget,.3,function(){t.activeBodyDamage=!0,t._setAnimationCharacter(t._currentCharacter.animation.run,5),t._run(3)}),cc.systemEvent.emit(n.default.TOGGLE_ANNOUNCER,!0);break;case c.Hit:this._isFollowRotate=!1,this._rigidBody3D&&this._rigidBody3D.setLinearVelocity(cc.Vec3.ZERO),this._toggleWeapon(!0),this._setAnimationCharacter(this._currentCharacter.animation.hit,1),this.scheduleOnce(function(){t.enemyState=c.Move},2.1);break;case c.Explode:this._isFollowRotate=!1,this._rigidBody3D&&this._rigidBody3D.setLinearVelocity(cc.Vec3.ZERO),this._setAnimationCharacter(this._currentCharacter.animation.hit),this._crateExplosionSparks(),this._toggleWeapon(!0),this.scheduleOnce(function(){t.enemyState=c.Move},this.sparkHelper.timeCast);break;case c.Dead:this._isFollowRotate=!1,this._rigidBody3D&&this._rigidBody3D.setLinearVelocity(cc.Vec3.ZERO),this.isAlive=!1,cc.systemEvent.emit(n.default.TOGGLE_ANNOUNCER,!1)}},_changeHp:function(e){void 0===e&&(e=0),this.isAlive&&(this._currentHp=this._currentHp-e,cc.systemEvent.emit(n.default.CHANGE_PROGRESS_BAR,-e),this._currentHp<=0&&(this.enemyState=c.Dead))},_crateExplosionSparks:function(){for(var e=0;e<this.sparkHelper.countSparks;e++){var t=360/this.sparkHelper.countSparks*e,n={type:s.default.EnemyBullet,transform:{scale:this.sparkHelper.sparkScale,eulerAngles:new cc.Vec3(0,t,0)}},i=this.world.createObject(n);if(i){i.parent=this.world.node,i.position=this.world.node.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(new cc.Vec3(this.sparkHelper.offset)));var a=i.getComponent(o.default),r=i.convertToWorldSpaceAR(cc.v3(0,0,1)).sub(i.convertToWorldSpaceAR(cc.Vec3.ZERO));a.run(r)}}},onAliveCallback:function(){this.isAlive||(this.unscheduleAllCallbacks(),cc.systemEvent.emit(n.default.ENEMY_DEAD,this.node),cc.systemEvent.emit(n.default.CHANGE_VALUE,a.default.EnemyKill,{addition:-1}),cc.systemEvent.emit(n.default.RETURN_TO_POOL,this.node))},onFindEnemy:function(e){e instanceof Function&&e(this.node)},onTrigger:function(e){e.type;var t=e.otherCollider.node;switch(t.group){case"weapon":var i=t.getComponent(o.default);i&&(this._changeHp(i.weaponDamage),cc.systemEvent.emit(n.default.CHANGE_VALUE,a.default.BossHP,{addition:-i.weaponDamage})),cc.systemEvent.emit(n.default.SET_SCORE,my.utilities.randomInt(20,21),this.node.getPosition().addSelf(new cc.Vec3(0,75,0))),this._hitAnimation&&this._hitAnimation.play()}},onTriggerZone:function(e){var t=e.type;switch(e.otherCollider.node.group){case"construction":this.enemyState===c.Charge&&"trigger-enter"===t&&(this.enemyState=c.Move,cc.systemEvent.emit(n.default.CAMERA_3D_START_SHAKE,10));break;case"hero":"trigger-enter"===t&&(this.enemyState===c.Charge&&(this.enemyState=c.Move),this.enemyState===c.Move&&(this.enemyState=c.Hit)),"trigger-stay"===t&&this.enemyState===c.Move&&(this.enemyState=c.Hit)}},onActiveZone:function(){this.enemyState=c.Move,this._rechargeSpecial()},onButtonsShow:function(){this._toggleWeapon(!1),this.unscheduleAllCallbacks(),this.enemyState=c.Idle,this.persona.skeleton3DAnimation&&this.persona.skeleton3DAnimation.pause(),this.hitCollider&&this.hitCollider.off("trigger-enter",this.onTrigger,this),this.zoneRadius&&(this.zoneRadius.off("trigger-enter",this.onTriggerZone,this),this.zoneRadius.off("trigger-exit",this.onTriggerZone,this),this.zoneRadius.off("trigger-stay",this.onTriggerZone,this))}}),cc._RF.pop()},{Character:"Character",GameEvent:"GameEvent",GameObject:"GameObject",GameObjectType:"GameObjectType",ValueType:"ValueType"}],FireButtonInputCommand:[function(e,t,n){"use strict";cc._RF.push(t,"f8355/l1rxLnKE/kh9ES4wt","FireButtonInputCommand"),n.__esModule=!0,n.default=void 0;var i=a(e("GameEvent"));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._currentTouch=null,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.onDown=function(e,t){-1===this._currentTouchID&&(this._currentTouch=this.createTouch(e,t),this._currentTouchID=e._id)},o.onUp=function(e){this._currentTouchID===e._id&&(cc.systemEvent.emit(i.default.FIRE_BUTTON_PRESS),this._currentTouch=null,this._currentTouchID=-1,this.destroyTouch(e))},a}(a(e("IInputCommand")).default);n.default=o,t.exports=n.default,cc._RF.pop()},{GameEvent:"GameEvent",IInputCommand:"IInputCommand"}],FireButton:[function(e,t){"use strict";cc._RF.push(t,"75511j3Y7hFErVVx6x+2n4S","FireButton");var n=a(e("UiElement")),i=a(e("GameEvent"));function a(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:n.default,properties:{_userStunTime:{default:0,serializable:!1},_delay:{default:1,serializable:!1},_canShoot:{default:!0,serializable:!1}},onLoad:function(){this.isActiveElement=!0,this._animation=this.node.getComponent(cc.Animation),cc.systemEvent.on(i.default.TOGGLE_PLAYER,this.onTogglePlayer,this)},update:function(e){this._userStunTime<this._delay&&this._userStunTime+e>=this._delay&&(this._canShoot=!0),this._userStunTime+=e},onTogglePlayer:function(e){this.subscribeEvents(e)},subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.FIRE_BUTTON_PRESS,this.onFirerPressButton,this)},onFirerPressButton:function(){this._animation&&this._canShoot&&(this._animation.play(),cc.systemEvent.emit(i.default.PLAYER_CONTROL_SHOOT),this._userStunTime=0,this._canShoot=!1)}}),cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement"}],FirstTouchInputCommand:[function(e,t,n){"use strict";cc._RF.push(t,"b96dekihjdLBaQPphBW91Nl","FirstTouchInputCommand"),n.__esModule=!0,n.default=void 0;var i=s(e("GameEvent")),a=s(e("IInputCommand")),o=s(e("TouchSource"));function s(e){return e&&e.__esModule?e:{default:e}}var r=function(e){var t,n;function a(t,n){var i;return(i=e.call(this,t)||this)._arrayTouches=[{touch:"AnySource",flag:!0}],i._init(n),i}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s=a.prototype;return s._init=function(e){if(e instanceof Array)for(var t=0;t<e.length;t++){var n=e[t];this._arrayTouches.push({touch:n,flag:!0})}else this._arrayTouches.push({touch:e,flag:!0})},s.onDown=function(e){this._anySourceClick(this._arrayTouches[0]);var t=this._arrayTouches.find(function(t){return t.touch===e});t&&t.flag&&this._selectedObject(e,t)},s._anySourceClick=function(e){e.flag&&(cc.systemEvent.emit(i.default.ACTIVE_ZONE),e.flag=!1)},s._selectedObject=function(e,t){var n=this._arrayTouches.indexOf(t);switch(e){case o.default.Any:case o.default.RedirectButton:case o.default.ItemButton:case o.default.Stick:}this._arrayTouches[n].flag=!1},a}(a.default);n.default=r,t.exports=n.default,cc._RF.pop()},{GameEvent:"GameEvent",IInputCommand:"IInputCommand",TouchSource:"TouchSource"}],FlashLight:[function(e,t){"use strict";cc._RF.push(t,"f5da8lxRuJOfZkcK2AsiZON","FlashLight");var n=a(e("GameEvent")),i=a(e("UiElement"));function a(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:i.default,properties:{},onLoad:function(){this._subscribeEvents(!0)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](n.default.START_FLASH,this.onStartFlash,this)},onHideCallBack:function(){this.callbackHide instanceof Function&&this.callbackHide()},onShowCallBack:function(){this.callbackShow instanceof Function&&this.callbackShow(),this.hide(.5)},onStartFlash:function(e,t){this.callbackShow=e,this.callbackHide=t,this.show(.5)},callbackHide:null,callbackShow:null}),cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement"}],GameEvent:[function(e,t,n){"use strict";cc._RF.push(t,"46df9Yy8DVMB5j+g9Lyazgn","GameEvent"),n.__esModule=!0,n.default=void 0;var i=cc.Enum({None:0,SWITCH_GAME_STATE:10,REDIRECT_PROCESSING:20,RETURN_TO_POOL:21,RESULT_SHOW:30,TOGGLE_INGAME_BUTTON:50,TOGGLE_TUTOR_BUTTONS:55,TOGGLE_TUTOR_SECOND:56,TOGGLE_TUTOR:60,SET_HOLDER_TUTORIAL:61,CHANG_TYPE_TUTOR:62,SHAKE:70,FIND_ENEMY:72,GET_TUTORIAL_TARGET:73,LIGHT_BLINK_OBJECT:74,GAME_COMPLETE_CHECK:75,CONSTRUCTION_DESTROY:76,ACTIVE_ZONE:77,FIND_HERO:78,CHANGE_PROGRESS_BAR:80,INPUT:90,SET_STATE_ON_MANAGERS:91,TOGGLE_PLAYER:92,PLAYER_CAN_REDIRECT:93,PLAYER_CONTROL_MOVE:94,PLAYER_CONTROL_STOP_MOVE:95,PLAYER_CONTROL_SHOOT:96,TOGGLE_INPUT:97,CREATE_GAME_OBJECT:230,GET_CURRENT_GAME_STATE:441,SPAWN_EFFECT:260,CAMERA_SHAKE:270,CONVERT_TO_CAMERA:271,CONVERT_CAMERA_TO_WORLD:272,SET_DEFAULT_BOX:273,CAMERA_3D_START_SHAKE:274,CAMERA_3D_STOP_SHAKE:275,CAMERA_3D_ROTATE:276,CAMERA_3D_SET_TARGET:277,GET_CAMERA_NODE:278,SET_CAMERA_3D_OFFSET:279,TOGGLE_ANNOUNCER:300,TOGGLE_ANNOUNCER_SCORE:301,HIDE_UI:340,CHECK_COLLIDE:345,AUDIO_PLAY:350,AUDIO_STOP:351,GET_DATA:360,CHANGE_DATA:361,GET_VALUE:370,CHANGE_VALUE:380,ENEMY_KILL_VALUE:381,PLAYER_HP_VALUE:382,BOSS_HP_VALUE:383,TREE_VALUE:390,START_FLASH:420,RESTART_GAME:421,COMPLETE_LEVEL:500,LOSE_LEVEL:501,RESTART_LEVEL:502,COMPLETE_CONDITION:503,GET_LEVEL:504,LOAD_WORLD:600,TOGGLE_BLACKOUT:700,TOGGLE_CLOSE_BUTTON:800,GET_UI_MANGER_NODE:900,SHOP_TOGGLE:901,DOWN_ITEM:1002,MOVE_ITEM:1003,UP_ITEM:1004,STICK_DOWN:1005,STICK_MOVE:1006,STICK_UP:1007,GET_ITEM_DATA:1100,ITEM_DROPPED:1101,OBJECTIVE_COMPLETE:1102,INCREASE_TIME_TURN:1200,SET_TURN_TYPE:1201,PLAYER_START_TURN:1202,ITEM_DROP_IN_AREA:1300,WALL_START:1310,SPRAY_START:1320,MOP_START:1330,HERO_MOVE:1400,HERO_STOP_MOVE:1402,FIRE_BUTTON_PRESS:1403,TOGGLE_RIGID_BODY:1404,REFRESH_POINTER:1500,TOGGLE_POINTER:1501,OBJECT_DESTROY:1600,SET_SCORE:1700,UPDATE_LABEL:1800});n.default=i,t.exports=n.default,cc._RF.pop()},{}],GameManager:[function(e,t){"use strict";cc._RF.push(t,"0829bEjvz5M35fdSorBbFQu","GameManager");var n=a(e("GameEvent")),i=a(e("GameStates"));function a(e){return e&&e.__esModule?e:{default:e}}a(e("TurnType")),cc.Class({extends:cc.Component,properties:{gameName:"",adType:"",isEndCard:!1,realResultOnFakeADType:[cc.String],_gameState:{default:i.default.None,type:i.default},_sendOnce:{default:!0,serializable:!1}},onEnable:function(){this._subscribeEvents(!0)},onDisable:function(){this._subscribeEvents(!1)},onLoad:function(){console.log(this.gameName),window.AD_TYPE=window.AD_TYPE||this.adType,window.SOUND_ON="boolean"==typeof window.SOUND_ON&&window.SOUND_ON,window.IS_END_CARD=this.isEndCard,window.CURRENT_URL=(/android/i.test(navigator.userAgent),"https://play.google.com/store/apps/details?id=com.hitapps.figgerits")},start:function(){cc.systemEvent.emit(n.default.AUDIO_PLAY,"music_loop",!0,.35)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](n.default.REDIRECT_PROCESSING,this.RedirectProcessing,this),cc.systemEvent[t](n.default.SWITCH_GAME_STATE,this.onSwitchGameState,this),cc.systemEvent[t](n.default.GET_CURRENT_GAME_STATE,this.onGetCurrentGameState,this),cc.systemEvent[t](n.default.RETURN_TO_POOL,this.onReturnToPool,this),cc.systemEvent[t](n.default.GAME_COMPLETE_CHECK,this.onGameCompleteCheck,this)},_checkFunctionResult:function(){this._sendOnce&&(window.gameEnd instanceof Function&&window.gameEnd(),window.onGameComplete instanceof Function&&window.onGameComplete(),this._sendOnce=!1)},onGetCurrentGameState:function(e){e instanceof Function&&e(this._gameState)},onSwitchGameState:function(e,t){if(this._gameState!==e){switch(e){case i.default.Game:cc.systemEvent.emit(n.default.TOGGLE_TUTOR,!0),cc.systemEvent.emit(n.default.TOGGLE_PLAYER,!0),cc.systemEvent.emit(n.default.SHOP_TOGGLE,!1,!1),cc.systemEvent.emit(n.default.ACTIVE_ZONE);break;case i.default.Result:!this.isEndCard&&this._checkFunctionResult(),cc.systemEvent.emit(n.default.TOGGLE_PLAYER,!1),cc.systemEvent.emit(n.default.TOGGLE_TUTOR,!1),cc.systemEvent.emit(n.default.RESULT_SHOW,t),cc.systemEvent.emit(n.default.HIDE_UI);break;case i.default.Shopping:cc.systemEvent.emit(n.default.TOGGLE_PLAYER,!1),cc.systemEvent.emit(n.default.SHOP_TOGGLE,!0,!0);break;case i.default.Fake:if(!this.isEndCard&&this._checkFunctionResult(),cc.systemEvent.emit(n.default.TOGGLE_PLAYER,!1),this.realResultOnFakeADType.find(function(e){return e===AD_TYPE})){if(!window.IS_END_CARD)return void cc.systemEvent.emit(n.default.SWITCH_GAME_STATE,i.default.Result);cc.systemEvent.emit(n.default.TOGGLE_TUTOR,!0),cc.systemEvent.emit(n.default.PLAYER_CAN_REDIRECT)}else cc.systemEvent.emit(n.default.TOGGLE_TUTOR,!0),cc.systemEvent.emit(n.default.PLAYER_CAN_REDIRECT);break;case i.default.Retry:case i.default.SwitchLevel:}cc.log("GameState",i.default[e]),this._gameState=e,cc.systemEvent.emit(n.default.SET_STATE_ON_MANAGERS,this._gameState)}},onReturnToPool:function(e){if(e instanceof cc.Node){var t=e.getComponent(my.PoolerHelper);t&&t.returnToPool()}},onGameCompleteCheck:function(){this._checkFunctionResult()},RedirectProcessing:function(e,t){void 0===t&&(t={}),cc.director.pause();try{AdRedirectProccessing()}catch(n){console.log("Error17: SDK was not found"),window.open(window.CURRENT_URL)}cc.director.resume()}}),cc._RF.pop()},{GameEvent:"GameEvent",GameStates:"GameStates",TurnType:"TurnType"}],GameObjectManager:[function(e,t){"use strict";cc._RF.push(t,"1226euyW2FAKZFI7f4VowQS","GameObjectManager");var n=o(e("GameEvent")),i=o(e("GameObjectType")),a=o(e("GameObject"));function o(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{PREVIEW:{default:!1,editorOnly:!0},gameObjectType:{default:i.default.None,type:i.default,notify:function(){-1===this._convertGameObjectType.indexOf(this.gameObjectType)&&(this._convertGameObjectType.push(this.gameObjectType),this._prefabs.push(null)),this.prefab=this._prefabs[this._convertGameObjectType.indexOf(this.gameObjectType)]},serializable:!1},prefab:{default:null,type:cc.Prefab,notify:function(){this.gameObjectType!==i.default.None&&(this.prefab instanceof cc.Prefab||null===this.prefab)&&(this._prefabs[this._convertGameObjectType.indexOf(this.gameObjectType)]=this.prefab)},visible:function(){return this.gameObjectType!==i.default.None},serializable:!1},prefabs:{get:function(){return this._prefabs},type:[cc.Prefab],visible:function(){return this.PREVIEW}},convertGameObjectType:{get:function(){return this._convertGameObjectType},type:[i.default],visible:function(){return this.PREVIEW}},_pools:{default:null,serializable:!1},_prefabs:{default:[],type:[cc.Prefab]},_convertGameObjectType:{default:[],type:[i.default]}},onLoad:function(){this._initPools(),cc.systemEvent.on(n.default.CREATE_GAME_OBJECT,this.onCreateGameObject,this)},getPrefab:function(e){return-1!==this.convertGameObjectType.indexOf(e)?this.prefabs[this.convertGameObjectType.indexOf(e)]:null},getPrefabPool:function(e){var t=null;return this._pools[e]&&(t=this._pools[e]),t},_initPools:function(){var e=this;this._pools={},this.prefabs.forEach(function(t,n){t instanceof cc.Prefab&&(e._pools[e.convertGameObjectType[n]]=my.poolManager.poolForObject(t))})},onCreateGameObject:function(e,t,n){var i=this.getPrefabPool(e),o=null,s=null;i&&(i.pop(function(e){o=e,s=e.getComponent(a.default),t instanceof Function&&t(o,s)}),n instanceof Function&&n(o,s))}}),cc._RF.pop()},{GameEvent:"GameEvent",GameObject:"GameObject",GameObjectType:"GameObjectType"}],GameObjectType:[function(e,t){"use strict";cc._RF.push(t,"f2dffZIhTxOzJrI9ZMST4I+","GameObjectType");var n=cc.Enum({None:0,Announcer:4,Background:8,Blackout:20,CameraBoxLevel1:21});t.exports=n,cc._RF.pop()},{}],GameObject:[function(e,t,n){"use strict";var i;cc._RF.push(t,"0d3c9hzklhJiJXulnSwvvod","GameObject"),n.__esModule=!0,n.default=void 0,(i=e("GameEvent"))&&i.__esModule;var a=cc.Class({extends:cc.Component,properties:{world:{default:null,visible:!1},isReturnToPool:{default:!1,visible:!1},isActivated:{default:!1,notify:function(e){e!==this.isActivated&&this.onSwitchActiveCallBack instanceof Function&&this.onSwitchActiveCallBack(this.isActivated)},visible:!1}},initFromPool:null,prepareReturnToPool:null,specify:null,onSwitchActiveCallBack:null});n.default=a,t.exports=n.default,cc._RF.pop()},{GameEvent:"GameEvent"}],GameStates:[function(e,t,n){"use strict";cc._RF.push(t,"0c3fdpcdFhPAI9gH9XMS+Xg","GameStates"),n.__esModule=!0,n.default=void 0;var i=cc.Enum({None:0,Loading:1,Game:2,Tutorial:3,Result:4,Retry:5,Fake:6,SwitchLevel:7,Shopping:8});n.default=i,t.exports=n.default,cc._RF.pop()},{}],Hero:[function(e,t){"use strict";cc._RF.push(t,"f639cWnKURNuKJtZM+LBhfW","Hero");var n=r(e("GameEvent")),i=e("Character"),a=r(e("ValueType")),o=r(e("GameObject")),s=r(e("GameObjectType"));function r(e){return e&&e.__esModule?e:{default:e}}var c=cc.Enum({None:0,Idle:1,Move:2,ChopTree:3,ChopRock:4,Dead:5});cc.Class({extends:i.Character,properties:{rotateOffset:40,speedRotate:150,moveVelocity:cc.Vec2.ZERO,zoneRadius:{default:null,type:cc.SphereCollider3D},hitZoneNode:{default:null,type:cc.Node},render:{default:null,type:cc.MeshRenderer},materialChange:{default:null,type:cc.Material,notify:function(){this.updateMaterial(this.materialChange)}},heroState:{default:c.HeroState,notify:function(e){this.heroState!==e&&this._switchHeroState(this.heroState)},serializable:!1,visible:!1},_oldAnimation:{default:null,serializable:!1},_tweenRotate:{default:null,serializable:!1},_rigidBody3D:{default:null,serializable:!1},_currentTarget:{default:null,serializable:!1},_isCaptureTarget:{default:!1,serializable:!1},_isControlRotate:{default:!0,serializable:!1},_objectsArray:{default:[],serializable:!1},_currentClip3D:{default:null,serializable:!1},_hitZone:{default:null,serializable:!1},_animationCocos:{default:null,serializable:!1}},onLoad:function(){this._super()},init:function(){this._quat=cc.quat(),this._rigidBody3D=this.node.getComponent(cc.RigidBody3D),this.hitZoneNode&&(this._hitZone=this.hitZoneNode.getComponent(cc.BoxCollider3D)),this._animationCocos=this.node.getComponent(cc.Animation),this.zoneRadius&&(this.zoneRadius.on("trigger-enter",this.onTrigger,this),this.zoneRadius.on("trigger-exit",this.onTrigger,this),this.zoneRadius.node.active=!1),this._hitZone&&this._hitZone.on("trigger-enter",this.onHitZoneTrigger,this),this.persona.skeleton3DAnimation&&(this._currentClip3D=this.persona.skeleton3DAnimation.play(this._currentCharacter.animation.run,.5),this._currentClip3D.speed=.1),this.heroState=c.Idle,cc.systemEvent.on(n.default.FIND_HERO,this.onFindHero,this)},initFromPool:function(){this.isAlive=!0,this.init()},onEnable:function(){this._subscribeEvents(!0)},onDisable:function(){this._subscribeEvents(!1)},update:function(){if(this._isCaptureTarget&&this._currentTarget){this.node.lookAt(this._currentTarget,cc.Vec3.UP);var e=new cc.Vec3(0,this.node.eulerAngles.y-180,0);this.node.eulerAngles=e}this.heroState!==c.Move&&this._rigidBody3D&&this._rigidBody3D.setLinearVelocity(cc.Vec3.ZERO)},specify:function(e){e&&e.useHat&&this._setObject(this.persona.meshHelper.hat),e&&e.isCameraCapture&&cc.systemEvent.emit(n.default.CAMERA_3D_SET_TARGET,this.node)},updateMaterial:function(e){e&&this.render&&this.render.setMaterial(0,e)},_subscribeEvents:function(e){var t=e?"on":"off";this.node[t](n.default.HERO_MOVE,this.onHeroMove,this),this.node[t](n.default.HERO_STOP_MOVE,this.onHeroStopMove,this),this.node[t](n.default.TOGGLE_RIGID_BODY,this.onToggleRigidBody,this),cc.systemEvent[t](n.default.OBJECT_DESTROY,this.onObjectDestroy,this),cc.systemEvent[t](n.default.ACTIVE_ZONE,this.onActiveZone,this)},_setAnimationCocos:function(e){this._animationCocos&&(this._oldAnimation&&(this._animationCocos.play(this._oldAnimation),this._animationCocos.setCurrentTime(0),this._animationCocos.stop(this._oldAnimation)),this._animationCocos.play(e),this._oldAnimation=e)},_setObject:function(e){if(e.prefab){var t={type:e.prefab},n=this.world.createObject(t);return n&&(n.parent=e.nodeToSet||this.node,n.setPosition(e.offset),n.eulerAngles=e.rotation),n}},_setAngle:function(e){e>0?this._setAngleAppear(e):this._setAngleLover(e)},_setAngleLover:function(e){if(e){var t=Math.abs(this.node.eulerAngles.y-(e+this.rotateOffset))*(1/this.speedRotate);this._tweenRotateToAngle(t,this.node.eulerAngles.y,e+this.rotateOffset)}},_setAngleAppear:function(e){if(e){var t=this.node.eulerAngles.y>0?this.node.eulerAngles.y:this.node.eulerAngles.y+360,n=Math.abs(t-(e+this.rotateOffset))*(1/this.speedRotate);this._tweenRotateToAngle(n,this.node.eulerAngles.y>0?this.node.eulerAngles.y:this.node.eulerAngles.y+360,e+this.rotateOffset)}},_tweenRotateToAngle:function(e,t,n){var i=this;this._tweenRotate&&this._tweenRotate.stop();var a={timer:0};this._tweenRotate=my.tweenManager.add(a,{timer:1},e,"linear",!0),this._tweenRotate.onUpdate=function(){var e=t+(n-t)*a.timer,o=new cc.Vec3(i.node.eulerAngles.x,e,i.node.eulerAngles.z);i.node.eulerAngles=o},this._tweenRotate.onComplete=function(){}},_setVectorMove:function(e,t){if(e){var n=(e+this.rotateOffset)*Math.PI/180,i=this.moveVelocity.rotate(n).mul(t),a=new cc.Vec3(i.y,0,i.x);this._rigidBody3D&&this._rigidBody3D.setLinearVelocity(a)}},_focusOnTarget:function(e){var t=this;e&&(this._tweenRotate&&this._tweenRotate.stop(),this._currentTarget=e,this._isControlRotate=!1,this.rotateToPosition(this._currentTarget,.15,function(){t._isCaptureTarget=!0,t.heroState=t._getHeroStateFromTypeTargetObject(t._currentTarget)}))},_deleteTargetFromArray:function(e){var t=this._objectsArray.indexOf(e);-1!=t&&e&&this._objectsArray.splice(t,1)},_checkObjectsInArea:function(){if(this._objectsArray.length>0){var e=this._objectsArray[0].node.getComponent(o.default);if(null===this._currentTarget&&e.isActivated)return void this._focusOnTarget(this._objectsArray[0].node)}this._stopTargetingActions(),this.heroState=c.Idle},_stopTargetingActions:function(){this._rotationTween&&this._rotationTween.stop(),this._isCaptureTarget=!1,this._currentTarget=null,this._isControlRotate=!0},_someObjectDestroy:function(e){if(e){var t=e.getComponent(o.default);t&&!t.isActivated&&this._objectsArray.includes(t)&&(this._deleteTargetFromArray(t),this._currentTarget===e&&(this._stopTargetingActions(),this._checkObjectsInArea()))}},_getHeroStateFromTypeTargetObject:function(e){var t=e.getComponent(o.default),n=c.None,i=null;switch(t&&(i=t.targetType),i){case s.default.Rock:n=c.ChopRock;break;case s.default.Tree:n=c.ChopTree;break;case s.default.Shop:n=c.Idle}return n},_switchHeroState:function(e){switch(e){case c.Idle:this._rigidBody3D&&this._rigidBody3D.setLinearVelocity(cc.Vec3.ZERO),this._rotationTween&&this._rotationTween.stop(),this._tweenRotate&&this._tweenRotate.stop(),this.unscheduleAllCallbacks(),this._currentTarget=null,this._setAnimationCocos(this._currentCharacter.animation.idle),this._checkObjectsInArea();break;case c.Move:this._stopTargetingActions(),this._setAnimationCocos(this._currentCharacter.animation.run);break;case c.ChopRock:this._rigidBody3D&&this._rigidBody3D.setLinearVelocity(cc.Vec3.ZERO),this._setAnimationCocos(this._currentCharacter.animation.chopRock);break;case c.ChopTree:this._rigidBody3D&&this._rigidBody3D.setLinearVelocity(cc.Vec3.ZERO),this._setAnimationCocos(this._currentCharacter.animation.chopTree);break;case c.Dead:this._rigidBody3D&&this._rigidBody3D.setLinearVelocity(cc.Vec3.ZERO),this.isAlive=!1}},onAnimationEvent:function(e){var t=this._currentCharacter.event,i=null;switch(this._currentTarget&&(i=this._currentTarget.getComponent(o.default))&&i.actionTarget instanceof Function&&i.actionTarget(),e){case t.chopTree:if(i){var s=my.utilities.randomInt(20,21);cc.systemEvent.emit(n.default.CHANGE_VALUE,a.default.TreeCountChop,{addition:s}),cc.systemEvent.emit(n.default.SET_SCORE,s,this.node.getPosition().addSelf(new cc.Vec3(0,2,0)),a.default.TreeCountChop)}break;case t.chopRock:if(i){var r=my.utilities.randomInt(20,21);cc.systemEvent.emit(n.default.CHANGE_VALUE,a.default.RockCountChop,{addition:r}),cc.systemEvent.emit(n.default.SET_SCORE,r,this.node.getPosition().addSelf(new cc.Vec3(0,2,0)),a.default.RockCountChop)}}},onHeroMove:function(e){e&&(this._isControlRotate&&this._setAngle(e.angle),this._setVectorMove(e.angle,e.speed),this.heroState=c.Move)},onHeroStopMove:function(){this.heroState=c.Idle},onTrigger:function(e){var t=e.type,n=e.otherCollider.node.getComponent(o.default);if("objects"===e.otherCollider.node.group)switch(t){case"trigger-enter":this._objectsArray.push(n);break;case"trigger-exit":this._deleteTargetFromArray(n),this._currentTarget===e.otherCollider.node&&(this._stopTargetingActions(),this._checkObjectsInArea())}},onHitZoneTrigger:function(e){e.type,e.otherCollider.node,e.otherCollider.node.group},onObjectDestroy:function(e){this._someObjectDestroy(e)},onToggleRigidBody:function(e){this._objectsArray=[],this._currentTarget=null,this._isCaptureTarget=e,this._tweenRotate&&this._tweenRotate.stop()},onActiveZone:function(){var e=this;this.zoneRadius&&(this.zoneRadius.node.active=!0),this.scheduleOnce(function(){e._checkObjectsInArea()})},onFindHero:function(e){e instanceof Function&&e(this.node)}}),cc._RF.pop()},{Character:"Character",GameEvent:"GameEvent",GameObject:"GameObject",GameObjectType:"GameObjectType",ValueType:"ValueType"}],HitboxBuilder:[function(e,t,n){"use strict";function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function a(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}cc._RF.push(t,"17aa3ia2lVPXptBQhQtpowH","HitboxBuilder"),n.__esModule=!0,n.default=void 0;var s=function(){function e(){this.poligons=[],this.oldPoligons=[],this._h=0,this._w=0}var t=e.prototype;return t.parseImg=function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");return n.drawImage(e,0,0),n.getImageData(0,0,e.width,e.height).data},t.getPoints=function(){return this.poligons.slice()},t.calculatePoints=function(e,t,n,i,a,o){void 0===a&&(a=1),void 0===o&&(o=null),null===o&&(this.oldPoligons=this.getPoints(),this.poligons=[],this._h=0,this._w=0);var s=o||l.getFirstNonTransparentPixelTopDown(e,t,n);if(null!==s){var r=l.walkPerimeter(e,t,n,s.w,s.h);(r=c(r,a)).length>0&&r[0].equals(r[r.length-1])&&(r.length-=1),r.forEach(function(e){e.y=n-e.y,e.x-=i.anchorX*i.width,e.y-=i.anchorY*i.height}),this.poligons.push(r),this.checkPoints(e,t,n,i,this.poligons,a)}},t.checkPoints=function(e,t,n,a,o,s){var r=0;s*=2;for(var c=this._h;c<n;c+=s,this._h+=s){for(var l=this._w;l<t;l+=s,this._w+=s)if(e[r=c*t+l]>200){for(var u,h=!1,d=i(o);!(u=d()).done;){var f=u.value;if(cc.Intersection.pointInPolygon({x:l,y:n-c},f)||!(r+s<=t*(c+1)&&r-t*s>=0&&e[r+s-t*s]>200&&!cc.Intersection.pointInPolygon({x:l+s-a.anchorX*a.width,y:n-(c-s)-a.anchorY*a.height},f)||r-s>=t*c&&r+t*s<=t*n&&e[r-s+t*s]>200&&!cc.Intersection.pointInPolygon({x:l-s-a.anchorX*a.width,y:n-(c+s)-a.anchorY*a.height},f))||!(r+s<=t*(c+1)&&r+t*s<=t*n&&e[r+s+t*s]>200&&!cc.Intersection.pointInPolygon({x:l+s-a.anchorX*a.width,y:n-(c+s)-a.anchorY*a.height},f)||r-s>=t*c&&r-t*s>=0&&e[r-s-t*s]>200&&!cc.Intersection.pointInPolygon({x:l-s-a.anchorX*a.width,y:n-(c-s)-a.anchorY*a.height},f))){h=!1;break}h=!0}if(h){for(var m=r,p=c;e[m]>200;)m-=t,p-=1;return{w:l,h:p+1}}}this._w=0}return this._h=0,null},e}();function r(e,t,n){var i,a,o;return t.x===n.x?i=Math.abs(e.x-t.x):(a=(n.y-t.y)/(n.x-t.x),o=t.y-a*t.x,i=Math.abs(a*e.x-e.y+o)/Math.sqrt(Math.pow(a,2)+1)),i}var c=function e(t,n){var i=t[0],a=t[t.length-1];if(t.length<3)return t;for(var o=-1,s=0,c=1;c<t.length-1;c++){var l=r(t[c],i,a);l>s&&(s=l,o=c)}if(s>n){var u=t.slice(0,o+1),h=t.slice(o),d=e(u,n),f=e(h,n);return d.slice(0,d.length-1).concat(f)}return[i,a]},l={getFirstNonTransparentPixelTopDown:function(e,t,n){for(var i=0,a=0;a<n;++a){i=a*t|0;for(var o=0;o<t;++o){if(e[i]>200)return{w:o,h:a};++i}}return null},walkPerimeter:function(e,t,n,i,a){void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===a&&(a=0);var o=[],s=l.step,r=i,c=a;do{var u=s((c-1)*t+(r-1),e,t,n,r,c);switch(r>=0&&r<t&&c>=0&&c<n&&o.push(cc.v2(r,c)),u){case 1:c-=1;break;case 2:r-=1;break;case 3:c+=1;break;case 4:r+=1}}while(r!==i||c!==a);return o.push(cc.v2(r,c)),o},step:function(e,t,n,i,a){var o=0;switch(200<t[e+1]&&a>0&&(o|=1),200<t[e+2]&&a<n-2&&(o|=2),200<t[e+n+1]&&a>0&&(o|=4),200<t[e+n+2]&&a<n-2&&(o|=8),o){case 1:case 5:case 13:l.next_step=1;break;case 2:case 3:case 7:l.next_step=4;break;case 4:case 12:case 14:l.next_step=2;break;case 8:case 10:case 11:l.next_step=3;break;case 6:1===l.next_step?l.next_step=2:l.next_step=4;break;case 9:4==l.next_step?l.next_step=1:l.next_step=3;break;default:l.next_step=0}return l.next_step}},u=s;n.default=u,t.exports=n.default,cc._RF.pop()},{}],IInputCommand:[function(e,t,n){"use strict";cc._RF.push(t,"59c192hVPJH1IkBCkbQSs0I","IInputCommand"),n.__esModule=!0,n.default=void 0;var i=function(){function e(e){this.node=e.node,this.manager=e,this.touches=[],this._currentTouchID=-1}var t=e.prototype;return t.onDown=function(){},t.onMove=function(){},t.onUp=function(){},t.createTouch=function(e,t){var n={id:e._id,info:this.getTouchInfo(e,t),time:this.manager.time};return this.touches[e._id]=n,n},t.findTouch=function(e){return this.touches[e._id]},t.destroyTouch=function(e){this.touches.splice(e._id,1)},t.getTouchInfo=function(e,t){var n=e.getLocation(),i=cc.Camera.findCamera(t.node),a=n.clone(),o=new cc.Vec2(0,0);return i instanceof cc.Camera&&(o=i.getScreenToWorldPoint(a)),a=this.node.convertToNodeSpaceAR(o),{id:e._id,time:this.manager.time,location:n,position:a,worldPosition:o}},t.getVectorAngle=function(e){return 180*Math.atan2(e.y,e.x)/Math.PI},e}();n.default=i,t.exports=n.default,cc._RF.pop()},{}],IPlate:[function(e,t,n){"use strict";cc._RF.push(t,"437b13p0xpLrpG48CFt3wMI","IPlate"),n.__esModule=!0,n.default=void 0;var i,a=(i=e("GameObject"))&&i.__esModule?i:{default:i},o=cc.Class({extends:a.default,properties:{canMoveOnThisCell:{default:!0,visible:!1},_stepCounter:{default:1,serializable:!1},_isChanged:{default:!1,serializable:!1}},specify:function(e){e&&"boolean"==typeof e.canMoveOnThisCell&&(this.canMoveOnThisCell=e.canMoveOnThisCell)},canStepOnPlate:function(e,t){return t instanceof Function&&t(e),this.canMoveOnThisCell},changeOnStep:function(){}});n.default=o,t.exports=n.default,cc._RF.pop()},{GameObject:"GameObject"}],IngameButton:[function(e,t){"use strict";cc._RF.push(t,"d21313NpVdKCZcHl6FUWlsx","IngameButton");var n=a(e("GameEvent")),i=a(e("UiElement"));function a(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:i.default,properties:{fadeInTime:.5,fadeOutTime:.5,isOneTapGame:!1,_inputCatcher:null,_tweenOpacityMax:null,_tweenOpacityMin:null},onLoad:function(){this._inputCatcher=this.node.getComponent("InputCatcher"),this._tweenOpacityMax=my.tweenManager.add(this.node,{opacity:255},this.fadeInTime,"linear",!1),this._tweenOpacityMin=my.tweenManager.add(this.node,{opacity:0},this.fadeOutTime,"linear",!1);var e=null;this.isOneTapGame?(e="adwords"===AD_TYPE||"facebook",this.node.opacity=e?255:0,this.toggleButton(e)):(e="adwords"===AD_TYPE,this.node.opacity=e?255:0,this.toggleButton(e)),cc.systemEvent.on(n.default.TOGGLE_INGAME_BUTTON,this.onToggleButton,this)},onToggleButton:function(e){this.toggleButton(e)},toggleButton:function(e){this.isActiveElement!==e&&(this.isActiveElement=e,this.toggleInput(e))},toggleInput:function(e){this._inputCatcher&&this._inputCatcher.toggle(e)},onSwitchActiveCallback:function(){this.isActiveElement?(this.node.active=!0,this._tweenOpacityMax.start()):(this.node.active=!1,this._tweenOpacityMin.start())}}),cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement"}],IngameLogo:[function(e,t){"use strict";cc._RF.push(t,"949570fxA1MuLfwaPhZFbG2","IngameLogo");var n,i=(n=e("UiElement"))&&n.__esModule?n:{default:n};cc.Class({extends:i.default,properties:{isAlwaysShow:!1},onLoad:function(){this.isActiveElement=!("adwords"!==AD_TYPE&&!this.isAlwaysShow)}}),cc._RF.pop()},{UiElement:"UiElement"}],InputCatcher:[function(e,t){"use strict";cc._RF.push(t,"b770djH3JdEGKd6W2wUb4zT","InputCatcher");var n=o(e("GameEvent")),i=o(e("TouchSource")),a=o(e("InputTypes"));function o(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{touchSource:{default:i.default.Any,type:i.default}},editor:{menu:"Input/InputCatcher"},onEnable:function(){this.toggle(!0)},onDisable:function(){this.toggle(!1)},toggle:function(e){var t=e?"on":"off";this.node[t](cc.Node.EventType.TOUCH_START,this.onDown,this),this.node[t](cc.Node.EventType.TOUCH_MOVE,this.onMove,this),this.node[t](cc.Node.EventType.TOUCH_END,this.onUp,this),this.node[t](cc.Node.EventType.TOUCH_CANCEL,this.onUp,this)},onDown:function(e){cc.systemEvent.emit(n.default.INPUT,a.default.Down,e.touch,this.touchSource,this)},onMove:function(e){cc.systemEvent.emit(n.default.INPUT,a.default.Move,e.touch,this.touchSource,this)},onUp:function(e){cc.systemEvent.emit(n.default.INPUT,a.default.Up,e.touch,this.touchSource,this)},onCancel:function(e){cc.systemEvent.emit(n.default.INPUT,a.default.Cancel,e.touch,this.touchSource,this)}}),cc._RF.pop()},{GameEvent:"GameEvent",InputTypes:"InputTypes",TouchSource:"TouchSource"}],InputManager:[function(e,t){"use strict";cc._RF.push(t,"6f156wuwaxNh788i3QmRN0m","InputManager");var n=u(e("GameEvent")),i=u(e("GameStates")),a=u(e("InputTypes")),o=u(e("TouchSource")),s=u(e("AnyInputCommand")),r=u(e("ButtonInputCommand")),c=u(e("ShopCloseButtonCommand")),l=u(e("FirstTouchInputCommand"));function u(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{mainCamera:{default:null,type:cc.Camera},isNeedControlShowTutorial:!0,tutorialDelay:{default:3,visible:function(){return this.isNeedControlShowTutorial}},tutorialCancelSource:{default:[],type:o.default,visible:function(){return this.isNeedControlShowTutorial}},adTypeOnResult:[cc.String],touchSourceRedirect:[o.default],inputTypeOnResultRedirect:{default:a.default.None,type:a.default},time:{get:function(){return this._time},visible:!1},commands:{default:{},visible:!1,serializable:!1},_time:{default:0,serializable:!1},_userSleepTapTime:{default:0,serializable:!1},_gameState:{default:null,serializable:!1},_canRedirectPlayer:{default:!1,serializable:!1},_isTouching:{default:!1,serializable:!1},_firstTouch:{default:null,serializable:!1}},editor:{menu:"Input/InputManager"},onEnable:function(){this._subscribeEvents(!0)},onDisable:function(){this._subscribeEvents(!1)},onLoad:function(){this.commands[o.default.Any]=new s.default(this),this.commands[o.default.RedirectButton]=new r.default(this),this.commands[o.default.ShopCloseButton]=new c.default(this),this._firstTouch=new l.default(this,o.default.Any)},update:function(e){this._time+=e,this._gameState!==i.default.Result&&this._gameState!==i.default.Shopping&&!this._isTouching&&this.isNeedControlShowTutorial&&(this._userSleepTapTime<this.tutorialDelay&&this._userSleepTapTime+e>=this.tutorialDelay&&cc.systemEvent.emit(n.default.TOGGLE_TUTOR,!0),this._userSleepTapTime+=e)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](n.default.INPUT,this.onInput,this),cc.systemEvent[t](n.default.PLAYER_CAN_REDIRECT,this.onPlayerCanRedirect,this),cc.systemEvent[t](n.default.SET_STATE_ON_MANAGERS,this.onSetStateOnInputManager,this),cc.systemEvent[t](n.default.CONVERT_TO_CAMERA,this.onConvertToCamera,this),cc.systemEvent[t](n.default.CONVERT_CAMERA_TO_WORLD,this.onConvertCameraToWorld,this)},_updateInputCommands:function(e,t,n,i){var o=this.commands[n];switch(e){case a.default.Down:o&&o.onDown(t,i);break;case a.default.Move:o&&o.onMove(t,i);break;case a.default.Up:o&&o.onUp(t,i)}},_firstTapCommand:function(e){this._firstTouch.onDown instanceof Function&&this._firstTouch.onDown(e)},_resetInactiveTime:function(){this._userSleepTapTime=0},_checkTutorial:function(e){this._gameState!==i.default.Fake&&this.tutorialCancelSource.includes(e)&&cc.systemEvent.emit(n.default.TOGGLE_TUTOR,!1)},_checkEndGame:function(e,t){var a=!1,o=this.adTypeOnResult.find(function(e){return e===AD_TYPE}),s=this.touchSourceRedirect.includes(t);this._gameState!==i.default.Result&&this._gameState!==i.default.Fake||!s||(a=!0),a&&e===this.inputTypeOnResultRedirect&&this._canRedirectPlayer&&!o&&cc.systemEvent.emit(n.default.REDIRECT_PROCESSING)},onInput:function(e,t,n,i){switch(e){case a.default.Down:this.onDown(e,t,n,i);break;case a.default.Move:this.onMove(e,t,n,i);break;case a.default.Up:this.onUp(e,t,n,i)}this._firstTapCommand(n),this._checkEndGame(e,n),this._updateInputCommands(e,t,n,i),this._resetInactiveTime()},onDown:function(e,t,n){this._isTouching||(this._isTouching=!0,this._checkTutorial(n))},onMove:function(){},onUp:function(){this._isTouching&&(this._isTouching=!1)},onSetStateOnInputManager:function(e){this._gameState=e},onPlayerCanRedirect:function(){this._canRedirectPlayer=!0},onConvertToCamera:function(e,t){var n=this.mainCamera?this.mainCamera.getWorldToScreenPoint(e):e;t instanceof Function&&t(n)},onConvertCameraToWorld:function(e,t){var n=this.mainCamera?this.mainCamera.getScreenToWorldPoint(e):e;t instanceof Function&&t(n)}}),cc._RF.pop()},{AnyInputCommand:"AnyInputCommand",ButtonInputCommand:"ButtonInputCommand",FirstTouchInputCommand:"FirstTouchInputCommand",GameEvent:"GameEvent",GameStates:"GameStates",InputTypes:"InputTypes",ShopCloseButtonCommand:"ShopCloseButtonCommand",TouchSource:"TouchSource"}],InputTypes:[function(e,t,n){"use strict";cc._RF.push(t,"3472cbYUjhE+bWFBFiJwbOi","InputTypes"),n.__esModule=!0,n.default=void 0;var i=cc.Enum({None:0,Down:1,Move:2,Up:3,Cancel:4});n.default=i,t.exports=n.default,cc._RF.pop()},{}],ItemDictionary:[function(e,t){"use strict";cc._RF.push(t,"3a22ffBJO9DdIALtAeAS1uH","ItemDictionary");var n=o(e("GameEvent")),i=o(e("ItemType")),a=o(e("GameObjectType"));function o(e){return e&&e.__esModule?e:{default:e}}var s=cc.Class({properties:{spriteFrame:{default:null,type:cc.SpriteFrame},position:cc.Vec2.ZERO,rotation:0,scale:new cc.Vec2(1,1)},name:"ItemSpriteConfig"}),r=cc.Class({properties:{spriteConfig:{default:function(){return new s},type:s},dragElement:{default:a.default.None,type:a.default},dragElementScale:cc.Vec2.ONE,tag:0,eventsToSend:[n.default]},name:"ItemData"});cc.Class({extends:cc.Component,properties:{PREVIEW:{default:!1,editorOnly:!0},itemType:{default:i.default.Default,type:i.default,notify:function(){-1===this._convertItemType.indexOf(this.itemType)&&(this._convertItemType.push(this.itemType),this._items.push(null)),this.item=this._items[this._convertItemType.indexOf(this.itemType)]}},item:{default:null,type:r,notify:function(){(null===this.item||this.item)&&(this._items[this._convertItemType.indexOf(this.itemType)]=this.item)}},items:{get:function(){return this._items},type:[r],visible:function(){return this.PREVIEW}},convertItemType:{get:function(){return this._convertItemType},type:[i.default],visible:function(){return this.PREVIEW}},_items:{default:function(){return[null]},type:[r]},_convertItemType:{default:function(){return[i.default.Default]},type:[i.default]}},onEnable:function(){this._subscriptionEvents(!0)},onDisable:function(){this._subscriptionEvents(!1)},getItemSpriteFrame:function(e){var t=this.convertItemType.indexOf(e);return-1!==t?this.items[t]:null},_subscriptionEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](n.default.GET_ITEM_DATA,this.onGetItemData,this)},onGetItemData:function(e,t){t instanceof Function&&t(this.getItemSpriteFrame(e))}}),cc._RF.pop()},{GameEvent:"GameEvent",GameObjectType:"GameObjectType",ItemType:"ItemType"}],ItemInputCommand:[function(e,t,n){"use strict";cc._RF.push(t,"45c7983fxBDP5BxefKRgCTZ","ItemInputCommand"),n.__esModule=!0,n.default=void 0;var i=a(e("GameEvent"));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._currentTouchID=-1,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.onDown=function(e,t){if(-1===this._currentTouchID){this.createTouch(e,t);var n=this.getTouchInfo(e,t);this._currentTouchID=e._id,cc.systemEvent.emit(i.default.TOGGLE_TUTOR,!1),cc.systemEvent.emit(i.default.DOWN_ITEM,n,t)}},o.onMove=function(e,t){if(this._currentTouchID===e._id){var n=this.getTouchInfo(e,t);cc.systemEvent.emit(i.default.MOVE_ITEM,n,t)}},o.onUp=function(e,t){if(this._currentTouchID===e._id){this._currentTouchID=-1;var n=this.getTouchInfo(e,t);cc.systemEvent.emit(i.default.UP_ITEM,n,t),this.destroyTouch(e)}},a}(a(e("IInputCommand")).default);n.default=o,t.exports=n.default,cc._RF.pop()},{GameEvent:"GameEvent",IInputCommand:"IInputCommand"}],ItemType:[function(e,t,n){"use strict";cc._RF.push(t,"63c57nkSPVEOpdTX6SkjVJT","ItemType"),n.__esModule=!0,n.default=void 0;var i=cc.Enum({Default:0,Wisp:1,Mop:2,Spray:3,Wallpaper:4,Mirror:5});n.default=i,t.exports=n.default,cc._RF.pop()},{}],LebelNumbers:[function(e,t){"use strict";cc._RF.push(t,"b1281FBNFBMdaxdxKGjiVuw","LebelNumbers");var n,i=(n=e("GameEvent"))&&n.__esModule?n:{default:n};cc.Class({extends:cc.Component,properties:{_labelText:{default:null,serializable:!1}},onLoad:function(){this._labelText=this.node.getComponent(cc.Label),this._subscribeEvents(!0)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.UPDATE_LABEL,this.onUpdateLabel,this)},onUpdateLabel:function(e){this._labelText&&(this.node.color="E"===e?cc.Color.GREEN:cc.Color.RED,this._labelText.string=e)}}),cc._RF.pop()},{GameEvent:"GameEvent"}],LevelManager:[function(e,t){"use strict";cc._RF.push(t,"1e00e2udMVFQLaNYvUAZEAR","LevelManager");var n=s(e("GameEvent")),i=s(e("Level")),a=s(e("LevelType")),o=s(e("GameStates"));function s(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{delayRestart:.3,delayCompete:.35,delayStartGame:2,startLevel:{default:a.default.Result,type:a.default},PREVIEW:{default:!1,editorOnly:!0,serializable:!1},levelType:{default:a.default.Result,type:a.default,notify:function(){this.levelType!==a.default.Result&&(-1===this._convertLevelType.indexOf(this.levelType)&&(this._convertLevelType.push(this.levelType),this._levels.push(null)),this.previewLevel=this._levels[this._convertLevelType.indexOf(this.levelType)])},serializable:!1},previewLevel:{default:null,type:i.default,notify:function(){this.levelType!==a.default.None&&this.previewLevel instanceof i.default&&(this._levels[this._convertLevelType.indexOf(this.levelType)]=this.previewLevel)},visible:function(){return this.levelType!==a.default.Result},serializable:!1},levels:{get:function(){return this._levels},type:[i.default],visible:function(){return this.PREVIEW}},convertLevelType:{get:function(){return this._convertLevelType},type:[a.default],visible:function(){return this.PREVIEW}},_levels:{default:[],type:[i.default]},_convertLevelType:{default:[],type:[a.default]},_level:{default:null,type:i.default,serializable:!1},_restarts:{default:{},serializable:!1},_currentGameStateToSendOnStart:{default:o.default.Game,serializable:!1}},onLoad:function(){cc.systemEvent.on(n.default.COMPLETE_LEVEL,this.onCompeteLevel,this),cc.systemEvent.on(n.default.LOSE_LEVEL,this.onLoseLevel,this),cc.systemEvent.on(n.default.RESTART_LEVEL,this.onRestartLevel,this)},start:function(){var e=this;this.setLevel(this.startLevel,!0),this.scheduleOnce(function(){cc.systemEvent.emit(n.default.SWITCH_GAME_STATE,e._currentGameStateToSendOnStart)},this.delayStartGame)},setLevel:function(e,t){var s=this;void 0===e&&(e=null),void 0===t&&(t=!1),this._convertLevelType.indexOf(e);var r=this._getLevel(e);switch(r){case a.default.Result:this.scheduleOnce(function(){cc.systemEvent.emit(n.default.SWITCH_GAME_STATE,o.default.Result)},this.delayCompete);break;default:this._level instanceof i.default&&this._level.terminate(),this._level=r,this._level.type=e,this._level.init(),t&&this._level.isFake&&this.scheduleOnce(function(){s._currentGameStateToSendOnStart=o.default.Fake,cc.systemEvent.emit(n.default.SWITCH_GAME_STATE,o.default.Fake)},this.delayStartGame),this.onStartLevelCallback(e)}},_getLevel:function(e){var t=this._convertLevelType.indexOf(e);return-1===t?a.default.Result:this._levels[t]},_calculateAllRestartCount:function(){var e=0;for(var t in this._restarts)e+=this._restarts[t];return e},_addRestartCount:function(e){void 0===this._restarts[e]&&(this._restarts[e]=0),this._restarts[e]+=1},onStartLevelCallback:function(e){cc.log("Level start",e)},onLoseLevel:function(){this.scheduleOnce(function(){},this.delayRestart)},onCompeteLevel:function(e){var t=this;if(void 0===e&&(e=null),e===a.default.Result)return cc.systemEvent.emit(n.default.SWITCH_GAME_STATE,o.default.Result),void cc.systemEvent.emit(n.default.TOGGLE_TUTOR,!1);cc.systemEvent.emit(n.default.TOGGLE_PLAYER,!1),cc.systemEvent.emit(n.default.TOGGLE_TUTOR,!1),cc.systemEvent.emit(n.default.TOGGLE_POINTER,!1),this.scheduleOnce(function(){cc.systemEvent.emit(n.default.START_FLASH,function(){cc.systemEvent.emit(n.default.SWITCH_GAME_STATE,o.default.SwitchLevel),t.setLevel(e)},function(){t._getLevel(e).isFake?cc.systemEvent.emit(n.default.SWITCH_GAME_STATE,o.default.Fake):cc.systemEvent.emit(n.default.SWITCH_GAME_STATE,o.default.Game)})},this.delayCompete)},onRestartLevel:function(){var e=this;this._addRestartCount(this._level.type);var t=this._level.type;this.scheduleOnce(function(){cc.systemEvent.emit(n.default.START_FLASH,function(){e.setLevel(t)},function(){e._getLevel(t).isFake?cc.systemEvent.emit(n.default.SWITCH_GAME_STATE,o.default.Fake):cc.systemEvent.emit(n.default.SWITCH_GAME_STATE,o.default.Game)})},this.delayCompete)}}),cc._RF.pop()},{GameEvent:"GameEvent",GameStates:"GameStates",Level:"Level",LevelType:"LevelType"}],LevelType:[function(e,t,n){"use strict";cc._RF.push(t,"4063cDMsS5OqIHA9oBEGPTj","LevelType"),n.__esModule=!0,n.default=void 0;var i=cc.Enum({Result:0,Level1:1,Level2:2});n.default=i,t.exports=n.default,cc._RF.pop()},{}],Level:[function(e,t){"use strict";cc._RF.push(t,"78bb1SjImlJIaXti2d3/Rpx","Level");var n=o(e("GameEvent")),i=o(e("LevelType")),a=o(e("DataType"));function o(e){return e&&e.__esModule?e:{default:e}}o(e("ValueType")),o(e("GameStates")),cc.Class({name:"Level",properties:{dataType:{default:a.default.None,type:a.default},countCondition:{default:1,type:cc.Integer,min:1},nextLevel:{default:i.default.Result,type:i.default},isFake:!1,_isNextLevel:{default:!1,serializable:!1},_completeCondition:{default:0,serializable:!1},_isLastTrigger:{default:!1,serializable:!1}},init:function(){this._completeCondition=0,this._subscriptionEvents(!0),cc.systemEvent.emit(n.default.LOAD_WORLD,this.dataType),cc.systemEvent.emit(n.default.LEVEL_START)},terminate:function(){this._subscriptionEvents(!1)},_subscriptionEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](n.default.COMPLETE_CONDITION,this.onCompleteCondition,this),cc.systemEvent[t](n.default.GET_LEVEL,this.onGetLevel,this),cc.systemEvent[t](n.default.TREE_VALUE,this.onTreeValue,this)},onTreeValue:function(e){0===e&&(cc.systemEvent.emit(n.default.COMPLETE_CONDITION),cc.systemEvent.emit(n.default.GAME_COMPLETE_CHECK),cc.systemEvent.emit(n.default.SHOP_TOGGLE,!0,!1))},onCompleteCondition:function(){this._completeCondition+=1,this._completeCondition>=this.countCondition&&!this._isNextLevel&&(cc.systemEvent.emit(n.default.COMPLETE_LEVEL,this.nextLevel,this),this._isNextLevel=!0)},onGetLevel:function(e){e instanceof Function&&e(this)}}),cc._RF.pop()},{DataType:"DataType",GameEvent:"GameEvent",GameStates:"GameStates",LevelType:"LevelType",ValueType:"ValueType"}],LightMask:[function(e,t){"use strict";cc._RF.push(t,"99f23JJ0VZBsKMxucFTToL4","LightMask");var n=a(e("GameEvent")),i=a(e("GameObjectType"));function a(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{spriteTarget:{default:null,type:cc.Node},_sprite:{default:null,serializable:!1},_mask:{default:null,serializable:!1},_animation:{default:null,serializable:!1},_target:{default:null,serializable:!1}},onLoad:function(){this._target=this.spriteTarget instanceof cc.Node?this.spriteTarget:this.node,this._sprite=this._target.getComponent(cc.Sprite)},onEnable:function(){this._subscribeEvents(!0)},onDisable:function(){this._subscribeEvents(!1)},start:function(){this._createGameObject()},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](n.default.LIGHT_BLINK_OBJECT,this.onLightBlink,this)},_createGameObject:function(){var e=this;this._sprite&&cc.systemEvent.emit(n.default.CREATE_GAME_OBJECT,i.default.LightMask,function(t){t instanceof cc.Node&&(t.parent=e._target)},function(t){if(t instanceof cc.Node){e._animation=t.getComponent(cc.Animation)||t.getComponentInChildren(cc.Animation),e._mask=t.getComponent(cc.Mask)||t.getComponentInChildren(cc.Mask),e._animation.node.opacity=0,e._mask.spriteFrame=e._sprite.spriteFrame;var n=[e._target.anchorX,e._target.anchorY];t.anchorX=n[0],t.anchorY=n[1];var i=[e._target.anchorX,e._target.anchorY];e._animation.node.anchorX=i[0],e._animation.node.anchorY=i[1],e._changeSize(e._mask,e._target),e._changeSize(e._animation,e._target)}})},_changeSize:function(e,t){e&&(e.node.width=t.width,e.node.height=t.height)},onLightBlink:function(e){e===this.node&&this._animation&&this._animation.play()}}),cc._RF.pop()},{GameEvent:"GameEvent",GameObjectType:"GameObjectType"}],MapManager:[function(e,t){"use strict";cc._RF.push(t,"1ba79PT/rVBcbI5eUEQPYUA","MapManager"),a(e("GameEvent"));var n=a(e("GameObject")),i=a(e("GameObjectType"));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function s(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}cc.Class({extends:n.default,properties:{holder:{default:null,type:cc.Node},mapGreed:{default:[],serializable:!1,visible:!1},_currentCellSize:{default:new cc.Size(0,0),serializable:!1},_currentMapSize:{default:cc.Vec2.ZERO,serializable:!1}},onEnable:function(){this._subscribeEvents(!0)},onDisable:function(){this._subscribeEvents(!0)},specify:function(e){this._currentCellSize=new cc.Size(e.cellSize.w,e.cellSize.h),this._currentMapSize=new cc.Size(e.mapSize.width,e.mapSize.height),this._setOffsetHolderMap(this._currentCellSize,this._currentMapSize),this._createMap(e)},prepareReturnToPool:function(){this.mapGreed=[]},getElementFromIndex:function(e){return e.x>=0&&e.y>=0&&e.x<this._currentMapSize.width&&e.y<this._currentMapSize.height?this.mapGreed[e.y][e.x]:null},_subscribeEvents:function(){},_createMap:function(e){this._createEmptyMap(),e.wall instanceof Array&&this._createSomeObjectInMap(e.wall.reverse(),e.scaleSetting.wall),e.flor instanceof Array&&this._createSomeObjectInMap(e.flor.reverse(),e.scaleSetting.flor),e.trigger instanceof Array&&this._createTriggers(e.trigger,e.scaleSetting.trigger),e.hero&&this._setHero(e.hero,e.scaleSetting.hero)},_setHero:function(e,t){var i=this._createItem(e.type,cc.Vec3.ZERO,e.eulerAngles,t,e.specify);if(i){var a=this.mapGreed[e.position.y][e.position.x],o=i.getComponent(n.default);i.parent=this.holder||this.node,o&&(o.map=this,o.index=new cc.Vec2(e.position.x,e.position.y),o.init instanceof Function&&o.init()),a&&i.setPosition(a.pos.x,10,a.pos.z)}},_createTriggers:function(e,t){for(var n,i=o(e);!(n=i()).done;){var a=n.value,s=this.getElementFromIndex(a.index);s&&this._createItem(a.type,s.pos,cc.Vec3.ZERO,t,a.specify)}},_createEmptyMap:function(){for(var e=0,t=0,n=0;n<this._currentMapSize.height;n++){var i=[];e-=this._currentCellSize.height+.5*this._currentCellSize.height;for(var a=0;a<this._currentMapSize.width;a++){t=t+this._currentCellSize.width+.5*this._currentCellSize.width;var o={currentItem:null,go:null,pos:new cc.Vec3(t,0,e)};i.push(o)}t=0,this.mapGreed.push(i)}},_createSomeObjectInMap:function(e,t){for(var i=e,a=0,o=0;o<this._currentMapSize.height;o++)for(var s=0;s<this._currentMapSize.width;s++){var r=this.mapGreed[o][s],c=i[a];if(null===r.currentItem&&c&&"None"!==c){var l=this._createItem(c.type,r.pos,c.eulerAngles,t,c.specify);l&&(r.go=l.getComponent(n.default),r.currentItem=l)}a++}},_createItem:function(e,t,n,a,o){var s=this.world.createObject({type:i.default[e],position:t,transform:{eulerAngles:n,scale:a},specify:o});return s&&(s.parent=this.holder),s},_setOffsetHolderMap:function(e,t){if(void 0===e&&(e=this._currentCellSize),void 0===t&&(t=this._currentMapSize),this.holder){var n=e.width*t.width-this._currentCellSize.width,i=e.height*t.height-this._currentCellSize.height;this.holder.setPosition(-i,0,n)}}}),cc._RF.pop()},{GameEvent:"GameEvent",GameObject:"GameObject",GameObjectType:"GameObjectType"}],ObjectDragAreaTarget:[function(e,t){"use strict";cc._RF.push(t,"87492V3VZ5Ct46B+YQFyExX","ObjectDragAreaTarget");var n=a(e("GameEvent")),i=a(e("ItemType"));function a(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{itemTypeIncome:{default:i.default.Default,type:i.default},areaToDrop:{default:null,type:cc.Node},_targetDropArea:{default:null,serializable:!1}},onLoad:function(){this._targetDropArea=this.areaToDrop instanceof cc.Node?this.areaToDrop:this.node,this._subscribeEvents(!0)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](n.default.ITEM_DROPPED,this.onItemDropped,this)},onItemDropped:function(e,t,a){if(e===i.default[this.itemTypeIncome]){var o=cc.Camera.findCamera(this._targetDropArea).getScreenToWorldPoint(t),s=this._targetDropArea.getBoundingBoxToWorld().contains(o);s&&this.node.emit(n.default.ITEM_DROP_IN_AREA),a instanceof Function&&a(s)}}}),cc._RF.pop()},{GameEvent:"GameEvent",ItemType:"ItemType"}],PersonaType:[function(e,t,n){"use strict";cc._RF.push(t,"7450bI/IXhOM6mgN2nhLB3Q","PersonaType"),n.__esModule=!0,n.default=void 0;var i=cc.Enum({None:0,Hero:3,Enemy:4});n.default=i,t.exports=n.default,cc._RF.pop()},{}],PhysicManager:[function(e,t){"use strict";var n,i,a,o,s,r,c,l,u,h,d,f,m,p,_,v,y,E,T,g,b,C;function S(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t,n,i,a){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}cc._RF.push(t,"4ac372RldxCW5u97uzM3P9H","PhysicManager");var O=cc._decorator,w=O.ccclass,I=O.property;n=I(cc.Boolean),i=I({visible:function(){return this.isPhysicsEnabled},serializable:!1}),a=I({visible:function(){return this.isPhysicsEnabled}}),o=I({visible:function(){return this.isPhysicsEnabled}}),s=I(cc.Boolean),r=I({visible:function(){return this.isColliderEnabled}}),c=I(cc.Boolean),l=I({visible:function(){return this.isPhysics3DEnabled}}),u=I({visible:function(){return this.isPhysics3DEnabled}}),h=I({visible:function(){return this.isPhysics3DEnabled}}),w((C=function(e){var t,n;function i(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return S(t=e.call.apply(e,[this].concat(i))||this,"isPhysicsEnabled",f,A(t)),S(t,"isAccumulatorEnabled",m,A(t)),S(t,"gravity",p,A(t)),S(t,"isDebugPhysics",_,A(t)),S(t,"isColliderEnabled",v,A(t)),S(t,"isColliderDebug",y,A(t)),S(t,"isPhysics3DEnabled",E,A(t)),S(t,"is3DAccumulator",T,A(t)),S(t,"isFixedDigit",g,A(t)),S(t,"isInternalTime",b,A(t)),t.physicsManager=cc.director.getPhysicsManager(),t.colliderManager=cc.director.getCollisionManager(),t.physicsManager3D=cc.director.getPhysics3DManager(),t}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=i.prototype;return a.onLoad=function(){this.init3D(),this.initBox2D(),this.fixPhysics()},a.init3D=function(){this.physicsManager3D&&(this.physicsManager3D.enabled=!0,this.physicsManager3D.useAccumulator=this.is3DAccumulator,this.physicsManager3D.useFixedDigit=this.isFixedDigit,this.physicsManager3D.useInternalTime=this.isInternalTime)},a.initBox2D=function(){my.pm=this,this.physicsManager&&(this.physicsManager.enabled=this.isPhysicsEnabled,this.physicsManager.gravity=this.gravity,this.physicsManager.enabledAccumulator=this.isAccumulatorEnabled),this.colliderManager&&(this.colliderManager.enabled=this.isColliderEnabled),this.isDebugPhysics,this.isColliderDebug&&this.colliderManager},a.fixPhysics=function(){this.physicsManager&&(b2.Body.prototype.SetTransformXY=function(e,t,n){this.m_xf.q.SetAngle(n),this.m_xf.p.Set(e,t),this.m_xf0.Copy(this.m_xf),b2.Transform.MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.a=n,this.m_sweep.c0.Copy(this.m_sweep.c),this.m_sweep.a0=n;for(var i=this.m_fixtureList;i;i=i.m_next)i.Synchronize(this.m_xf,this.m_xf);this.m_world.m_contactManager.FindNewContacts()},b2.Body.prototype.SetType=function(e){if(this.m_type!==e){this.m_type=e,this.ResetMassData(),this.m_type===b2.BodyType.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_sweep.a0=this.m_sweep.a,this.m_sweep.c0.Copy(this.m_sweep.c),this.SynchronizeFixtures()),this.SetAwake(!0),this.m_force.SetZero(),this.m_torque=0;for(var t=this.m_contactList;t;){var n=t;t=t.next,this.m_world.m_contactManager.Destroy(n.contact)}this.m_contactList=null;for(var i=this.m_fixtureList;i;i=i.m_next)i.TouchProxies()}})},a.setIsDebug=function(e){this.isDebugPhysics=e,this.isDebugPhysics},i}(cc.Component),f=R((d=C).prototype,"isPhysicsEnabled",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m=R(d.prototype,"isAccumulatorEnabled",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p=R(d.prototype,"gravity",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return cc.v2(0,-980)}}),_=R(d.prototype,"isDebugPhysics",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),v=R(d.prototype,"isColliderEnabled",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y=R(d.prototype,"isColliderDebug",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),E=R(d.prototype,"isPhysics3DEnabled",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),T=R(d.prototype,"is3DAccumulator",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=R(d.prototype,"isFixedDigit",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=R(d.prototype,"isInternalTime",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d)),cc._RF.pop()},{}],PlateDecrease:[function(e,t){"use strict";cc._RF.push(t,"6e9df37zvlMgoUYYE6TB2lq","PlateDecrease");var n,i=(n=e("IPlate"))&&n.__esModule?n:{default:n};cc.Class({extends:i.default,properties:{activeNodeOnStep:{default:null,type:cc.Node},deactivateNodeOnStep:{default:null,type:cc.Node}},specify:function(e){this._super(e),this.activeNodeOnStep&&(this.activeNodeOnStep.active=!1)},onEnable:function(){},canStepOnPlate:function(e,t){var n=null;return e>0&&this._stepCounter>0&&(e-=1,this._stepCounter=this._stepCounter-1,this.canMoveOnThisCell=!0,n=!1),t instanceof Function&&t(e,n),this.canMoveOnThisCell},changeOnStep:function(){this._isChanged||(this.activeNodeOnStep&&(this.activeNodeOnStep.active=!0),this.deactivateNodeOnStep&&(this.deactivateNodeOnStep.active=!1),this._isChanged=!0)}}),cc._RF.pop()},{IPlate:"IPlate"}],PlateIncrease:[function(e,t){"use strict";cc._RF.push(t,"464bam+wL1HEKG+54Nb7j7U","PlateIncrease");var n,i=(n=e("IPlate"))&&n.__esModule?n:{default:n};cc.Class({extends:i.default,properties:{activePlate:{default:null,type:cc.Node},deactivatePlate:{default:null,type:cc.Node}},specify:function(e){this._super(e),this.deactivatePlate&&this.activePlate&&(this.deactivatePlate.active=!1,this.activePlate.active=!0)},canStepOnPlate:function(e,t){var n=null;return this._stepCounter>0&&(this._stepCounter=this._stepCounter-1,e+=1,n=!0),t instanceof Function&&t(e,n),this.canMoveOnThisCell},changeOnStep:function(){!this._isChanged&&this.activePlate&&this.deactivatePlate&&(this.activePlate.active=!1,this.deactivatePlate.active=!0,this._isChanged=!0)}}),cc._RF.pop()},{IPlate:"IPlate"}],PlayerControl:[function(e,t){"use strict";cc._RF.push(t,"60601dpX6tAwpvfAjBXQ/t+","PlayerControl");var n,i=(n=e("GameEvent"))&&n.__esModule?n:{default:n};cc.Class({extends:cc.Component,properties:{},onEnable:function(){cc.systemEvent.on(i.default.TOGGLE_PLAYER,this.onTogglePlayer,this)},onDisable:function(){cc.systemEvent.off(i.default.TOGGLE_PLAYER,this.onTogglePlayer,this)},_handleEvent:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.PLAYER_CONTROL_MOVE,this.onPlayerControlMove,this),cc.systemEvent[t](i.default.PLAYER_CONTROL_SHOOT,this.onPlayerShoot,this),cc.systemEvent[t](i.default.PLAYER_CONTROL_STOP_MOVE,this.onPlayerStopMove,this)},onTogglePlayer:function(e){this._handleEvent(e),e||this.node.emit(i.default.HERO_STOP_MOVE),this.node.emit(i.default.TOGGLE_RIGID_BODY,e)},onPlayerControlMove:function(e){this.node.emit(i.default.HERO_MOVE,e)},onPlayerStopMove:function(){this.node.emit(i.default.HERO_STOP_MOVE)},onPlayerShoot:function(){}}),cc._RF.pop()},{GameEvent:"GameEvent"}],Pointer:[function(e,t){"use strict";cc._RF.push(t,"f28ce+V4TxNy4jPVBv+oTZT","Pointer");var n,i=(n=e("GameEvent"))&&n.__esModule?n:{default:n};cc.Class({extends:cc.Component,properties:{interpolationTime:0,drawGravityScale:1,prefab:{default:null,type:cc.Prefab},minCountCircles:0,maxCountCircles:0,minOpacity:0,maxOpacity:255,minWidth:0,maxWidth:0,startTime:0,drawTime:0,_tween:null,_worldGravity:null,_circles:[],_point:null,_velocity:null,_power:0,_interpolation:0},onLoad:function(){this._worldGravity=my.pm.gravity,this._tween=my.tweenManager.add(this,{_interpolation:1},this.interpolationTime),this._tween.loop(),this._createCircles(),this._subscribeEvents(!0)},onEnable:function(){this.onTogglePointer(!1)},update:function(){this._isEnabled&&this._point&&this._updatePointer()},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.TOGGLE_POINTER,this.onTogglePointer,this),cc.systemEvent[t](i.default.REFRESH_POINTER,this.onRefreshFromPoint,this)},_createCircles:function(){this._timeInterval=this.drawTime/this.maxCountCircles;for(var e=0;e<this.maxCountCircles;e++){var t=cc.instantiate(this.prefab);t.setParent(this.node),this._circles.push(t)}},_updatePointer:function(){for(var e=this._point,t=this._velocity.rotate(cc.math.toRadian(this.node.angle)),n=Math.floor(this.minCountCircles+(this.maxCountCircles-this.minCountCircles)*this._power*this._power),i=0;i<this.maxCountCircles;i+=1){var a=this._circles[i],o=0,s=255;i<=n?(o=this.startTime+i*this._interpolation*this._timeInterval,s=this.minOpacity+(this.maxOpacity-this.minOpacity)*(1-(o-this.startTime)/this.drawTime)):(o=this.startTime+(n+this._interpolation)*this._timeInterval,s=0);var r=this._getPoint(e,t.mul(this._power),this.drawGravityScale,o),c=(this.minWidth+(this.maxWidth-this.minWidth)*(1-(o-this.startTime)/this.drawTime)*this._power)/a.width;a.setPosition(r),a.setScale(c),a.opacity=s}},_getPoint:function(e,t,n,i){var a=cc.v2(0,0);return a.x=e.x+t.x*i+this._worldGravity.x*n*i*i*.5,a.y=e.y+t.y*i+this._worldGravity.y*n*i*i*.5,this.node.convertToNodeSpaceAR(a)},onRefreshFromPoint:function(e,t,n,i){void 0===i&&(i=0),this._point=e,this._velocity=t,this._power=n,this.node.angle=i},onTogglePointer:function(e){this._isEnabled=e,e?(this.node.opacity=255,this._tween&&this._tween.restart()):this.node.opacity=0}}),cc._RF.pop()},{GameEvent:"GameEvent"}],PrefabsParser:[function(e,t){"use strict";cc._RF.push(t,"d4d13gQtG5LP5n78A7Cb9D1","PrefabsParser"),cc.Class({extends:cc.Component,properties:{targetJson:{default:null,type:cc.JsonAsset},properties:{default:[],type:cc.String,tooltip:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u043d\u043e\u0434\u044b - name/position/angle/scale \u0438 \u0442.\u0434."},EXPORT:{get:function(){return!1},set:function(e){if(e){var t=this._getJsonObject(),n=JSON.stringify(t),i=document.createElement("a"),a=new Blob([n],{type:"application/json"});i.href=URL.createObjectURL(a);var o=(this.targetJson?this.targetJson.name:"Export"+this.node.name)+".json";i.download=o,i.click()}}}},editor:{menu:"PrefabsParser/PrefabsParser"},_getJsonObject:function(){var e,t=this,n=this.node,i=[];return n.children.forEach(function(n){e={};for(var a=0;a<t.properties.length;a+=1){var o=n[t.properties[a]];e[t.properties[a]]=t._parseValue(o)}i.push(e)}),i},_parseValue:function(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n+=1)t.push(this._parseValue(e[n]));return t}if("object"==typeof e){for(var i={},a=e.constructor.__values__,o=0;o<a.length;o+=1)i[a[o]]=this._parseValue(e[a[o]]);return i}return e}}),cc._RF.pop()},{}],ProgressBar:[function(e,t,n){"use strict";cc._RF.push(t,"dff9dh1O/1KIbKMloiQ5nO0","ProgressBar"),n.__esModule=!0,n.default=void 0;var i=o(e("GameEvent")),a=o(e("UiElement"));function o(e){return e&&e.__esModule?e:{default:e}}var s=cc.Class({extends:a.default,properties:{barNode:{default:null,type:cc.Node},startValue:0,maxValueNumber:160,progressBarSpriteName:{default:null,type:cc.Sprite},numberLevelNode:{default:null,type:cc.Node},levelNumbers:[cc.SpriteFrame],startShowDelay:1,_maxWidth:{default:0,serializable:!1},_currentValue:{default:0,serializable:!1},_animationBar:{default:null,serializable:!1},_tweenChange:{default:null,serializable:!1}},onLoad:function(){this.barNode&&(this._maxWidth=this.barNode.width),this._initAnimation(),this._handleSubscription(!0),this.isActiveElement=!0},start:function(){this.barNode&&(this.barNode.width=this._maxWidth*this.startValue,this._currentValue=this.barNode.width)},changeValueBar:function(e){if(this.barNode){var t=this._maxWidth*e;this._currentValue=my.utilities.clamp(this._currentValue+t,0,this._maxWidth),this._tweenChange&&this._tweenChange.stop(),this._tweenChange=my.tweenManager.add(this.barNode,{width:this._currentValue},.3,"linear",!0)}},setNameProgressBar:function(e){e instanceof cc.SpriteFrame&&this.progressBarSpriteName&&(this.progressBarSpriteName.spriteFrame=e)},_handleSubscription:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.CHANGE_PROGRESS_BAR,this.onChangeProgressBar,this)},_initAnimation:function(){var e=this;this._animationBar=this.node.getComponent(cc.Animation),this.scheduleOnce(function(){e._animationBar&&e._animationBar.play()},this.startShowDelay)},_upLevelProgressBar:function(e){this.levelNumbers[e]&&this.numberLevelNode&&(this.numberLevelNode.getComponent(cc.Sprite).spriteFrame=this.levelNumbers[e])},onChangeProgressBar:function(e){var t=e/this.maxValueNumber;this.changeValueBar(t)}});n.default=s,t.exports=n.default,cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement"}],Result:[function(e,t){"use strict";cc._RF.push(t,"5a193rjU8FLhb0Dxfg9agF7","Result");var n=a(e("GameEvent")),i=a(e("UiElement"));function a(e){return e&&e.__esModule?e:{default:e}}var o=cc.Class({properties:{buttonTextNode:{default:null,type:cc.Node},spriteFailText:{default:null,type:cc.SpriteFrame},buttonMain:{default:null,type:cc.Node}},setSpriteFrame:function(e,t){e&&this.buttonTextNode&&t&&(this.buttonTextNode.getComponent(cc.Sprite).spriteFrame=t)},playAnimation:function(){if("adwords"!==AD_TYPE&&"facebook"!==AD_TYPE&&this.buttonMain){var e=this.buttonMain.getComponent(cc.Animation);e&&e.play()}},name:"Button"});cc.Class({extends:i.default,properties:{button:{default:function(){return new o},type:o},winResult:{default:null,type:cc.Node},failResult:{default:null,type:cc.Node},opacitySpehoedWin:3,opacitySpeedLoose:1},onLoad:function(){cc.systemEvent.on(n.default.RESULT_SHOW,this.show,this),this.hide()},show:function(e){var t=this;void 0===e&&(e=!0);var i=e?this.opacitySpeedWin:this.opacitySpeedLoose;this.node.active=!0;var a=my.tweenManager.add(this.node,{opacity:255},i,"linear",!0);e?this.resultWinShow():(this.resultLoseShow(),cc.log("false"),this.button.setSpriteFrame(!0,this.button.spriteFailText)),a.onComplete=function(){cc.systemEvent.emit(n.default.PLAYER_CAN_REDIRECT),t.button.playAnimation()}},hide:function(){this.node.opacity=0,this.failResult&&(this.failResult.active=!1),this.winResult&&(this.winResult.active=!1),this.node.active=!1},resultWinShow:function(){if(this.winResult){this.winResult.active=!0;var e=this.winResult.getComponent(cc.Animation);e&&e.play()}},resultLoseShow:function(){if(this.failResult){this.failResult.active=!0;var e=this.failResult.getComponent(cc.Animation);e&&e.play()}},_getEffectNode:function(e){if(e.prefab){var t=cc.instantiate(e.prefab);return t.parent=this.node,t}}}),cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement"}],ScoreSpawner:[function(e,t){"use strict";cc._RF.push(t,"08a85cWdfFHu6Y1qNL963Ga","ScoreSpawner");var n=o(e("GameEvent")),i=o(e("GameObjectType")),a=o(e("Score"));function o(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{},onLoad:function(){},onEnable:function(){this._handleSubscription(!0)},onDisable:function(){this._handleSubscription(!1)},_handleSubscription:function(e){var t=e?"on":"off";cc.systemEvent[t](n.default.SET_SCORE,this.onSetScore,this)},_createScore:function(e,t,o){var s=this;cc.systemEvent.emit(n.default.CREATE_GAME_OBJECT,i.default.ScoreAnnounce,function(e){if(e instanceof cc.Node){var n=e.getComponent(a.default);e.parent=s.node.parent;var i=s.node.convertToNodeSpaceAR(t);e.setPosition(i),e.setScale(new cc.Vec3(.006,.006,.006)),n&&n.init(o)}},function(t){if(t instanceof cc.Node){var n=t.getComponent(a.default);n&&n.setScore(e)}})},onSetScore:function(e,t,n){this._createScore(e,t,n)}}),cc._RF.pop()},{GameEvent:"GameEvent",GameObjectType:"GameObjectType",Score:"Score"}],Score:[function(e,t,n){"use strict";cc._RF.push(t,"d6f7dJ28R9Ljpph4nDXkD2l","Score"),n.__esModule=!0,n.default=void 0;var i=s(e("GameEvent")),a=s(e("GameObjectType")),o=s(e("ValueType"));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var u={scoreShow:"announcer_score",scoreShowType2:"announcer_score_type_2"},h=cc.Class({extends:cc.Component,properties:{holder:{default:null,type:cc.Node},color:{default:new cc.Color},renderNode:{default:null,type:cc.Sprite},wood:{default:null,type:cc.SpriteFrame},rock:{default:null,type:cc.SpriteFrame},startScore:{default:0,type:cc.Integer},totalCount:0,distanceBetween:0,spriteFrame:{default:[],type:cc.SpriteFrame},angleOffset:cc.Vec3.ZERO,isLookOnCamera:!1,_counter:{default:0,serializable:!1},_arrayNumber:{default:[],serializable:!1},_arrayCounters:{default:[],serializable:!1},_holderNode:{default:null,serializable:!1},_color:{default:new cc.Color,serializable:!1},_currentClip:{default:null,serializable:!1},_rotationTarget:{default:null,serializable:!1}},onLoad:function(){var e=this;cc.systemEvent.emit(i.default.GET_CAMERA_NODE,function(t){e._rotationTarget=t})},init:function(e){if(this._animation=this.node.getComponent(cc.Animation),this._color=this.color,this.renderNode)switch(e){case o.default.TreeCountChop:this.renderNode.spriteFrame=this.wood;break;case o.default.RockCountChop:this.renderNode.spriteFrame=this.rock}this._createItems()},update:function(){this._rotationTarget&&this.isLookOnCamera&&(this.node.lookAt(this.node.parent.convertToNodeSpaceAR(this._rotationTarget.convertToWorldSpaceAR(cc.Vec3.ZERO))),this.node.eulerAngles=cc.v3(0,this.node.eulerAngles.y-180,0).addSelf(this.angleOffset))},addScore:function(){for(var e=0;e<this._arrayNumber.length;e++){if(void 0===this.spriteFrame[e])return;var t=this._arrayNumber[e];this._arrayCounters[e]&&this.spriteFrame[t]&&(this._arrayCounters[e].getComponent(cc.Sprite).spriteFrame=this.spriteFrame[t])}},setScore:function(e){this._counter=Math.abs(e),this._arrayNumber=[];for(var t=this._counter;t>0;)this._arrayNumber.push(t%10),t=parseInt(t/10);this.addScore(),this._currentClip=my.utilities.randomItemFromObject(u),this._animation&&this._animation.play()},_setColor:function(e,t){if(e){e.color=t;for(var n,i=r(e.children);!(n=i()).done;)n.value.color=t}},_setHolderPosition:function(e){var t=e*this.distanceBetween;this._holderNode.setPosition(-.5*(t+this.distanceBetween),0)},_createItems:function(){var e=this;if(0!==this.totalCount||!this.holder){var t=null;this._holderNode=this.holder,this._setHolderPosition(this.totalCount);for(var n=0;n<this.totalCount;n++)cc.systemEvent.emit(i.default.CREATE_GAME_OBJECT,a.default.ScoreNumber,function(n){if(n instanceof cc.Node){n.setPosition(cc.Vec2.ZERO);var i=(t=null===t?n:t).getPosition();i.x+=e.distanceBetween,n.parent=e._holderNode,n.setPosition(i),e._setColor(n,e._color),e._arrayCounters.push(n),t=n}});this._arrayCounters.reverse()}},onAnimationEvent:function(){this._animation&&(this._animation.play(),this._animation.setCurrentTime(0),this._animation.stop());for(var e,t=r(this._arrayCounters);!(e=t()).done;){var n=e.value;n.getComponent(cc.Sprite).spriteFrame=null,cc.systemEvent.emit(i.default.RETURN_TO_POOL,n)}this._arrayNumber=[],this._arrayCounters=[],this._counter=0,this._holderNode=null,cc.systemEvent.emit(i.default.RETURN_TO_POOL,this.node)}});n.default=h,t.exports=n.default,cc._RF.pop()},{GameEvent:"GameEvent",GameObjectType:"GameObjectType",ValueType:"ValueType"}],ShakeSettings:[function(e,t,n){"use strict";cc._RF.push(t,"b4ce7W+qE9D74j0Vi6CsXAI","ShakeSettings"),n.__esModule=!0,n.default=void 0;var i=cc.Class({properties:{duration:1,amplitude:1,priority:0},name:"ShakeSettings"});n.default=i,t.exports=n.default,cc._RF.pop()},{}],ShakeType:[function(e,t,n){"use strict";cc._RF.push(t,"05c331OW2RIg56epiCC6GyW","ShakeType"),n.__esModule=!0,n.default=void 0;var i=cc.Enum({None:0,ShotTank:2,HitObject:3,HitGround:4});n.default=i,t.exports=n.default,cc._RF.pop()},{}],ShopCloseButtonCommand:[function(e,t,n){"use strict";cc._RF.push(t,"99577Jfv2JNmrj//ziPIpM0","ShopCloseButtonCommand"),n.__esModule=!0,n.default=void 0;var i=s(e("GameEvent")),a=s(e("IInputCommand")),o=(s(e("Direction")),s(e("GameStates")));function s(e){return e&&e.__esModule?e:{default:e}}var r=function(e){var t,n;function a(t){return e.call(this,t)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.prototype.onUp=function(){cc.systemEvent.emit(i.default.SWITCH_GAME_STATE,o.default.Game)},a}(a.default);n.default=r,t.exports=n.default,cc._RF.pop()},{Direction:"Direction",GameEvent:"GameEvent",GameStates:"GameStates",IInputCommand:"IInputCommand"}],ShopUI:[function(e,t){"use strict";cc._RF.push(t,"ed165aKV9NEwqeZ8el6YHYw","ShopUI");var n=o(e("GameEvent")),i=o(e("UiElement")),a=o(e("ValueType"));function o(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:i.default,properties:{labelCountTrees:{default:null,type:cc.Label},labelCountRock:{default:null,type:cc.Label},holder:{default:null,type:cc.Node},closeButton:{default:null,type:cc.Node},_animationCocos:{default:null,serializable:!1}},onLoad:function(){this.isActiveElement=!1},start:function(){this._subscribeEvents(!0)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](n.default.SHOP_TOGGLE,this.onShopToggle,this)},onShopToggle:function(e,t){var i=this;if(void 0===t&&(t=!0),this.isActiveElement!==e&&(this.isActiveElement=e,e?this.show(1):this.hide(1),cc.systemEvent.emit(n.default.GET_VALUE,a.default.TreeCountChop,function(e){i.labelCountTrees&&(i.labelCountTrees.string=e)}),cc.systemEvent.emit(n.default.GET_VALUE,a.default.RockCountChop,function(e){i.labelCountRock&&(i.labelCountRock.string=e)}),this.closeButton&&(this.closeButton.active=t),this.holder)){var o=e?0:600;my.tweenManager.add(this.holder,{y:o},1,"linear",!0)}},onSwitchActiveCallback:function(){}}),cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement",ValueType:"ValueType"}],StickInputCommand:[function(e,t,n){"use strict";cc._RF.push(t,"27c05ZkGHxKkZG8FF/+WJDH","StickInputCommand"),n.__esModule=!0,n.default=void 0;var i=a(e("GameEvent"));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._currentTouch=null,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.onDown=function(e,t){-1===this._currentTouchID&&(this._currentTouch=this.createTouch(e,t),this._currentTouchID=e._id,cc.systemEvent.emit(i.default.STICK_DOWN,this._currentTouch.info.location))},o.onMove=function(e,t){if(this._currentTouchID===e._id){var n=this.getTouchInfo(e,t);cc.systemEvent.emit(i.default.STICK_MOVE,n.location)}},o.onUp=function(e){this._currentTouchID===e._id&&(cc.systemEvent.emit(i.default.STICK_UP),this._currentTouch=null,this._currentTouchID=-1,this.destroyTouch(e))},a}(a(e("IInputCommand")).default);n.default=o,t.exports=n.default,cc._RF.pop()},{GameEvent:"GameEvent",IInputCommand:"IInputCommand"}],TargetObject:[function(e,t){"use strict";cc._RF.push(t,"e83895zACxNkb7j8psN/oYB","TargetObject");var n=s(e("GameEvent")),i=s(e("GameObjectType")),a=s(e("GameObject")),o=s(e("ValueType"));function s(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:a.default,properties:{targetType:{default:i.default.None,type:i.default},chopAnimation:cc.String,deadAnimation:cc.String,hits:4,_animationCocos:{default:null,serializable:!1}},onLoad:function(){this.isActivated=!0,this._animationCocos=this.node.getComponent(cc.Animation)},specify:function(){},init:function(){this.isActivated=!0},initFromPool:function(){this.init()},actionTarget:function(){this.isActivated&&(this._animationCocos&&this._animationCocos.play(this.chopAnimation),0===this.hits&&(this.isActivated=!1,cc.systemEvent.emit(n.default.OBJECT_DESTROY,this.node)),this.hits=this.hits-1)},onSwitchActiveCallBack:function(){var e=this.node.getComponent(cc.BoxCollider3D);this.isActivated?e&&(e.isTrigger=!1):(this._animationCocos&&this._animationCocos.play(this.deadAnimation),cc.systemEvent.emit(n.default.CHANGE_VALUE,o.default.Tree,{addition:-1}),e&&(e.isTrigger=!0))}}),cc._RF.pop()},{GameEvent:"GameEvent",GameObject:"GameObject",GameObjectType:"GameObjectType",ValueType:"ValueType"}],TargetShop:[function(e,t){"use strict";cc._RF.push(t,"f1c92RZYfNFj5KvSNyHFEgE","TargetShop");var n=o(e("GameEvent")),i=o(e("GameObject")),a=o(e("GameStates"));function o(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:i.default,properties:{hitZoneNode:{default:null,type:cc.Node}},onLoad:function(){this.hitZoneNode&&(this._hitZone=this.hitZoneNode.getComponent(cc.BoxCollider3D)),this._hitZone&&this._hitZone.on("trigger-enter",this.onHitZoneTrigger,this)},onHitZoneTrigger:function(e){e.type,e.otherCollider.node,"hero"==e.otherCollider.node.group&&cc.systemEvent.emit(n.default.SWITCH_GAME_STATE,a.default.Shopping)}}),cc._RF.pop()},{GameEvent:"GameEvent",GameObject:"GameObject",GameStates:"GameStates"}],Terra:[function(e,t,n){"use strict";cc._RF.push(t,"1d707yOWqdBi5T3XcEx/Zy9","Terra"),n.__esModule=!0,n.default=void 0,a(e("GameEvent"));var i=a(e("HitboxBuilder"));function a(e){return e&&e.__esModule?e:{default:e}}var o=cc.Class({extends:cc.Component,properties:{back:cc.Sprite,terraFrame:cc.SpriteFrame,radiusDestroy:50,threshold:1,maxDamage:7,damageColor:cc.Color.WHITE,damageWidth:10,_sprite:{default:null,serializable:!1},_hitboxBuilder:{default:null,serializable:!1},_m_TextureData:{default:null,serializable:!1},_alphaTextureData:{default:[],serializable:!1},_m_width:{default:0,serializable:!1},_m_heigth:{default:0,serializable:!1},_poligons:{default:[],serializable:!1},_lastPointerPoint:{default:null,serializable:!1},_hitCounter:{default:0,serializable:!1}},onLoad:function(){this._sprite=this.node.getComponent(cc.Sprite)||this.node.addComponent(cc.Sprite),this._hitboxBuilder=new i.default,this._create()},destroyTerraCircle:function(e,t){for(var n={x:Math.round(e.x),y:Math.round(this._m_heigth-e.y)},i=!1,a=Math.max(n.x-t-this.damageWidth,0),o=Math.min(n.x+t+this.damageWidth,this._m_width);a<o;a++)for(var s=Math.max(n.y-t-this.damageWidth,0),r=Math.min(n.y+t+this.damageWidth,this._m_heigth);s<r;s++){var c=cc.v2(a,s).sub(n).mag();if(c<t){var l=this.getPixelData(a,s);l.a>0&&(l.a=0,i=!0,this.updatePixelData(l))}if(c>=t&&c<t+this.damageWidth/5){var u=this.getPixelData(a,s);u.a>0&&(u.r=u.r/1.75,u.g=u.g/2,u.b=u.b/1.5,i=!0,this.updatePixelData(u))}if(c>t+this.damageWidth/5&&c<=t+this.damageWidth*Math.random()){var h=this.getPixelData(a,s);if(h.a>0){var d=new cc.Color(0,0,0),f=new cc.Color(0,0,0);cc.Color.add(f,this.damageColor,new cc.Color(2*Math.random(),5*Math.random(),10*Math.random())),cc.Color.subtract(d,h,f),h.r=d.r,h.g=d.g,h.b=d.b,i=!0,this.updatePixelData(h)}}}if(i){for(var m=n.y+t+1;m<n.y+t+7;m++)if(this.getPixelData(n.x,m).a>0&&0===this.getPixelData(n.x,m+1).a){this.destroyTerraCircle({x:n.x,y:this._m_heigth-m});break}for(var p=n.y-t-1;p>n.y-t-7;p--)if(this.getPixelData(n.x,p).a>0&&0===this.getPixelData(n.x,p-1).a){this.destroyTerraCircle({x:n.x,y:this._m_heigth-p});break}for(var _=n.x+t+1;_<n.x+t+7;_++)if(this.getPixelData(_,n.y).a>0&&0===this.getPixelData(_+1,n.y).a){this.destroyTerraCircle({x:_,y:this._m_heigth-n.y});break}for(var v=n.x-t-1;v>n.x-t-7;v--)if(this.getPixelData(v,n.y).a>0&&0===this.getPixelData(v-1,n.y).a){this.destroyTerraCircle({x:v,y:this._m_heigth-n.y});break}this.updateTerra()}},_create:function(){this.terraFrame&&(this.createPixelData(),this.updatePhysicsPoint())},updateTerra:function(){var e=new cc.Texture2D;e.initWithData(this._m_TextureData,cc.Texture2D.PixelFormat.RGBA8888,this._m_width,this._m_heigth);var t=new cc.SpriteFrame(e,this._sprite.spriteFrame.getRect(),this._sprite.spriteFrame.isRotated(),this._sprite.spriteFrame.getOffset(),this._sprite.spriteFrame.getOriginalSize());this._sprite.spriteFrame=t},updatePhysicsPoint:function(){var e=this,t=this._sprite.spriteFrame;this._hitboxBuilder.calculatePoints(this._alphaTextureData,t._rect.width,t._rect.height,this._sprite.node,this.threshold);for(var n=this._hitboxBuilder.getPoints(),i=n.length,a=0;a<i;a++){var o=this._poligons[a];o||(o=this.node.addComponent(cc.PhysicsPolygonCollider),this._poligons[a]=o),o.points=n[a],o.apply()}for(var s=i,r=this._poligons.length;s<r;s++)this._poligons[s].points=[];this.scheduleOnce(function(){e.node.active=!1,e.node.active=!0},0)},createPixelData:function(){if(null!==this._hitboxBuilder){this._sprite.spriteFrame=this.terraFrame.clone(),this._sprite.node.setContentSize(this.terraFrame.getOriginalSize());var e=this._sprite.spriteFrame._texture.getHtmlElementObj(),t=this._hitboxBuilder.parseImg(e);this._m_width=e.width,this._m_heigth=e.height;var n=this._m_width*this._m_heigth*4;this._m_TextureData=new Uint8Array(n),this._alphaTextureData=[];for(var i=0;i<n;i++)this._m_TextureData[i]=t[i],(i+1)%4==0&&this._alphaTextureData.push(this._m_TextureData[i]);this.updateTerra()}},updatePixelData:function(e){var t=e.i;this._m_TextureData[t]=e.r,this._m_TextureData[t+1]=e.g,this._m_TextureData[t+2]=e.b,this._m_TextureData[t+3]=e.a,this._alphaTextureData[t/4]=e.a},getPixelData:function(e,t){var n=4*(t*this._m_width+e);return{i:n,x:e,y:t,r:this._m_TextureData[n],g:this._m_TextureData[n+1],b:this._m_TextureData[n+2],a:this._m_TextureData[n+3]}},onBeginContact:function(e,t,n){if("toxin"===n.node.group){var i=e.getWorldManifold().points;if(i.length>0){var a=this.node.convertToNodeSpaceAR(i[0]),o=cc.v2(Math.round(a.x),Math.round(a.y));this._lastPointerPoint=o.clone(),this.destroyTerraCircle(o,this.radiusDestroy),this.updatePhysicsPoint()}}}});n.default=o,t.exports=n.default,cc._RF.pop()},{GameEvent:"GameEvent",HitboxBuilder:"HitboxBuilder"}],Toggleinput:[function(e,t){"use strict";cc._RF.push(t,"e75f9jduDZDypoNefC2RQ0t","Toggleinput");var n,i=(n=e("GameEvent"))&&n.__esModule?n:{default:n};cc.Class({extends:cc.Component,properties:{},onLoad:function(){this._subscribeEvents(!0)},start:function(){this.node.active=!1},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.TOGGLE_INPUT,this.onToggleInput,this)},onToggleInput:function(e){this.node.active!==e&&(this.node.active=e)}}),cc._RF.pop()},{GameEvent:"GameEvent"}],TouchSource:[function(e,t,n){"use strict";cc._RF.push(t,"c02509unCRH7bXNVLbNQPc4","TouchSource"),n.__esModule=!0,n.default=void 0;var i=cc.Enum({Any:0,RedirectButton:1,Tutorial:2,Restart:4,Icon:5,ItemButton:6,Stick:7,ShopCloseButton:8});n.default=i,t.exports=n.default,cc._RF.pop()},{}],Trigger:[function(e,t){"use strict";cc._RF.push(t,"da5ce20b0FJaYDUG1KfeByf","Trigger");var n=a(e("GameEvent")),i=a(e("GameObject"));function a(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:i.default,properties:{_data:{default:null,serializable:!1},_target3DCollider:{default:null,type:cc.Collider3D}},onLoad:function(){this._target3DCollider=this.node.getComponent(cc.Collider3D)},specify:function(e){this._data=e&&e instanceof Object?e:{},this._target3DCollider&&this._handleEvent(!0)},_handleEvent:function(e){var t=e?"on":"off";this._target3DCollider[t]("trigger-enter",this.onEnterTrigger,this),this._target3DCollider[t]("trigger-exit",this.onExitTrigger,this)},_triggered:function(e){if(void 0===e&&(e=null),e)if(e instanceof Array)for(var t in e)this._sendEvent(e[t]);else this._sendEvent(e)},_sendEvent:function(e){var t=n.default[e.event]||n.default[e]||n.default.None;t!==n.default.None&&cc.systemEvent.emit(t,e.arg1,e.arg2,e.arg3,e.arg4,e.arg5)},onEnterTrigger:function(e){"hero"===e.otherCollider.node.group&&this._onEnterCollision()},onExitTrigger:function(e){"hero"===e.otherCollider.node.group&&this._onExitCollision()},_onEnterCollision:function(){this._data&&(this._triggered(this._data.enter||this._data),this._data.isBeginCollisionDestroy&&(this._handleEvent(!1),cc.systemEvent.emit(n.default.RETURN_TO_POOL,this.node)))},_onExitCollision:function(){this._data&&(this._triggered(this._data.exit||null),this._data.isEndCollisionDestroy&&(this._handleEvent(!1),cc.systemEvent.emit(n.default.RETURN_TO_POOL,this.node)))}}),cc._RF.pop()},{GameEvent:"GameEvent",GameObject:"GameObject"}],TurnManager:[function(e,t){"use strict";cc._RF.push(t,"75124+yvhFDnqQcYvL7MPJW","TurnManager");var n=o(e("GameEvent")),i=o(e("GameStates")),a=o(e("TurnType"));function o(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{timeToCharacterWait:3,maxTime:7,_gameState:null,_timeToPlayer:0,_allEnemyDead:!1,_turnType:{default:null,notify:function(e){e!==this._turnType&&this._switchTurnType(this._turnType)}}},onLoad:function(){this._timeToPlayer=this.timeToCharacterWait,this._subscribeEvents(!0)},update:function(e){this._gameState===i.default.Fake||this._gameState===i.default.Result||this._turnType!==a.default.PlayerShoot||this._allEnemyDead||(this._timeTurn<this._timeToPlayer&&this._timeTurn+e>=this._timeToPlayer&&(cc.systemEvent.emit(n.default.SET_TURN_TYPE,a.default.PlayerDraw),this._timeToPlayer=this.timeToCharacterWait),this._timeTurn+=e)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](n.default.SET_STATE_ON_MANAGERS,this.onSetStateOnManager,this),cc.systemEvent[t](n.default.INCREASE_TIME_TURN,this.onIncreaseTimeTurn,this),cc.systemEvent[t](n.default.SET_TURN_TYPE,this.onSetTurnType,this),cc.systemEvent[t](n.default.ENEMY_DEAD,this.onEnemyDead,this)},_switchTurnType:function(e){switch(e){case a.default.PlayerAim:cc.systemEvent.emit(n.default.TOGGLE_TUTOR,!0),cc.systemEvent.emit(n.default.TOGGLE_DRAW_CANVAS,!1),cc.systemEvent.emit(n.default.PLAYER_START_TURN);break;case a.default.PlayerShoot:this._timeTurn=0;break;case a.default.PlayerDraw:cc.systemEvent.emit(n.default.TOGGLE_TUTORIAL_DRAW,!0),cc.systemEvent.emit(n.default.RETURN_WEAPON),cc.systemEvent.emit(n.default.TOGGLE_DRAW_CANVAS,!0),cc.systemEvent.emit(n.default.TOGGLE_ENEMY_SCARE,!1)}},onIncreaseTimeTurn:function(e){var t=this._timeToPlayer+e;this._timeToPlayer=t<this.maxTime?this._timeToPlayer+e:this.maxTime},onSetStateOnManager:function(e){this._gameState=e},onSetTurnType:function(e){this._turnType=e},onEnemyDead:function(e){this._allEnemyDead=e<=0,this._allEnemyDead&&cc.systemEvent.emit(n.default.ALL_ENEMY_DEAD)}}),cc._RF.pop()},{GameEvent:"GameEvent",GameStates:"GameStates",TurnType:"TurnType"}],TurnType:[function(e,t,n){"use strict";cc._RF.push(t,"4ee18yTpoJFF50EjLdR+/Wv","TurnType"),n.__esModule=!0,n.default=void 0;var i=cc.Enum({PlayerDraw:9999999,PlayerShoot:99999991,PlayerAim:99999992});n.default=i,t.exports=n.default,cc._RF.pop()},{}],TutorialManager:[function(e,t){"use strict";cc._RF.push(t,"0a3a1ZKq3FEP5C6Ae8lVo/j","TutorialManager");var n=a(e("GameEvent")),i=a(e("UiElement"));function a(e){return e&&e.__esModule?e:{default:e}}var o=cc.Class({properties:{startPointTag:0,endPointTag:0,moveSpeed:1,offsetPort:cc.Vec2.ZERO,offsetLand:cc.Vec2.ZERO},name:"TutorialRelationship"}),s={animation:{show:"tutorial_show",hide:"tutorial_hide",down:"tutorial_pipe_down",up:"tutorial_pipe_up"},event:{showEnd:"show_end",hideEnd:"hide_end",downEnd:"down_end",upEnd:"up_end",moveEnd:1},resetOnStart:{show:"tutorial_show",down:"tutorial_pipe_down"}};cc.Class({extends:i.default,properties:{getOnStartDelay:0,trail:{default:null,type:cc.MotionStreak},tutorialSettingsArray:[o],_startPointsArray:{default:[],serializable:!1},_endPointsArray:{default:[],serializable:!1},_currentToggle:{default:!1,serializable:!1},_camera:{default:null,serializable:!1},_startPoint:{default:cc.Vec2.ZERO,serializable:!1},_endPoint:{default:cc.Vec2.ZERO,serializable:!1},_currentIndex:{default:0,serializable:!1},_animation:{default:null,serializable:!1},_tweenMove:{default:null,serializable:!1},_currentStartNode:{default:null,serializable:!1}},onLoad:function(){this._animation=this.node.getComponent(cc.Animation),this._subscribeEvents(!0)},start:function(){var e=this;this._camera=cc.Camera.findCamera(this.node),this.scheduleOnce(function(){e._getPipeTutorialTargets()},this.getOnStartDelay)},onEnable:function(){},onDisable:function(){this._subscribeEvents(!1)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](n.default.TOGGLE_TUTOR,this.onToggleTutorial,this),cc.systemEvent[t](my.Events.SIZE_CHANGE,this.onSizeChange,this)},_getPipeTutorialTargets:function(){var e=this;this._startPointsArray=[],this._endPointsArray=[],cc.systemEvent.emit(n.default.GET_TUTORIAL_TARGET,function(t){t.isStartPoint?e._startPointsArray.push(t):t.isEndPoint&&e._endPointsArray.push(t)})},_tutorialSetStartEndPoint:function(e,t,n){if(e&&t){var i=e.getWorldPosition(),a=t.getWorldPosition();this._startPoint=this._camera.getScreenToWorldPoint(i),this._endPoint=this._camera.getScreenToWorldPoint(a).addSelf(n),this.node.setPosition(this._startPoint)}},_findTargets:function(){var e=this;if(this._currentIndex<this.tutorialSettingsArray.length){var t=this.tutorialSettingsArray[this._currentIndex];this._currentStartNode=null;var n=this._startPointsArray.find(function(n){if(n.tag===t.startPointTag)return e._currentStartNode=n.node,n}),i=this._endPointsArray.find(function(e){if(e.tag===t.endPointTag)return e});if(!i)return this._currentIndex++,void this._findTargets();if(n&&n.currentTargetObject.isButtonBlock||!n)return this._currentIndex++,void this._findTargets();n.currentTargetObject.toggleTutorAnimation(),this._tutorialSetStartEndPoint(n,i,my.settings.IS_LANDSCAPE?t.offsetLand:t.offsetPort),this._animation&&this._animation.play(s.animation.show)}},_tutorialMove:function(e){this._tweenMove=my.tweenManager.add(this.node,{x:this._endPoint.x,y:this._endPoint.y},e,"linear",!0),this._tweenMove.addEvent(1,this.onAnimationEvent,this)},_resetAnimations:function(){if(this._animation)for(var e in s.resetOnStart)this._animation.play(s.animation[e]),this._animation.setCurrentTime(0),this._animation.stop()},onToggleTutorial:function(e){this._currentToggle!==e&&this._animation&&(this._currentIndex=0,this._tweenMove&&(this._tweenMove.stop(),this._tweenMove=null,this._resetAnimations()),e?this._findTargets():(this._animation.play(s.animation.show),this._animation.setCurrentTime(0),this._animation.stop()),this.trail&&(this.trail.enabled=!1),this._currentToggle=e)},onAnimationEvent:function(e){var t=s.event,i=s.animation;switch(e){case t.showEnd:this.trail&&(this.trail.enabled=!0),this._animation&&this._animation.play(i.down),cc.systemEvent.emit(n.default.LIGHT_BLINK_OBJECT,this._currentStartNode);break;case t.downEnd:this._tutorialMove();break;case t.moveEnd:this._animation&&this._animation.play(s.animation.up);break;case t.upEnd:this._animation&&this._animation.play(i.hide);break;case t.hideEnd:this.trail&&(this.trail.enabled=!1),this._findTargets()}},onSizeChange:function(){var e=this;this._camera instanceof cc.Camera&&this._tweenMove&&(this._tweenMove.stop(),this._resetAnimations(),this.trail&&(this.trail.enabled=!1),this.scheduleOnce(function(){e._findTargets()}))}}),cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement"}],TutorialTarget:[function(e,t,n){"use strict";cc._RF.push(t,"f022eBqWrtEEK3hetjPuhVK","TutorialTarget"),n.__esModule=!0,n.default=void 0;var i=s(e("GameEvent")),a=s(e("UiElement")),o=s(e("GameObject"));function s(e){return e&&e.__esModule?e:{default:e}}var r=cc.Class({extends:cc.Component,properties:{isStartPoint:{default:!1,visible:function(){return!this.isEndPoint}},isEndPoint:{default:!1,visible:function(){return!this.isStartPoint}},tag:0,targetGO:{default:null,serializable:!1,visible:!1},targetUI:{default:null,serializable:!1,visible:!1},currentTargetObject:{default:null,serializable:!1,visible:!1},tweenShake:{default:null,serializable:!1,visible:!1}},onLoad:function(){this.targetGO=this.node.getComponent(o.default),this.targetUI=this.node.getComponent(a.default),this.currentTargetObject=null!==this.targetGO?this.targetGO:this.targetUI},start:function(){this._getTagIfTagAvailable()},onEnable:function(){this._subscribeEvents(!0)},onDisable:function(){this._subscribeEvents(!1)},getWorldPosition:function(){var e=cc.Camera.findCamera(this.node),t=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO);return e.getWorldToScreenPoint(t)},_subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.GET_TUTORIAL_TARGET,this.onGetTutorialTarget,this)},_getTagIfTagAvailable:function(){this.targetGO&&this.targetGO.tag&&(this.tag=this.targetGO.tag),this.targetUI&&this.targetUI.tag&&(this.tag=this.targetUI.tag)},onGetTutorialTarget:function(e){e instanceof Function&&e(this)}});n.default=r,t.exports=n.default,cc._RF.pop()},{GameEvent:"GameEvent",GameObject:"GameObject",UiElement:"UiElement"}],Tutorial:[function(e,t){"use strict";cc._RF.push(t,"72276KmGlZJZpWxJS3t1QWx","Tutorial");var n=a(e("GameEvent")),i=a(e("UiElement"));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function s(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}cc.Class({extends:i.default,properties:{targetToggleNode:{default:null,type:cc.Node},eventToToggle:{default:n.default.None,type:n.default},tutorText:{default:[],type:cc.Node},trail:{default:null,type:cc.MotionStreak},_currentSwitchTutorialNode:{default:null,serializable:!1},_animation:{default:null,serializable:!1},_currentAnimationClip:{default:null,serializable:!1},_oldToggle:{default:!1,serializable:!1}},onLoad:function(){this._animation=this.node.getComponent(cc.Animation)},onEnable:function(){cc.systemEvent.on(this.eventToToggle,this.onToggleTutorial,this),cc.systemEvent.on(n.default.SET_HOLDER_TUTORIAL,this.onSetHolderTutorial,this),cc.systemEvent.on(my.Events.SIZE_CHANGE,this.onSizeChange,this)},onDisable:function(){cc.systemEvent.off(this.eventToToggle,this.onToggleTutorial,this),cc.systemEvent.off(n.default.SET_HOLDER_TUTORIAL,this.onSetHolderTutorial,this),cc.systemEvent.off(my.Events.SIZE_CHANGE,this.onSizeChange,this)},onToggleTutorial:function(e,t){var i=this;if(void 0===e&&(e=!0),void 0===t&&(t=.1),this._oldToggle!==e){this._oldToggle=e;var a=e?255:0,s=my.tweenManager.add(this.targetToggleNode||this.node,{opacity:a},t,"linear",!0);this._currentSwitchTutorialNode instanceof cc.Node&&(my.tweenManager.add(this._currentSwitchTutorialNode,{opacity:a},t,"linear",!0).onComplete=function(){i._currentSwitchTutorialNode.active=e});for(var r,c=o(this.tutorText);!(r=c()).done;){var l=r.value;l&&my.tweenManager.add(l,{opacity:a},t,"linear",!0)}s.onComplete=function(){i._animation&&(i._animation.play(),i._animation.setCurrentTime(0),e||i._animation.stop())},this.trail&&this.trail.reset(),cc.systemEvent.emit(n.default.TOGGLE_BLACKOUT,e)}},onAnimationEvent:function(){this.trail&&this.trail.reset()},onSetHolderTutorial:function(e){this._currentSwitchTutorialNode=e},onSizeChange:function(){var e=my.settings.IS_LANDSCAPE?30:15;this.trail&&(this.trail.stroke=e,this.trail.reset())}}),cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement"}],UiElement:[function(e,t,n){"use strict";cc._RF.push(t,"dc70baqBFlNH4NqCW88ZQXR","UiElement"),n.__esModule=!0,n.default=void 0;var i=cc.Class({extends:cc.Component,properties:{isActiveElement:{default:!1,notify:function(e){e!==this.isActiveElement&&(this.onSwitchActiveCallback instanceof Function?this.onSwitchActiveCallback(this.isActiveElement):this.node.active=this.isActiveElement)},visible:!1},_tweenShow:{default:null,serializable:!1},_tweenHide:{default:null,serializable:!1}},show:function(e){var t=this;void 0===e&&(e=.5),my.tweenManager&&(this.stopTwins(),this._tweenShow=my.tweenManager.add(this.node,{opacity:255},e,"linear",!0),this._tweenShow.onComplete=function(){t.onShowCallBack instanceof Function&&t.onShowCallBack()})},hide:function(e){var t=this;void 0===e&&(e=.5),my.tweenManager&&(this.stopTwins(),this._tweenHide=my.tweenManager.add(this.node,{opacity:0},e,"linear",!0),this._tweenHide.onComplete=function(){t.onHideCallBack instanceof Function&&t.onHideCallBack()})},stopTwins:function(){this._tweenShow&&(this._tweenShow.stop(),this._tweenShow=null),this._tweenHide&&(this._tweenHide.stop(),this._tweenHide=null)},destroyElement:function(){this.node.destroy()},onSwitchActiveCallback:null,onHideCallBack:null,onShowCallBack:null});n.default=i,t.exports=n.default,cc._RF.pop()},{}],UiManager:[function(e,t){"use strict";cc._RF.push(t,"cf58dh0u2dJFbr9SmWD7PIh","UiManager");var n=a(e("UiElement")),i=a(e("GameEvent"));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function s(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var c=cc.Class({properties:{prefab:cc.Prefab,isNeedToHideOnResult:!1,zIndex:0},name:"UiCreateHelper"});cc.Class({extends:cc.Component,properties:{uiElements:[c],_uiArray:[]},onLoad:function(){this.subscribeEvents(!0)},onEnable:function(){this._spawnUiElements()},subscribeEvents:function(e){var t=e?"on":"off";cc.systemEvent[t](i.default.HIDE_UI,this.onHideUi,this),cc.systemEvent[t](i.default.GET_UI_MANGER_NODE,this.onGetUIManagerNode,this)},_spawnUiElements:function(){for(var e,t=o(this.uiElements);!(e=t()).done;){var n=e.value;if(n.prefab){var i=cc.instantiate(n.prefab);i.setParent(this.node),i.zIndex=n.zIndex,i.active=!0;var a={key:i.name,createdNode:i,isNeedHide:n.isNeedToHideOnResult};this._uiArray.push(a)}}},onHideUi:function(){for(var e,t=o(this._uiArray);!(e=t()).done;){var i=e.value;if(!0===i.isNeedHide){var a=i.createdNode.getComponent(n.default);a&&(a.isActiveElement=!1)}}},onGetUIManagerNode:function(e){e instanceof Function&&e(this.node)}}),cc._RF.pop()},{GameEvent:"GameEvent",UiElement:"UiElement"}],ValueType:[function(e,t,n){"use strict";cc._RF.push(t,"3285684R11IurXSo0LlLiQC","ValueType"),n.__esModule=!0,n.default=void 0;var i=cc.Enum({None:0,Tree:8771,TreeCountChop:9772,RockCountChop:9773});n.default=i,t.exports=n.default,cc._RF.pop()},{}],Wall:[function(e,t){"use strict";cc._RF.push(t,"19cc7/dMgxEZop5HwsRL6w9","Wall"),i(e("GameEvent"));var n=i(e("GameObject"));function i(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:n.default,properties:{canMoveOnThisCell:{default:!1,visible:!1}}}),cc._RF.pop()},{GameEvent:"GameEvent",GameObject:"GameObject"}],Weapon:[function(e,t){"use strict";cc._RF.push(t,"d4641fJUiBAyrxJb2XtT6Kd","Weapon");var n,i,a,o,s=l(e("Bullet")),r=(l(e("GameEvent")),l(e("GameObject"))),c=l(e("GameObjectType"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t,n,i,a){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var f=cc._decorator,m=f.ccclass,p=f.property;m((o=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return u(t=e.call.apply(e,[this].concat(o))||this,"bulletPosition",i,h(t)),u(t,"cooldown",a,h(t)),t._directionTarget=null,t._lastShotTime=0,t._isShooting=!1,t._firsShoot=!0,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=o.prototype;return r.onLoad=function(){},r.update=function(e){this._isShooting&&(this._lastShotTime+=e,this._lastShotTime>=this.cooldown&&(this.shoot(),this._lastShotTime=0))},r.toggleShooting=function(e){this._isShooting=e,this._firsShoot&&e&&(this.shoot(),this._firsShoot=!1)},r.shoot=function(){var e=this._createBullet(),t=this._directionTarget.convertToWorldSpaceAR(cc.v3(0,0,1)).sub(this._directionTarget.convertToWorldSpaceAR(cc.Vec3.ZERO));t.normalize(),e&&e.run(t)},r._createBullet=function(){var e={type:c.default.Bullet,transform:{scale:new cc.Vec3(10,10,10)}},t=this.world.createObject(e);return t?(t.parent=this.world.node,t.position=this.world.node.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(this.bulletPosition)),t.getComponent(s.default)):null},o}(r.default),i=d((n=o).prototype,"bulletPosition",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return cc.v3()}}),a=d(n.prototype,"cooldown",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),n)),cc._RF.pop()},{Bullet:"Bullet",GameEvent:"GameEvent",GameObject:"GameObject",GameObjectType:"GameObjectType"}],World:[function(e,t){"use strict";cc._RF.push(t,"1f32a19heZAzqbhPEWpda9i","World");var n=r(e("GameEvent")),i=r(e("GameObjectType")),a=r(e("EffectType")),o=r(e("ValueType")),s=r(e("DataType"));function r(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function l(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}cc.Class({extends:cc.Component,properties:{_objectArray:[],_effectsOnSceneArray:[],_gameObjectArray:[]},onLoad:function(){this._subscribeEvents()},createObject:function(e){var t=this,i=null;return e?(cc.systemEvent.emit(n.default.CREATE_GAME_OBJECT,e.type,function(n,a){n instanceof cc.Node&&(n.parent=t.node,i=n,n.is3DNode?t._setSettings3D(n,e):t._setSettings2D(n,e),t._objectArray.push(n)),a&&(a.world=t,t._gameObjectArray.push(a))},function(t,n){t instanceof cc.Node&&n&&(n.specify instanceof Function&&e.specify&&n.specify(e.specify),n.initFromPool instanceof Function&&n.initFromPool())}),i):i},_subscribeEvents:function(){cc.systemEvent.on(n.default.CHECK_COLLIDE,this.onCheckCollide,this),cc.systemEvent.on(n.default.LOAD_WORLD,this.onLoadWorld,this),cc.systemEvent.on(n.default.RESTART_GAME,this.onRestartGame,this)},_setSettings2D:function(e,t){e.setPosition(t.position||cc.Vec2.ZERO),t.transform&&(e.setScale(t.transform.scale||cc.Vec2.ONE),e.setAnchorPoint(t.transform.anchor||new cc.Vec2(.5,.5)),e.angle=t.transform.angle||0,e.zIndex=t.transform.zIndex||0)},_setSettings3D:function(e,t){e.setPosition(t.position||cc.Vec3.ZERO),t.transform&&(e.setScale(t.transform.scale||cc.Vec3.ONE),e.setAnchorPoint(t.transform.anchor||new cc.Vec2(.5,.5)),e.eulerAngles=t.transform.eulerAngles||cc.Vec3.ZERO)},_createGameObjects:function(e){var t=this;if(e){if(e.world.objects instanceof Array)for(var r,l=c(e.world.objects);!(r=l()).done;)for(var u=r.value,h=u.settings.length,d=0;d<h;d++){var f=u.settings[d].specify,m=cc.Vec2.ZERO,p={};if(u.settings[d].resize){m=u.settings[d].startPosition;var _=this.createObject({type:i.default[u.type],position:cc.Vec2.ZERO,specify:f}),v=this.createObject({type:i.default[u.settings[d].resize.type],position:cc.Vec2.ZERO});if(v){var y=v.getComponent(my.ResizeComponent);(_.getComponent(my.ResizeComponent)||_.addComponent(my.ResizeComponent)).set(y),cc.systemEvent.emit(n.default.RETURN_TO_POOL,v)}_.setPosition(u.settings[d].startPosition||cc.Vec2.ZERO)}else m=u.settings[d].position,p={scale:u.settings[d].scale,angle:u.settings[d].angle,zIndex:u.settings[d].zIndex,anchor:u.settings[d].anchor,eulerAngles:u.settings[d].eulerAngles},this.createObject({type:i.default[u.type],position:m,transform:p,specify:f})}if(e.effect instanceof Array)for(var E,T=c(e.effect);!(E=T()).done;)for(var g=E.value,b=g.positions.length,C=0;C<b;C++){var S=g.positions[C];cc.systemEvent.emit(n.default.SPAWN_EFFECT,{type:a.default[g.type],parent:this.node,zIndex:S.z,position:{x:S.x,y:S.y},scale:g.scale,isReturnToPool:!1,callback:function(e){t._effectsOnSceneArray.push(e)}})}if(e.value instanceof Array)for(var A,R=c(e.value);!(A=R()).done;){var O=A.value;cc.systemEvent.emit(n.default.CHANGE_VALUE,o.default[O.type],{value:O.count})}if(e.map){var w=e.map,I=this._getData(s.default[w.typeMap]),G={scale:w.scale||cc.Vec3.ONE,eulerAngles:w.eulerAngles||cc.Vec3.ZERO};this.createObject({type:i.default.Map,transform:G,position:w.position,specify:I})}if(e.cameraBox){var P=this.createObject({type:i.default[e.cameraBox.type],position:cc.Vec2.ZERO});cc.systemEvent.emit(n.default.SET_DEFAULT_BOX,P,0)}cc.systemEvent.emit(my.Events.SIZE_CHANGE)}},_getData:function(e){var t=null;return cc.systemEvent.emit(n.default.GET_DATA,e,function(e){e instanceof cc.JsonAsset&&(t=e.json)}),t},onCheckCollide:function(e,t){for(var n,i=c(this._objectArray);!(n=i()).done;){var a=n.value,o=a.getComponent(cc.PolygonCollider);if(o&&cc.Intersection.pointInPolygon(e,o.world.points))return void(t instanceof Function&&t(a))}t instanceof Function&&t(null)},onLoadWorld:function(e){for(var t,i=c([].concat(this._objectArray,this._effectsOnSceneArray,this._gameObjectArray));!(t=i()).done;){var a=t.value;a.prepareReturnToPool instanceof Function&&a.prepareReturnToPool(),cc.systemEvent.emit(n.default.RETURN_TO_POOL,a)}this._objectArray=[],this._effectsOnSceneArray=[],this._gameObjectArray=[];var o=this._getData(e);this._createGameObjects(o)},onRestartGame:function(){}}),cc._RF.pop()},{DataType:"DataType",EffectType:"EffectType",GameEvent:"GameEvent",GameObjectType:"GameObjectType",ValueType:"ValueType"}]},{},["AimStick","FireButton","Pointer","CameraBoxes","CameraController","CameraController3D","CameraManager","ShakeSettings","ShakeType","AnimationConfig","Character","PersonaType","Enemy","EnemyMaterialChange","Hero","PlayerControl","DataDictionary","DataType","DictionaryValue","ValueType","AimType","Direction","GameEvent","GameStates","PrefabsParser","AnyInputCommand","ButtonInputCommand","CloseButtonInputCommand","DrawAreaInputCommand","FireButtonInputCommand","FirstTouchInputCommand","IInputCommand","ItemInputCommand","ShopCloseButtonCommand","StickInputCommand","InputCatcher","InputManager","InputTypes","TouchSource","AudioManager","ButtonItem","ButtonManager","ObjectDragAreaTarget","ItemDictionary","ItemType","EffectManager","EffectTimer","EffectType","GameManager","GameObject","GameObjectManager","GameObjectType","MapManager","IPlate","PlateDecrease","PlateIncrease","Trigger","Wall","PhysicManager","TurnManager","TurnType","UiManager","Background","Blackout","EditText","LebelNumbers","LightMask","HitboxBuilder","Terra","Score","ScoreSpawner","TargetObject","TargetShop","Announcer","AnnouncerScore","ProgressBar","ButtonsShow","FlashLight","IngameButton","IngameLogo","Result","ShopUI","Toggleinput","Tutorial","TutorialManager","TutorialTarget","UiElement","Level","LevelManager","LevelType","Bullet","Weapon","World"]);